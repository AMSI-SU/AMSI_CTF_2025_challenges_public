                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.4.1 #14650 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module metasprites
                                      6 	.optsdcc -msm83
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _main
                                     12 	.globl _load_and_duplicate_sprite_tile_data
                                     13 	.globl _get_tile_offset
                                     14 	.globl _set_tile
                                     15 	.globl _hide_sprites_range
                                     16 	.globl _fill_bkg_rect
                                     17 	.globl _set_sprite_data
                                     18 	.globl _set_bkg_data
                                     19 	.globl _display_off
                                     20 	.globl _vsync
                                     21 	.globl _joypad
                                     22 	.globl _old_joyp
                                     23 	.globl _joyp
                                     24 	.globl _num_tiles
                                     25 	.globl _flipped_data
                                     26 	.globl _rot
                                     27 	.globl _idx
                                     28 	.globl _PosF
                                     29 	.globl _SpdY
                                     30 	.globl _SpdX
                                     31 	.globl _PosY
                                     32 	.globl _PosX
                                     33 	.globl _green_pal
                                     34 	.globl _cyan_pal
                                     35 	.globl _pink_pal
                                     36 	.globl _gray_pal
                                     37 	.globl _reverse_bits
                                     38 	.globl _pattern
                                     39 ;--------------------------------------------------------
                                     40 ; special function registers
                                     41 ;--------------------------------------------------------
                                     42 ;--------------------------------------------------------
                                     43 ; ram data
                                     44 ;--------------------------------------------------------
                                     45 	.area _DATA
    00000000                         46 _PosX::
    00000000                         47 	.ds 2
    00000002                         48 _PosY::
    00000002                         49 	.ds 2
    00000004                         50 _SpdX::
    00000004                         51 	.ds 2
    00000006                         52 _SpdY::
    00000006                         53 	.ds 2
    00000008                         54 _PosF::
    00000008                         55 	.ds 1
    00000009                         56 _idx::
    00000009                         57 	.ds 1
    0000000A                         58 _rot::
    0000000A                         59 	.ds 1
    0000000B                         60 _flipped_data::
    0000000B                         61 	.ds 16
    0000001B                         62 _num_tiles::
    0000001B                         63 	.ds 2
                                     64 ;--------------------------------------------------------
                                     65 ; ram data
                                     66 ;--------------------------------------------------------
                                     67 	.area _INITIALIZED
    00000000                         68 _joyp::
    00000000                         69 	.ds 1
    00000001                         70 _old_joyp::
    00000001                         71 	.ds 1
                                     72 ;--------------------------------------------------------
                                     73 ; absolute external ram data
                                     74 ;--------------------------------------------------------
                                     75 	.area _DABS (ABS)
                                     76 ;--------------------------------------------------------
                                     77 ; global & static initialisations
                                     78 ;--------------------------------------------------------
                                     79 	.area _HOME
                                     80 	.area _GSINIT
                                     81 	.area _GSFINAL
                                     82 	.area _GSINIT
                                     83 ;--------------------------------------------------------
                                     84 ; Home
                                     85 ;--------------------------------------------------------
                                     86 	.area _HOME
                                     87 	.area _HOME
                                     88 ;--------------------------------------------------------
                                     89 ; code
                                     90 ;--------------------------------------------------------
                                     91 	.area _CODE
                                     92 ;src/metasprites.c:94: void set_tile(uint8_t tile_idx, uint8_t* data, uint8_t flip_x, uint8_t flip_y)
                                     93 ;	---------------------------------
                                     94 ; Function set_tile
                                     95 ; ---------------------------------
    00000000                         96 _set_tile::
    00000000 E8 F7            [16]   97 	add	sp, #-9
    00000002 F8 06            [12]   98 	ldhl	sp,	#6
    00000004 32               [ 8]   99 	ld	(hl-), a
    00000005 2B               [ 8]  100 	dec	hl
    00000006 7B               [ 4]  101 	ld	a, e
    00000007 22               [ 8]  102 	ld	(hl+), a
                                    103 ;src/metasprites.c:97: for(i = 0; i < TILE_HEIGHT; i++)
    00000008 7A               [ 4]  104 	ld	a, d
    00000009 22               [ 8]  105 	ld	(hl+), a
    0000000A 23               [ 8]  106 	inc	hl
    0000000B AF               [ 4]  107 	xor	a, a
    0000000C 22               [ 8]  108 	ld	(hl+), a
    0000000D 77               [ 8]  109 	ld	(hl), a
    0000000E                        110 00102$:
                                    111 ;src/metasprites.c:99: size_t y = flip_y ? (TILE_HEIGHT-1-i) : i; 
    0000000E F8 0C            [12]  112 	ldhl	sp,	#12
    00000010 7E               [ 8]  113 	ld	a, (hl)
    00000011 B7               [ 4]  114 	or	a, a
    00000012 28 13            [12]  115 	jr	Z, 00106$
    00000014 11 07 00         [12]  116 	ld	de, #0x0007
    00000017 F8 07            [12]  117 	ldhl	sp,	#7
    00000019 2A               [ 8]  118 	ld	a,	(hl+)
    0000001A 66               [ 8]  119 	ld	h, (hl)
    0000001B 6F               [ 4]  120 	ld	l, a
    0000001C 7B               [ 4]  121 	ld	a, e
    0000001D 95               [ 4]  122 	sub	a, l
    0000001E 5F               [ 4]  123 	ld	e, a
    0000001F 7A               [ 4]  124 	ld	a, d
    00000020 9C               [ 4]  125 	sbc	a, h
    00000021 F8 03            [12]  126 	ldhl	sp,	#3
    00000023 32               [ 8]  127 	ld	(hl-), a
    00000024 73               [ 8]  128 	ld	(hl), e
    00000025 18 08            [12]  129 	jr	00107$
    00000027                        130 00106$:
    00000027 F8 07            [12]  131 	ldhl	sp,	#7
    00000029 7E               [ 8]  132 	ld	a, (hl)
    0000002A F8 02            [12]  133 	ldhl	sp,	#2
    0000002C 22               [ 8]  134 	ld	(hl+), a
    0000002D 36 00            [12]  135 	ld	(hl), #0x00
    0000002F                        136 00107$:
    0000002F F8 02            [12]  137 	ldhl	sp,	#2
    00000031 4E               [ 8]  138 	ld	c, (hl)
    00000032 06 00            [ 8]  139 	ld	b, #0x00
                                    140 ;src/metasprites.c:100: flipped_data[2*i] = flip_x ? reverse_bits[data[2*y]] : data[2*y];
    00000034 F8 07            [12]  141 	ldhl	sp,	#7
    00000036 7E               [ 8]  142 	ld	a, (hl)
    00000037 87               [ 4]  143 	add	a, a
    00000038 F8 01            [12]  144 	ldhl	sp,	#1
    0000003A 77               [ 8]  145 	ld	(hl), a
    0000003B 5F               [ 4]  146 	ld	e, a
    0000003C 07               [ 4]  147 	rlca
    0000003D 9F               [ 4]  148 	sbc	a, a
    0000003E 57               [ 4]  149 	ld	d, a
    0000003F 21r0Br00         [12]  150 	ld	hl, #_flipped_data
    00000042 19               [ 8]  151 	add	hl, de
    00000043 E5               [16]  152 	push	hl
    00000044 7D               [ 4]  153 	ld	a, l
    00000045 F8 04            [12]  154 	ldhl	sp,	#4
    00000047 77               [ 8]  155 	ld	(hl), a
    00000048 E1               [12]  156 	pop	hl
    00000049 7C               [ 4]  157 	ld	a, h
    0000004A F8 03            [12]  158 	ldhl	sp,	#3
    0000004C 22               [ 8]  159 	ld	(hl+), a
    0000004D CB 21            [ 8]  160 	sla	c
    0000004F CB 10            [ 8]  161 	rl	b
    00000051 2A               [ 8]  162 	ld	a,	(hl+)
    00000052 66               [ 8]  163 	ld	h, (hl)
    00000053 6F               [ 4]  164 	ld	l, a
    00000054 09               [ 8]  165 	add	hl, bc
    00000055 5D               [ 4]  166 	ld	e, l
    00000056 54               [ 4]  167 	ld	d, h
    00000057 1A               [ 8]  168 	ld	a, (de)
    00000058 5F               [ 4]  169 	ld	e, a
    00000059 F8 0B            [12]  170 	ldhl	sp,	#11
    0000005B 7E               [ 8]  171 	ld	a, (hl)
    0000005C B7               [ 4]  172 	or	a, a
    0000005D 28 09            [12]  173 	jr	Z, 00108$
    0000005F 21rE3r00         [12]  174 	ld	hl, #_reverse_bits
    00000062 16 00            [ 8]  175 	ld	d, #0x00
    00000064 19               [ 8]  176 	add	hl, de
    00000065 7E               [ 8]  177 	ld	a, (hl)
    00000066 18 01            [12]  178 	jr	00109$
    00000068                        179 00108$:
    00000068 7B               [ 4]  180 	ld	a, e
    00000069                        181 00109$:
    00000069 F8 02            [12]  182 	ldhl	sp,	#2
    0000006B F5               [16]  183 	push	af
    0000006C 2A               [ 8]  184 	ld	a,	(hl+)
    0000006D 66               [ 8]  185 	ld	h, (hl)
    0000006E 6F               [ 4]  186 	ld	l, a
    0000006F F1               [12]  187 	pop	af
    00000070 77               [ 8]  188 	ld	(hl), a
                                    189 ;src/metasprites.c:101: flipped_data[2*i+1] = flip_x ? reverse_bits[data[2*y+1]] : data[2*y+1];
    00000071 F8 01            [12]  190 	ldhl	sp,	#1
    00000073 7E               [ 8]  191 	ld	a, (hl)
    00000074 3C               [ 4]  192 	inc	a
    00000075 5F               [ 4]  193 	ld	e, a
    00000076 07               [ 4]  194 	rlca
    00000077 9F               [ 4]  195 	sbc	a, a
    00000078 57               [ 4]  196 	ld	d, a
    00000079 21r0Br00         [12]  197 	ld	hl, #_flipped_data
    0000007C 19               [ 8]  198 	add	hl, de
    0000007D 33               [ 8]  199 	inc	sp
    0000007E 33               [ 8]  200 	inc	sp
    0000007F E5               [16]  201 	push	hl
    00000080 03               [ 8]  202 	inc	bc
    00000081 F8 04            [12]  203 	ldhl	sp,	#4
    00000083 2A               [ 8]  204 	ld	a,	(hl+)
    00000084 66               [ 8]  205 	ld	h, (hl)
    00000085 6F               [ 4]  206 	ld	l, a
    00000086 09               [ 8]  207 	add	hl, bc
    00000087 4D               [ 4]  208 	ld	c, l
    00000088 44               [ 4]  209 	ld	b, h
    00000089 0A               [ 8]  210 	ld	a, (bc)
    0000008A 5F               [ 4]  211 	ld	e, a
    0000008B F8 0B            [12]  212 	ldhl	sp,	#11
    0000008D 7E               [ 8]  213 	ld	a, (hl)
    0000008E B7               [ 4]  214 	or	a, a
    0000008F 28 17            [12]  215 	jr	Z, 00110$
    00000091 16 00            [ 8]  216 	ld	d, #0x00
    00000093 21rE3r00         [12]  217 	ld	hl, #_reverse_bits
    00000096 19               [ 8]  218 	add	hl, de
    00000097 E5               [16]  219 	push	hl
    00000098 7D               [ 4]  220 	ld	a, l
    00000099 F8 04            [12]  221 	ldhl	sp,	#4
    0000009B 77               [ 8]  222 	ld	(hl), a
    0000009C E1               [12]  223 	pop	hl
    0000009D 7C               [ 4]  224 	ld	a, h
    0000009E F8 03            [12]  225 	ldhl	sp,	#3
    000000A0 32               [ 8]  226 	ld	(hl-), a
    000000A1 2A               [ 8]  227 	ld	a, (hl+)
    000000A2 5F               [ 4]  228 	ld	e, a
    000000A3 56               [ 8]  229 	ld	d, (hl)
    000000A4 1A               [ 8]  230 	ld	a, (de)
    000000A5 4F               [ 4]  231 	ld	c, a
    000000A6 18 01            [12]  232 	jr	00111$
    000000A8                        233 00110$:
    000000A8 4B               [ 4]  234 	ld	c, e
    000000A9                        235 00111$:
    000000A9 E1               [12]  236 	pop	hl
    000000AA E5               [16]  237 	push	hl
    000000AB 71               [ 8]  238 	ld	(hl), c
                                    239 ;src/metasprites.c:97: for(i = 0; i < TILE_HEIGHT; i++)
    000000AC F8 07            [12]  240 	ldhl	sp,	#7
    000000AE 34               [12]  241 	inc	(hl)
    000000AF 20 02            [12]  242 	jr	NZ, 00149$
    000000B1 23               [ 8]  243 	inc	hl
    000000B2 34               [12]  244 	inc	(hl)
    000000B3                        245 00149$:
    000000B3 F8 07            [12]  246 	ldhl	sp,	#7
    000000B5 2A               [ 8]  247 	ld	a, (hl+)
    000000B6 D6 08            [ 8]  248 	sub	a, #0x08
    000000B8 7E               [ 8]  249 	ld	a, (hl)
    000000B9 DE 00            [ 8]  250 	sbc	a, #0x00
    000000BB DAr0Er00         [16]  251 	jp	C, 00102$
                                    252 ;src/metasprites.c:103: set_sprite_data(tile_idx, 1, flipped_data);
    000000BE 2B               [ 8]  253 	dec	hl
    000000BF 2B               [ 8]  254 	dec	hl
    000000C0 11r0Br00         [12]  255 	ld	de, #_flipped_data
    000000C3 D5               [16]  256 	push	de
    000000C4 3E 01            [ 8]  257 	ld	a, #0x01
    000000C6 F5               [16]  258 	push	af
    000000C7 33               [ 8]  259 	inc	sp
    000000C8 7E               [ 8]  260 	ld	a, (hl)
    000000C9 F5               [16]  261 	push	af
    000000CA 33               [ 8]  262 	inc	sp
    000000CB CDr00r00         [24]  263 	call	_set_sprite_data
                                    264 ;src/metasprites.c:104: }
    000000CE E8 0D            [16]  265 	add	sp, #13
    000000D0 E1               [12]  266 	pop	hl
    000000D1 F1               [12]  267 	pop	af
    000000D2 E9               [ 4]  268 	jp	(hl)
    000000D3                        269 _pattern:
    000000D3 80                     270 	.db #0x80	; 128
    000000D4 80                     271 	.db #0x80	; 128
    000000D5 40                     272 	.db #0x40	; 64
    000000D6 40                     273 	.db #0x40	; 64
    000000D7 20                     274 	.db #0x20	; 32
    000000D8 20                     275 	.db #0x20	; 32
    000000D9 10                     276 	.db #0x10	; 16
    000000DA 10                     277 	.db #0x10	; 16
    000000DB 08                     278 	.db #0x08	; 8
    000000DC 08                     279 	.db #0x08	; 8
    000000DD 04                     280 	.db #0x04	; 4
    000000DE 04                     281 	.db #0x04	; 4
    000000DF 02                     282 	.db #0x02	; 2
    000000E0 02                     283 	.db #0x02	; 2
    000000E1 01                     284 	.db #0x01	; 1
    000000E2 01                     285 	.db #0x01	; 1
    000000E3                        286 _reverse_bits:
    000000E3 00                     287 	.db #0x00	; 0
    000000E4 80                     288 	.db #0x80	; 128
    000000E5 40                     289 	.db #0x40	; 64
    000000E6 C0                     290 	.db #0xc0	; 192
    000000E7 20                     291 	.db #0x20	; 32
    000000E8 A0                     292 	.db #0xa0	; 160
    000000E9 60                     293 	.db #0x60	; 96
    000000EA E0                     294 	.db #0xe0	; 224
    000000EB 10                     295 	.db #0x10	; 16
    000000EC 90                     296 	.db #0x90	; 144
    000000ED 50                     297 	.db #0x50	; 80	'P'
    000000EE D0                     298 	.db #0xd0	; 208
    000000EF 30                     299 	.db #0x30	; 48	'0'
    000000F0 B0                     300 	.db #0xb0	; 176
    000000F1 70                     301 	.db #0x70	; 112	'p'
    000000F2 F0                     302 	.db #0xf0	; 240
    000000F3 08                     303 	.db #0x08	; 8
    000000F4 88                     304 	.db #0x88	; 136
    000000F5 48                     305 	.db #0x48	; 72	'H'
    000000F6 C8                     306 	.db #0xc8	; 200
    000000F7 28                     307 	.db #0x28	; 40
    000000F8 A8                     308 	.db #0xa8	; 168
    000000F9 68                     309 	.db #0x68	; 104	'h'
    000000FA E8                     310 	.db #0xe8	; 232
    000000FB 18                     311 	.db #0x18	; 24
    000000FC 98                     312 	.db #0x98	; 152
    000000FD 58                     313 	.db #0x58	; 88	'X'
    000000FE D8                     314 	.db #0xd8	; 216
    000000FF 38                     315 	.db #0x38	; 56	'8'
    00000100 B8                     316 	.db #0xb8	; 184
    00000101 78                     317 	.db #0x78	; 120	'x'
    00000102 F8                     318 	.db #0xf8	; 248
    00000103 04                     319 	.db #0x04	; 4
    00000104 84                     320 	.db #0x84	; 132
    00000105 44                     321 	.db #0x44	; 68	'D'
    00000106 C4                     322 	.db #0xc4	; 196
    00000107 24                     323 	.db #0x24	; 36
    00000108 A4                     324 	.db #0xa4	; 164
    00000109 64                     325 	.db #0x64	; 100	'd'
    0000010A E4                     326 	.db #0xe4	; 228
    0000010B 14                     327 	.db #0x14	; 20
    0000010C 94                     328 	.db #0x94	; 148
    0000010D 54                     329 	.db #0x54	; 84	'T'
    0000010E D4                     330 	.db #0xd4	; 212
    0000010F 34                     331 	.db #0x34	; 52	'4'
    00000110 B4                     332 	.db #0xb4	; 180
    00000111 74                     333 	.db #0x74	; 116	't'
    00000112 F4                     334 	.db #0xf4	; 244
    00000113 0C                     335 	.db #0x0c	; 12
    00000114 8C                     336 	.db #0x8c	; 140
    00000115 4C                     337 	.db #0x4c	; 76	'L'
    00000116 CC                     338 	.db #0xcc	; 204
    00000117 2C                     339 	.db #0x2c	; 44
    00000118 AC                     340 	.db #0xac	; 172
    00000119 6C                     341 	.db #0x6c	; 108	'l'
    0000011A EC                     342 	.db #0xec	; 236
    0000011B 1C                     343 	.db #0x1c	; 28
    0000011C 9C                     344 	.db #0x9c	; 156
    0000011D 5C                     345 	.db #0x5c	; 92
    0000011E DC                     346 	.db #0xdc	; 220
    0000011F 3C                     347 	.db #0x3c	; 60
    00000120 BC                     348 	.db #0xbc	; 188
    00000121 7C                     349 	.db #0x7c	; 124
    00000122 FC                     350 	.db #0xfc	; 252
    00000123 02                     351 	.db #0x02	; 2
    00000124 82                     352 	.db #0x82	; 130
    00000125 42                     353 	.db #0x42	; 66	'B'
    00000126 C2                     354 	.db #0xc2	; 194
    00000127 22                     355 	.db #0x22	; 34
    00000128 A2                     356 	.db #0xa2	; 162
    00000129 62                     357 	.db #0x62	; 98	'b'
    0000012A E2                     358 	.db #0xe2	; 226
    0000012B 12                     359 	.db #0x12	; 18
    0000012C 92                     360 	.db #0x92	; 146
    0000012D 52                     361 	.db #0x52	; 82	'R'
    0000012E D2                     362 	.db #0xd2	; 210
    0000012F 32                     363 	.db #0x32	; 50	'2'
    00000130 B2                     364 	.db #0xb2	; 178
    00000131 72                     365 	.db #0x72	; 114	'r'
    00000132 F2                     366 	.db #0xf2	; 242
    00000133 0A                     367 	.db #0x0a	; 10
    00000134 8A                     368 	.db #0x8a	; 138
    00000135 4A                     369 	.db #0x4a	; 74	'J'
    00000136 CA                     370 	.db #0xca	; 202
    00000137 2A                     371 	.db #0x2a	; 42
    00000138 AA                     372 	.db #0xaa	; 170
    00000139 6A                     373 	.db #0x6a	; 106	'j'
    0000013A EA                     374 	.db #0xea	; 234
    0000013B 1A                     375 	.db #0x1a	; 26
    0000013C 9A                     376 	.db #0x9a	; 154
    0000013D 5A                     377 	.db #0x5a	; 90	'Z'
    0000013E DA                     378 	.db #0xda	; 218
    0000013F 3A                     379 	.db #0x3a	; 58
    00000140 BA                     380 	.db #0xba	; 186
    00000141 7A                     381 	.db #0x7a	; 122	'z'
    00000142 FA                     382 	.db #0xfa	; 250
    00000143 06                     383 	.db #0x06	; 6
    00000144 86                     384 	.db #0x86	; 134
    00000145 46                     385 	.db #0x46	; 70	'F'
    00000146 C6                     386 	.db #0xc6	; 198
    00000147 26                     387 	.db #0x26	; 38
    00000148 A6                     388 	.db #0xa6	; 166
    00000149 66                     389 	.db #0x66	; 102	'f'
    0000014A E6                     390 	.db #0xe6	; 230
    0000014B 16                     391 	.db #0x16	; 22
    0000014C 96                     392 	.db #0x96	; 150
    0000014D 56                     393 	.db #0x56	; 86	'V'
    0000014E D6                     394 	.db #0xd6	; 214
    0000014F 36                     395 	.db #0x36	; 54	'6'
    00000150 B6                     396 	.db #0xb6	; 182
    00000151 76                     397 	.db #0x76	; 118	'v'
    00000152 F6                     398 	.db #0xf6	; 246
    00000153 0E                     399 	.db #0x0e	; 14
    00000154 8E                     400 	.db #0x8e	; 142
    00000155 4E                     401 	.db #0x4e	; 78	'N'
    00000156 CE                     402 	.db #0xce	; 206
    00000157 2E                     403 	.db #0x2e	; 46
    00000158 AE                     404 	.db #0xae	; 174
    00000159 6E                     405 	.db #0x6e	; 110	'n'
    0000015A EE                     406 	.db #0xee	; 238
    0000015B 1E                     407 	.db #0x1e	; 30
    0000015C 9E                     408 	.db #0x9e	; 158
    0000015D 5E                     409 	.db #0x5e	; 94
    0000015E DE                     410 	.db #0xde	; 222
    0000015F 3E                     411 	.db #0x3e	; 62
    00000160 BE                     412 	.db #0xbe	; 190
    00000161 7E                     413 	.db #0x7e	; 126
    00000162 FE                     414 	.db #0xfe	; 254
    00000163 01                     415 	.db #0x01	; 1
    00000164 81                     416 	.db #0x81	; 129
    00000165 41                     417 	.db #0x41	; 65	'A'
    00000166 C1                     418 	.db #0xc1	; 193
    00000167 21                     419 	.db #0x21	; 33
    00000168 A1                     420 	.db #0xa1	; 161
    00000169 61                     421 	.db #0x61	; 97	'a'
    0000016A E1                     422 	.db #0xe1	; 225
    0000016B 11                     423 	.db #0x11	; 17
    0000016C 91                     424 	.db #0x91	; 145
    0000016D 51                     425 	.db #0x51	; 81	'Q'
    0000016E D1                     426 	.db #0xd1	; 209
    0000016F 31                     427 	.db #0x31	; 49	'1'
    00000170 B1                     428 	.db #0xb1	; 177
    00000171 71                     429 	.db #0x71	; 113	'q'
    00000172 F1                     430 	.db #0xf1	; 241
    00000173 09                     431 	.db #0x09	; 9
    00000174 89                     432 	.db #0x89	; 137
    00000175 49                     433 	.db #0x49	; 73	'I'
    00000176 C9                     434 	.db #0xc9	; 201
    00000177 29                     435 	.db #0x29	; 41
    00000178 A9                     436 	.db #0xa9	; 169
    00000179 69                     437 	.db #0x69	; 105	'i'
    0000017A E9                     438 	.db #0xe9	; 233
    0000017B 19                     439 	.db #0x19	; 25
    0000017C 99                     440 	.db #0x99	; 153
    0000017D 59                     441 	.db #0x59	; 89	'Y'
    0000017E D9                     442 	.db #0xd9	; 217
    0000017F 39                     443 	.db #0x39	; 57	'9'
    00000180 B9                     444 	.db #0xb9	; 185
    00000181 79                     445 	.db #0x79	; 121	'y'
    00000182 F9                     446 	.db #0xf9	; 249
    00000183 05                     447 	.db #0x05	; 5
    00000184 85                     448 	.db #0x85	; 133
    00000185 45                     449 	.db #0x45	; 69	'E'
    00000186 C5                     450 	.db #0xc5	; 197
    00000187 25                     451 	.db #0x25	; 37
    00000188 A5                     452 	.db #0xa5	; 165
    00000189 65                     453 	.db #0x65	; 101	'e'
    0000018A E5                     454 	.db #0xe5	; 229
    0000018B 15                     455 	.db #0x15	; 21
    0000018C 95                     456 	.db #0x95	; 149
    0000018D 55                     457 	.db #0x55	; 85	'U'
    0000018E D5                     458 	.db #0xd5	; 213
    0000018F 35                     459 	.db #0x35	; 53	'5'
    00000190 B5                     460 	.db #0xb5	; 181
    00000191 75                     461 	.db #0x75	; 117	'u'
    00000192 F5                     462 	.db #0xf5	; 245
    00000193 0D                     463 	.db #0x0d	; 13
    00000194 8D                     464 	.db #0x8d	; 141
    00000195 4D                     465 	.db #0x4d	; 77	'M'
    00000196 CD                     466 	.db #0xcd	; 205
    00000197 2D                     467 	.db #0x2d	; 45
    00000198 AD                     468 	.db #0xad	; 173
    00000199 6D                     469 	.db #0x6d	; 109	'm'
    0000019A ED                     470 	.db #0xed	; 237
    0000019B 1D                     471 	.db #0x1d	; 29
    0000019C 9D                     472 	.db #0x9d	; 157
    0000019D 5D                     473 	.db #0x5d	; 93
    0000019E DD                     474 	.db #0xdd	; 221
    0000019F 3D                     475 	.db #0x3d	; 61
    000001A0 BD                     476 	.db #0xbd	; 189
    000001A1 7D                     477 	.db #0x7d	; 125
    000001A2 FD                     478 	.db #0xfd	; 253
    000001A3 03                     479 	.db #0x03	; 3
    000001A4 83                     480 	.db #0x83	; 131
    000001A5 43                     481 	.db #0x43	; 67	'C'
    000001A6 C3                     482 	.db #0xc3	; 195
    000001A7 23                     483 	.db #0x23	; 35
    000001A8 A3                     484 	.db #0xa3	; 163
    000001A9 63                     485 	.db #0x63	; 99	'c'
    000001AA E3                     486 	.db #0xe3	; 227
    000001AB 13                     487 	.db #0x13	; 19
    000001AC 93                     488 	.db #0x93	; 147
    000001AD 53                     489 	.db #0x53	; 83	'S'
    000001AE D3                     490 	.db #0xd3	; 211
    000001AF 33                     491 	.db #0x33	; 51	'3'
    000001B0 B3                     492 	.db #0xb3	; 179
    000001B1 73                     493 	.db #0x73	; 115	's'
    000001B2 F3                     494 	.db #0xf3	; 243
    000001B3 0B                     495 	.db #0x0b	; 11
    000001B4 8B                     496 	.db #0x8b	; 139
    000001B5 4B                     497 	.db #0x4b	; 75	'K'
    000001B6 CB                     498 	.db #0xcb	; 203
    000001B7 2B                     499 	.db #0x2b	; 43
    000001B8 AB                     500 	.db #0xab	; 171
    000001B9 6B                     501 	.db #0x6b	; 107	'k'
    000001BA EB                     502 	.db #0xeb	; 235
    000001BB 1B                     503 	.db #0x1b	; 27
    000001BC 9B                     504 	.db #0x9b	; 155
    000001BD 5B                     505 	.db #0x5b	; 91
    000001BE DB                     506 	.db #0xdb	; 219
    000001BF 3B                     507 	.db #0x3b	; 59
    000001C0 BB                     508 	.db #0xbb	; 187
    000001C1 7B                     509 	.db #0x7b	; 123
    000001C2 FB                     510 	.db #0xfb	; 251
    000001C3 07                     511 	.db #0x07	; 7
    000001C4 87                     512 	.db #0x87	; 135
    000001C5 47                     513 	.db #0x47	; 71	'G'
    000001C6 C7                     514 	.db #0xc7	; 199
    000001C7 27                     515 	.db #0x27	; 39
    000001C8 A7                     516 	.db #0xa7	; 167
    000001C9 67                     517 	.db #0x67	; 103	'g'
    000001CA E7                     518 	.db #0xe7	; 231
    000001CB 17                     519 	.db #0x17	; 23
    000001CC 97                     520 	.db #0x97	; 151
    000001CD 57                     521 	.db #0x57	; 87	'W'
    000001CE D7                     522 	.db #0xd7	; 215
    000001CF 37                     523 	.db #0x37	; 55	'7'
    000001D0 B7                     524 	.db #0xb7	; 183
    000001D1 77                     525 	.db #0x77	; 119	'w'
    000001D2 F7                     526 	.db #0xf7	; 247
    000001D3 0F                     527 	.db #0x0f	; 15
    000001D4 8F                     528 	.db #0x8f	; 143
    000001D5 4F                     529 	.db #0x4f	; 79	'O'
    000001D6 CF                     530 	.db #0xcf	; 207
    000001D7 2F                     531 	.db #0x2f	; 47
    000001D8 AF                     532 	.db #0xaf	; 175
    000001D9 6F                     533 	.db #0x6f	; 111	'o'
    000001DA EF                     534 	.db #0xef	; 239
    000001DB 1F                     535 	.db #0x1f	; 31
    000001DC 9F                     536 	.db #0x9f	; 159
    000001DD 5F                     537 	.db #0x5f	; 95
    000001DE DF                     538 	.db #0xdf	; 223
    000001DF 3F                     539 	.db #0x3f	; 63
    000001E0 BF                     540 	.db #0xbf	; 191
    000001E1 7F                     541 	.db #0x7f	; 127
    000001E2 FF                     542 	.db #0xff	; 255
                                    543 ;src/metasprites.c:106: uint8_t get_tile_offset(uint8_t flipx, uint8_t flipy)
                                    544 ;	---------------------------------
                                    545 ; Function get_tile_offset
                                    546 ; ---------------------------------
    000001E3                        547 _get_tile_offset::
                                    548 ;src/metasprites.c:117: return offset;
    000001E3 AF               [ 4]  549 	xor	a, a
                                    550 ;src/metasprites.c:118: }
    000001E4 C9               [16]  551 	ret
                                    552 ;src/metasprites.c:123: void load_and_duplicate_sprite_tile_data(void)
                                    553 ;	---------------------------------
                                    554 ; Function load_and_duplicate_sprite_tile_data
                                    555 ; ---------------------------------
    000001E5                        556 _load_and_duplicate_sprite_tile_data::
                                    557 ;src/metasprites.c:126: num_tiles = sizeof(sprite_tiles) >> 4;
    000001E5 21r1Br00         [12]  558 	ld	hl, #_num_tiles
    000001E8 3E 30            [ 8]  559 	ld	a, #0x30
    000001EA 22               [ 8]  560 	ld	(hl+), a
    000001EB AF               [ 4]  561 	xor	a, a
    000001EC 77               [ 8]  562 	ld	(hl), a
                                    563 ;src/metasprites.c:127: for(i = 0; i < num_tiles; i++)
    000001ED 01 00 00         [12]  564 	ld	bc, #0x0000
    000001F0                        565 00103$:
    000001F0 21r1Br00         [12]  566 	ld	hl, #_num_tiles
    000001F3 79               [ 4]  567 	ld	a, c
    000001F4 96               [ 8]  568 	sub	a, (hl)
    000001F5 23               [ 8]  569 	inc	hl
    000001F6 78               [ 4]  570 	ld	a, b
    000001F7 9E               [ 8]  571 	sbc	a, (hl)
    000001F8 D0               [20]  572 	ret	NC
                                    573 ;src/metasprites.c:129: set_tile(i + get_tile_offset(0, 0), sprite_tiles + (i << 4), 0, 0);
    000001F9 69               [ 4]  574 	ld	l, c
    000001FA 60               [ 4]  575 	ld	h, b
    000001FB 29               [ 8]  576 	add	hl, hl
    000001FC 29               [ 8]  577 	add	hl, hl
    000001FD 29               [ 8]  578 	add	hl, hl
    000001FE 29               [ 8]  579 	add	hl, hl
    000001FF 11r00r00         [12]  580 	ld	de, #_sprite_tiles
    00000202 19               [ 8]  581 	add	hl, de
    00000203 5D               [ 4]  582 	ld	e, l
    00000204 54               [ 4]  583 	ld	d, h
    00000205 69               [ 4]  584 	ld	l, c
                                    585 ;	spillPairReg hl
                                    586 ;	spillPairReg hl
    00000206 E5               [16]  587 	push	hl
    00000207 C5               [16]  588 	push	bc
    00000208 D5               [16]  589 	push	de
    00000209 AF               [ 4]  590 	xor	a, a
    0000020A 5F               [ 4]  591 	ld	e, a
    0000020B CDrE3r01         [24]  592 	call	_get_tile_offset
    0000020E D1               [12]  593 	pop	de
    0000020F C1               [12]  594 	pop	bc
    00000210 E1               [12]  595 	pop	hl
    00000211 85               [ 4]  596 	add	a, l
    00000212 6F               [ 4]  597 	ld	l, a
                                    598 ;	spillPairReg hl
                                    599 ;	spillPairReg hl
    00000213 C5               [16]  600 	push	bc
    00000214 AF               [ 4]  601 	xor	a, a
    00000215 0F               [ 4]  602 	rrca
    00000216 F5               [16]  603 	push	af
    00000217 7D               [ 4]  604 	ld	a, l
    00000218 CDr00r00         [24]  605 	call	_set_tile
    0000021B C1               [12]  606 	pop	bc
                                    607 ;src/metasprites.c:127: for(i = 0; i < num_tiles; i++)
    0000021C 03               [ 8]  608 	inc	bc
                                    609 ;src/metasprites.c:140: }
    0000021D 18 D1            [12]  610 	jr	00103$
                                    611 ;src/metasprites.c:160: void main(void) {
                                    612 ;	---------------------------------
                                    613 ; Function main
                                    614 ; ---------------------------------
    0000021F                        615 _main::
    0000021F E8 FA            [16]  616 	add	sp, #-6
                                    617 ;src/metasprites.c:161: DISPLAY_OFF;
    00000221 CDr00r00         [24]  618 	call	_display_off
                                    619 ;src/metasprites.c:177: fill_bkg_rect(0, 0, DEVICE_SCREEN_WIDTH, DEVICE_SCREEN_HEIGHT, 0);
    00000224 AF               [ 4]  620 	xor	a, a
    00000225 67               [ 4]  621 	ld	h, a
    00000226 2E 12            [ 8]  622 	ld	l, #0x12
    00000228 E5               [16]  623 	push	hl
    00000229 3E 14            [ 8]  624 	ld	a, #0x14
    0000022B F5               [16]  625 	push	af
    0000022C 33               [ 8]  626 	inc	sp
    0000022D AF               [ 4]  627 	xor	a, a
    0000022E 0F               [ 4]  628 	rrca
    0000022F F5               [16]  629 	push	af
    00000230 CDr00r00         [24]  630 	call	_fill_bkg_rect
    00000233 E8 05            [16]  631 	add	sp, #5
                                    632 ;src/metasprites.c:180: set_bkg_data(0, 1, pattern);
    00000235 11rD3r00         [12]  633 	ld	de, #_pattern
    00000238 D5               [16]  634 	push	de
    00000239 AF               [ 4]  635 	xor	a, a
    0000023A 3C               [ 4]  636 	inc	a
    0000023B F5               [16]  637 	push	af
    0000023C CDr00r00         [24]  638 	call	_set_bkg_data
    0000023F E8 04            [16]  639 	add	sp, #4
                                    640 ;src/metasprites.c:183: load_and_duplicate_sprite_tile_data();
    00000241 CDrE5r01         [24]  641 	call	_load_and_duplicate_sprite_tile_data
                                    642 ;src/metasprites.c:186: SHOW_BKG; SHOW_SPRITES;
    00000244 F0r00            [12]  643 	ldh	a, (_LCDC_REG + 0)
    00000246 F6 40            [ 8]  644 	or	a, #0x40
    00000248 E0r00            [12]  645 	ldh	(_LCDC_REG + 0), a
    0000024A F0r00            [12]  646 	ldh	a, (_LCDC_REG + 0)
    0000024C F6 01            [ 8]  647 	or	a, #0x01
    0000024E E0r00            [12]  648 	ldh	(_LCDC_REG + 0), a
                                    649 ;src/metasprites.c:192: SPRITES_8x8;
    00000250 F0r00            [12]  650 	ldh	a, (_LCDC_REG + 0)
    00000252 E6 FD            [ 8]  651 	and	a, #0xfd
    00000254 E0r00            [12]  652 	ldh	(_LCDC_REG + 0), a
                                    653 ;src/metasprites.c:194: DISPLAY_ON;
    00000256 F0r00            [12]  654 	ldh	a, (_LCDC_REG + 0)
    00000258 F6 80            [ 8]  655 	or	a, #0x80
    0000025A E0r00            [12]  656 	ldh	(_LCDC_REG + 0), a
                                    657 ;src/metasprites.c:197: PosX = (DEVICE_SCREEN_PX_WIDTH / 2) << 4;
    0000025C 21r00r00         [12]  658 	ld	hl, #_PosX
    0000025F AF               [ 4]  659 	xor	a, a
    00000260 22               [ 8]  660 	ld	(hl+), a
    00000261 36 05            [12]  661 	ld	(hl), #0x05
                                    662 ;src/metasprites.c:198: PosY = (DEVICE_SCREEN_PX_HEIGHT / 2) << 4;
    00000263 21r02r00         [12]  663 	ld	hl, #_PosY
    00000266 3E 80            [ 8]  664 	ld	a, #0x80
    00000268 22               [ 8]  665 	ld	(hl+), a
    00000269 36 04            [12]  666 	ld	(hl), #0x04
                                    667 ;src/metasprites.c:199: SpdX = SpdY = 0;
    0000026B AF               [ 4]  668 	xor	a, a
    0000026C 21r06r00         [12]  669 	ld	hl, #_SpdY
    0000026F 22               [ 8]  670 	ld	(hl+), a
    00000270 77               [ 8]  671 	ld	(hl), a
    00000271 AF               [ 4]  672 	xor	a, a
    00000272 21r04r00         [12]  673 	ld	hl, #_SpdX
    00000275 22               [ 8]  674 	ld	(hl+), a
    00000276 77               [ 8]  675 	ld	(hl), a
                                    676 ;src/metasprites.c:201: idx = 0; rot = 0;
    00000277 21r09r00         [12]  677 	ld	hl, #_idx
    0000027A 36 00            [12]  678 	ld	(hl), #0x00
    0000027C 21r0Ar00         [12]  679 	ld	hl, #_rot
    0000027F 36 00            [12]  680 	ld	(hl), #0x00
                                    681 ;src/metasprites.c:203: while(TRUE) {        
    00000281                        682 00145$:
                                    683 ;src/metasprites.c:205: KEY_INPUT;
    00000281 FAr00r00         [16]  684 	ld	a, (#_joyp)
    00000284 EAr01r00         [16]  685 	ld	(#_old_joyp),a
    00000287 CDr00r00         [24]  686 	call	_joypad
    0000028A EAr00r00         [16]  687 	ld	(#_joyp),a
                                    688 ;src/metasprites.c:207: PosF = 0;
    0000028D 21r08r00         [12]  689 	ld	hl, #_PosF
    00000290 36 00            [12]  690 	ld	(hl), #0x00
                                    691 ;src/metasprites.c:209: if (KEY_DOWN(J_UP)) {
    00000292 FAr00r00         [16]  692 	ld	a, (#_joyp)
    00000295 F8 04            [12]  693 	ldhl	sp,	#4
    00000297 77               [ 8]  694 	ld	(hl), a
                                    695 ;src/metasprites.c:210: SpdY -= 2;
    00000298 21r06r00         [12]  696 	ld	hl, #_SpdY
    0000029B 2A               [ 8]  697 	ld	a, (hl+)
    0000029C 4F               [ 4]  698 	ld	c, a
    0000029D 46               [ 8]  699 	ld	b, (hl)
                                    700 ;src/metasprites.c:212: PosF |= ACC_Y;
    0000029E FAr08r00         [16]  701 	ld	a, (#_PosF)
    000002A1 F6 02            [ 8]  702 	or	a, #0x02
    000002A3 F8 05            [12]  703 	ldhl	sp,	#5
    000002A5 77               [ 8]  704 	ld	(hl), a
                                    705 ;src/metasprites.c:209: if (KEY_DOWN(J_UP)) {
    000002A6 E5               [16]  706 	push	hl
    000002A7 2B               [ 8]  707 	dec	hl
    000002A8 CB 56            [12]  708 	bit	2, (hl)
    000002AA E1               [12]  709 	pop	hl
    000002AB 28 34            [12]  710 	jr	Z, 00108$
                                    711 ;src/metasprites.c:210: SpdY -= 2;
    000002AD 0B               [ 8]  712 	dec	bc
    000002AE 0B               [ 8]  713 	dec	bc
    000002AF 21r06r00         [12]  714 	ld	hl, #_SpdY
    000002B2 79               [ 4]  715 	ld	a, c
    000002B3 22               [ 8]  716 	ld	(hl+), a
                                    717 ;src/metasprites.c:211: if (SpdY < -32) SpdY = -32;
    000002B4 78               [ 4]  718 	ld	a, b
    000002B5 32               [ 8]  719 	ld	(hl-), a
    000002B6 2A               [ 8]  720 	ld	a, (hl+)
    000002B7 D6 E0            [ 8]  721 	sub	a, #0xe0
    000002B9 7E               [ 8]  722 	ld	a, (hl)
    000002BA DE FF            [ 8]  723 	sbc	a, #0xff
    000002BC 56               [ 8]  724 	ld	d, (hl)
    000002BD 3E FF            [ 8]  725 	ld	a, #0xff
    000002BF CB 7F            [ 8]  726 	bit	7,a
    000002C1 28 07            [12]  727 	jr	Z, 00319$
    000002C3 CB 7A            [ 8]  728 	bit	7, d
    000002C5 20 08            [12]  729 	jr	NZ, 00320$
    000002C7 BF               [ 4]  730 	cp	a, a
    000002C8 18 05            [12]  731 	jr	00320$
    000002CA                        732 00319$:
    000002CA CB 7A            [ 8]  733 	bit	7, d
    000002CC 28 01            [12]  734 	jr	Z, 00320$
    000002CE 37               [ 4]  735 	scf
    000002CF                        736 00320$:
    000002CF 30 08            [12]  737 	jr	NC, 00102$
    000002D1 21r06r00         [12]  738 	ld	hl, #_SpdY
    000002D4 3E E0            [ 8]  739 	ld	a, #0xe0
    000002D6 22               [ 8]  740 	ld	(hl+), a
    000002D7 36 FF            [12]  741 	ld	(hl), #0xff
    000002D9                        742 00102$:
                                    743 ;src/metasprites.c:212: PosF |= ACC_Y;
    000002D9 F8 05            [12]  744 	ldhl	sp,	#5
    000002DB 7E               [ 8]  745 	ld	a, (hl)
    000002DC EAr08r00         [16]  746 	ld	(#_PosF),a
    000002DF 18 3D            [12]  747 	jr	00109$
    000002E1                        748 00108$:
                                    749 ;src/metasprites.c:213: } else if (KEY_DOWN(J_DOWN)) {
    000002E1 E5               [16]  750 	push	hl
    000002E2 F8 06            [12]  751 	ldhl	sp,	#6
    000002E4 CB 5E            [12]  752 	bit	3, (hl)
    000002E6 E1               [12]  753 	pop	hl
    000002E7 28 35            [12]  754 	jr	Z, 00109$
                                    755 ;src/metasprites.c:214: SpdY += 2;
    000002E9 03               [ 8]  756 	inc	bc
    000002EA 03               [ 8]  757 	inc	bc
    000002EB 21r06r00         [12]  758 	ld	hl, #_SpdY
    000002EE 79               [ 4]  759 	ld	a, c
    000002EF 22               [ 8]  760 	ld	(hl+), a
                                    761 ;src/metasprites.c:215: if (SpdY > 32) SpdY = 32;
    000002F0 78               [ 4]  762 	ld	a, b
    000002F1 32               [ 8]  763 	ld	(hl-), a
    000002F2 2A               [ 8]  764 	ld	a, (hl+)
    000002F3 4F               [ 4]  765 	ld	c, a
    000002F4 46               [ 8]  766 	ld	b, (hl)
    000002F5 58               [ 4]  767 	ld	e, b
    000002F6 16 00            [ 8]  768 	ld	d, #0x00
    000002F8 3E 20            [ 8]  769 	ld	a, #0x20
    000002FA B9               [ 4]  770 	cp	a, c
    000002FB 3E 00            [ 8]  771 	ld	a, #0x00
    000002FD 98               [ 4]  772 	sbc	a, b
    000002FE CB 7B            [ 8]  773 	bit	7, e
    00000300 28 07            [12]  774 	jr	Z, 00322$
    00000302 CB 7A            [ 8]  775 	bit	7, d
    00000304 20 08            [12]  776 	jr	NZ, 00323$
    00000306 BF               [ 4]  777 	cp	a, a
    00000307 18 05            [12]  778 	jr	00323$
    00000309                        779 00322$:
    00000309 CB 7A            [ 8]  780 	bit	7, d
    0000030B 28 01            [12]  781 	jr	Z, 00323$
    0000030D 37               [ 4]  782 	scf
    0000030E                        783 00323$:
    0000030E 30 08            [12]  784 	jr	NC, 00104$
    00000310 21r06r00         [12]  785 	ld	hl, #_SpdY
    00000313 3E 20            [ 8]  786 	ld	a, #0x20
    00000315 22               [ 8]  787 	ld	(hl+), a
    00000316 AF               [ 4]  788 	xor	a, a
    00000317 77               [ 8]  789 	ld	(hl), a
    00000318                        790 00104$:
                                    791 ;src/metasprites.c:216: PosF |= ACC_Y;
    00000318 F8 05            [12]  792 	ldhl	sp,	#5
    0000031A 7E               [ 8]  793 	ld	a, (hl)
    0000031B EAr08r00         [16]  794 	ld	(#_PosF),a
    0000031E                        795 00109$:
                                    796 ;src/metasprites.c:220: SpdX -= 2;
    0000031E 21r04r00         [12]  797 	ld	hl, #_SpdX
    00000321 2A               [ 8]  798 	ld	a, (hl+)
    00000322 5F               [ 4]  799 	ld	e, a
    00000323 56               [ 8]  800 	ld	d, (hl)
                                    801 ;src/metasprites.c:222: PosF |= ACC_X;
    00000324 FAr08r00         [16]  802 	ld	a, (#_PosF)
    00000327 F6 01            [ 8]  803 	or	a, #0x01
    00000329 F8 05            [12]  804 	ldhl	sp,	#5
    0000032B 77               [ 8]  805 	ld	(hl), a
                                    806 ;src/metasprites.c:219: if (KEY_DOWN(J_LEFT)) {
    0000032C E5               [16]  807 	push	hl
    0000032D 2B               [ 8]  808 	dec	hl
    0000032E CB 4E            [12]  809 	bit	1, (hl)
    00000330 E1               [12]  810 	pop	hl
    00000331 28 34            [12]  811 	jr	Z, 00117$
                                    812 ;src/metasprites.c:220: SpdX -= 2;
    00000333 1B               [ 8]  813 	dec	de
    00000334 1B               [ 8]  814 	dec	de
    00000335 21r04r00         [12]  815 	ld	hl, #_SpdX
    00000338 7B               [ 4]  816 	ld	a, e
    00000339 22               [ 8]  817 	ld	(hl+), a
                                    818 ;src/metasprites.c:221: if (SpdX < -32) SpdX = -32;
    0000033A 7A               [ 4]  819 	ld	a, d
    0000033B 32               [ 8]  820 	ld	(hl-), a
    0000033C 2A               [ 8]  821 	ld	a, (hl+)
    0000033D D6 E0            [ 8]  822 	sub	a, #0xe0
    0000033F 7E               [ 8]  823 	ld	a, (hl)
    00000340 DE FF            [ 8]  824 	sbc	a, #0xff
    00000342 56               [ 8]  825 	ld	d, (hl)
    00000343 3E FF            [ 8]  826 	ld	a, #0xff
    00000345 CB 7F            [ 8]  827 	bit	7,a
    00000347 28 07            [12]  828 	jr	Z, 00325$
    00000349 CB 7A            [ 8]  829 	bit	7, d
    0000034B 20 08            [12]  830 	jr	NZ, 00326$
    0000034D BF               [ 4]  831 	cp	a, a
    0000034E 18 05            [12]  832 	jr	00326$
    00000350                        833 00325$:
    00000350 CB 7A            [ 8]  834 	bit	7, d
    00000352 28 01            [12]  835 	jr	Z, 00326$
    00000354 37               [ 4]  836 	scf
    00000355                        837 00326$:
    00000355 30 08            [12]  838 	jr	NC, 00111$
    00000357 21r04r00         [12]  839 	ld	hl, #_SpdX
    0000035A 3E E0            [ 8]  840 	ld	a, #0xe0
    0000035C 22               [ 8]  841 	ld	(hl+), a
    0000035D 36 FF            [12]  842 	ld	(hl), #0xff
    0000035F                        843 00111$:
                                    844 ;src/metasprites.c:222: PosF |= ACC_X;
    0000035F F8 05            [12]  845 	ldhl	sp,	#5
    00000361 7E               [ 8]  846 	ld	a, (hl)
    00000362 EAr08r00         [16]  847 	ld	(#_PosF),a
    00000365 18 3D            [12]  848 	jr	00118$
    00000367                        849 00117$:
                                    850 ;src/metasprites.c:223: } else if (KEY_DOWN(J_RIGHT)) {
    00000367 E5               [16]  851 	push	hl
    00000368 F8 06            [12]  852 	ldhl	sp,	#6
    0000036A CB 46            [12]  853 	bit	0, (hl)
    0000036C E1               [12]  854 	pop	hl
    0000036D 28 35            [12]  855 	jr	Z, 00118$
                                    856 ;src/metasprites.c:224: SpdX += 2;
    0000036F 13               [ 8]  857 	inc	de
    00000370 13               [ 8]  858 	inc	de
    00000371 21r04r00         [12]  859 	ld	hl, #_SpdX
    00000374 7B               [ 4]  860 	ld	a, e
    00000375 22               [ 8]  861 	ld	(hl+), a
                                    862 ;src/metasprites.c:225: if (SpdX > 32) SpdX = 32;
    00000376 7A               [ 4]  863 	ld	a, d
    00000377 32               [ 8]  864 	ld	(hl-), a
    00000378 2A               [ 8]  865 	ld	a, (hl+)
    00000379 4F               [ 4]  866 	ld	c, a
    0000037A 46               [ 8]  867 	ld	b, (hl)
    0000037B 58               [ 4]  868 	ld	e, b
    0000037C 16 00            [ 8]  869 	ld	d, #0x00
    0000037E 3E 20            [ 8]  870 	ld	a, #0x20
    00000380 B9               [ 4]  871 	cp	a, c
    00000381 3E 00            [ 8]  872 	ld	a, #0x00
    00000383 98               [ 4]  873 	sbc	a, b
    00000384 CB 7B            [ 8]  874 	bit	7, e
    00000386 28 07            [12]  875 	jr	Z, 00328$
    00000388 CB 7A            [ 8]  876 	bit	7, d
    0000038A 20 08            [12]  877 	jr	NZ, 00329$
    0000038C BF               [ 4]  878 	cp	a, a
    0000038D 18 05            [12]  879 	jr	00329$
    0000038F                        880 00328$:
    0000038F CB 7A            [ 8]  881 	bit	7, d
    00000391 28 01            [12]  882 	jr	Z, 00329$
    00000393 37               [ 4]  883 	scf
    00000394                        884 00329$:
    00000394 30 08            [12]  885 	jr	NC, 00113$
    00000396 21r04r00         [12]  886 	ld	hl, #_SpdX
    00000399 3E 20            [ 8]  887 	ld	a, #0x20
    0000039B 22               [ 8]  888 	ld	(hl+), a
    0000039C AF               [ 4]  889 	xor	a, a
    0000039D 77               [ 8]  890 	ld	(hl), a
    0000039E                        891 00113$:
                                    892 ;src/metasprites.c:226: PosF |= ACC_X;
    0000039E F8 05            [12]  893 	ldhl	sp,	#5
    000003A0 7E               [ 8]  894 	ld	a, (hl)
    000003A1 EAr08r00         [16]  895 	ld	(#_PosF),a
    000003A4                        896 00118$:
                                    897 ;src/metasprites.c:230: if (KEY_PRESSED(J_B)) {
    000003A4 FAr00r00         [16]  898 	ld	a, (#_joyp)
    000003A7 21r01r00         [12]  899 	ld	hl, #_old_joyp
    000003AA AE               [ 8]  900 	xor	a, (hl)
    000003AB 21r00r00         [12]  901 	ld	hl, #_joyp
    000003AE A6               [ 8]  902 	and	a, (hl)
    000003AF 4F               [ 4]  903 	ld	c, a
    000003B0 CB 69            [ 8]  904 	bit	5, c
    000003B2 28 0B            [12]  905 	jr	Z, 00122$
                                    906 ;src/metasprites.c:231: idx++; if (idx >= (sizeof(sprite_metasprites) >> 1)) idx = 0;
    000003B4 21r09r00         [12]  907 	ld	hl, #_idx
    000003B7 34               [12]  908 	inc	(hl)
    000003B8 7E               [ 8]  909 	ld	a, (hl)
    000003B9 D6 05            [ 8]  910 	sub	a, #0x05
    000003BB 38 02            [12]  911 	jr	C, 00122$
    000003BD 36 00            [12]  912 	ld	(hl), #0x00
    000003BF                        913 00122$:
                                    914 ;src/metasprites.c:235: if (KEY_PRESSED(J_A)) {
    000003BF CB 61            [ 8]  915 	bit	4, c
    000003C1 28 08            [12]  916 	jr	Z, 00124$
                                    917 ;src/metasprites.c:236: rot++; rot &= 0xF;
    000003C3 21r0Ar00         [12]  918 	ld	hl, #_rot
    000003C6 34               [12]  919 	inc	(hl)
    000003C7 7E               [ 8]  920 	ld	a, (hl)
    000003C8 E6 0F            [ 8]  921 	and	a, #0x0f
    000003CA 77               [ 8]  922 	ld	(hl), a
    000003CB                        923 00124$:
                                    924 ;src/metasprites.c:239: PosX += SpdX, PosY += SpdY; 
    000003CB FAr00r00         [16]  925 	ld	a, (#_PosX)
    000003CE 21r04r00         [12]  926 	ld	hl, #_SpdX
    000003D1 86               [ 8]  927 	add	a, (hl)
    000003D2 21r00r00         [12]  928 	ld	hl, #_PosX
    000003D5 22               [ 8]  929 	ld	(hl+), a
    000003D6 7E               [ 8]  930 	ld	a, (hl)
    000003D7 21r05r00         [12]  931 	ld	hl, #_SpdX + 1
    000003DA 8E               [ 8]  932 	adc	a, (hl)
    000003DB EAr01r00         [16]  933 	ld	(#_PosX + 1),a
    000003DE FAr02r00         [16]  934 	ld	a, (#_PosY)
    000003E1 21r06r00         [12]  935 	ld	hl, #_SpdY
    000003E4 86               [ 8]  936 	add	a, (hl)
    000003E5 21r02r00         [12]  937 	ld	hl, #_PosY
    000003E8 22               [ 8]  938 	ld	(hl+), a
    000003E9 7E               [ 8]  939 	ld	a, (hl)
    000003EA 21r07r00         [12]  940 	ld	hl, #_SpdY + 1
    000003ED 8E               [ 8]  941 	adc	a, (hl)
    000003EE EAr03r00         [16]  942 	ld	(#_PosY + 1),a
                                    943 ;src/metasprites.c:250: uint8_t subpal = rot >> 2;
    000003F1 FAr0Ar00         [16]  944 	ld	a, (#_rot)
    000003F4 0F               [ 4]  945 	rrca
    000003F5 0F               [ 4]  946 	rrca
    000003F6 E6 3F            [ 8]  947 	and	a, #0x3f
    000003F8 F8 05            [12]  948 	ldhl	sp,	#5
    000003FA 77               [ 8]  949 	ld	(hl), a
                                    950 ;src/metasprites.c:251: switch (rot & 0x3) {
    000003FB FAr0Ar00         [16]  951 	ld	a, (#_rot)
    000003FE E6 03            [ 8]  952 	and	a, #0x03
    00000400 F8 02            [12]  953 	ldhl	sp,	#2
    00000402 77               [ 8]  954 	ld	(hl), a
                                    955 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000403 21r02r00         [12]  956 	ld	hl, #_PosY
    00000406 2A               [ 8]  957 	ld	a, (hl+)
    00000407 5F               [ 4]  958 	ld	e, a
    00000408 56               [ 8]  959 	ld	d, (hl)
    00000409 CB 2A            [ 8]  960 	sra	d
    0000040B CB 1B            [ 8]  961 	rr	e
    0000040D CB 2A            [ 8]  962 	sra	d
    0000040F CB 1B            [ 8]  963 	rr	e
    00000411 CB 2A            [ 8]  964 	sra	d
    00000413 CB 1B            [ 8]  965 	rr	e
    00000415 CB 2A            [ 8]  966 	sra	d
    00000417 CB 1B            [ 8]  967 	rr	e
                                    968 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    00000419 21r00r00         [12]  969 	ld	hl, #_PosX
    0000041C 2A               [ 8]  970 	ld	a, (hl+)
    0000041D 4F               [ 4]  971 	ld	c, a
    0000041E 46               [ 8]  972 	ld	b, (hl)
    0000041F CB 28            [ 8]  973 	sra	b
    00000421 CB 19            [ 8]  974 	rr	c
    00000423 CB 28            [ 8]  975 	sra	b
    00000425 CB 19            [ 8]  976 	rr	c
    00000427 CB 28            [ 8]  977 	sra	b
    00000429 CB 19            [ 8]  978 	rr	c
    0000042B CB 28            [ 8]  979 	sra	b
    0000042D CB 19            [ 8]  980 	rr	c
                                    981 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000042F 7B               [ 4]  982 	ld	a, e
                                    983 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                    984 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000430 C6 10            [ 8]  985 	add	a, #0x10
    00000432 F8 03            [12]  986 	ldhl	sp,	#3
                                    987 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    00000434 22               [ 8]  988 	ld	(hl+), a
    00000435 79               [ 4]  989 	ld	a, c
    00000436 C6 08            [ 8]  990 	add	a, #0x08
                                    991 ;src/metasprites.c:251: switch (rot & 0x3) {
    00000438 32               [ 8]  992 	ld	(hl-), a
    00000439 2B               [ 8]  993 	dec	hl
    0000043A 7E               [ 8]  994 	ld	a, (hl)
    0000043B 3D               [ 4]  995 	dec	a
    0000043C 28 12            [12]  996 	jr	Z, 00125$
    0000043E F8 02            [12]  997 	ldhl	sp,	#2
    00000440 7E               [ 8]  998 	ld	a, (hl)
    00000441 D6 02            [ 8]  999 	sub	a, #0x02
    00000443 28 4F            [12] 1000 	jr	Z, 00126$
    00000445 F8 02            [12] 1001 	ldhl	sp,	#2
    00000447 7E               [ 8] 1002 	ld	a, (hl)
    00000448 D6 03            [ 8] 1003 	sub	a, #0x03
    0000044A CArDDr04         [16] 1004 	jp	Z,00127$
    0000044D C3r16r05         [16] 1005 	jp	00128$
                                   1006 ;src/metasprites.c:252: case 1:
    00000450                       1007 00125$:
                                   1008 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1009 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1010 ;src/metasprites.c:254: TILE_NUM_START + get_tile_offset(0, 1),
    00000450 1E 01            [ 8] 1011 	ld	e, #0x01
    00000452 AF               [ 4] 1012 	xor	a, a
    00000453 CDrE3r01         [24] 1013 	call	_get_tile_offset
    00000456 4F               [ 4] 1014 	ld	c, a
                                   1015 ;src/metasprites.c:253: hiwater += move_metasprite_flipy( sprite_metasprites[idx],
    00000457 11r00r00         [12] 1016 	ld	de, #_sprite_metasprites+0
    0000045A 21r09r00         [12] 1017 	ld	hl, #_idx
    0000045D 6E               [ 8] 1018 	ld	l, (hl)
                                   1019 ;	spillPairReg hl
                                   1020 ;	spillPairReg hl
    0000045E 26 00            [ 8] 1021 	ld	h, #0x00
                                   1022 ;	spillPairReg hl
                                   1023 ;	spillPairReg hl
    00000460 29               [ 8] 1024 	add	hl, hl
    00000461 19               [ 8] 1025 	add	hl, de
    00000462 2A               [ 8] 1026 	ld	a, (hl+)
    00000463 46               [ 8] 1027 	ld	b, (hl)
                                   1028 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000464 F8 04            [12] 1029 	ldhl	sp,	#4
    00000466 5E               [ 8] 1030 	ld	e, (hl)
                                   1031 ;../../../include/gb/metasprites.h:241: __current_metasprite = metasprite;
    00000467 21r00r00         [12] 1032 	ld	hl, #___current_metasprite
    0000046A 22               [ 8] 1033 	ld	(hl+), a
    0000046B 70               [ 8] 1034 	ld	(hl), b
                                   1035 ;../../../include/gb/metasprites.h:242: __current_base_tile = base_tile;
    0000046C 21r00r00         [12] 1036 	ld	hl, #___current_base_tile
    0000046F 71               [ 8] 1037 	ld	(hl), c
                                   1038 ;../../../include/gb/metasprites.h:243: __current_base_prop = base_prop;
    00000470 F8 05            [12] 1039 	ldhl	sp,	#5
    00000472 7E               [ 8] 1040 	ld	a, (hl)
    00000473 EAr00r00         [16] 1041 	ld	(#___current_base_prop),a
                                   1042 ;../../../include/gb/metasprites.h:244: return __move_metasprite_flipy(base_sprite, ((y - ((LCDC_REG & LCDCF_OBJ16) ? 16u : 8u)) << 8) | x);
    00000476 F8 03            [12] 1043 	ldhl	sp,	#3
    00000478 6E               [ 8] 1044 	ld	l, (hl)
                                   1045 ;	spillPairReg hl
                                   1046 ;	spillPairReg hl
    00000479 F0r00            [12] 1047 	ldh	a, (_LCDC_REG + 0)
    0000047B CB 4F            [ 8] 1048 	bit	1, a
    0000047D 28 05            [12] 1049 	jr	Z, 00153$
    0000047F 01 10 00         [12] 1050 	ld	bc, #0x0010
    00000482 18 03            [12] 1051 	jr	00154$
    00000484                       1052 00153$:
    00000484 01 08 00         [12] 1053 	ld	bc, #0x0008
    00000487                       1054 00154$:
                                   1055 ;	spillPairReg hl
                                   1056 ;	spillPairReg hl
    00000487 7D               [ 4] 1057 	ld	a, l
    00000488 91               [ 4] 1058 	sub	a, c
    00000489 57               [ 4] 1059 	ld	d, a
    0000048A AF               [ 4] 1060 	xor	a, a
    0000048B CDr00r00         [24] 1061 	call	___move_metasprite_flipy
                                   1062 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000048E F8 05            [12] 1063 	ldhl	sp,	#5
    00000490 77               [ 8] 1064 	ld	(hl), a
                                   1065 ;src/metasprites.c:259: break;
    00000491 C3r72r05         [16] 1066 	jp	00129$
                                   1067 ;src/metasprites.c:260: case 2:
    00000494                       1068 00126$:
                                   1069 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1070 ;src/metasprites.c:265: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1071 ;src/metasprites.c:262: TILE_NUM_START + get_tile_offset(1, 1),
    00000494 3E 01            [ 8] 1072 	ld	a,#0x01
    00000496 5F               [ 4] 1073 	ld	e,a
    00000497 CDrE3r01         [24] 1074 	call	_get_tile_offset
    0000049A 4F               [ 4] 1075 	ld	c, a
                                   1076 ;src/metasprites.c:261: hiwater += move_metasprite_flipxy(sprite_metasprites[idx],
    0000049B 11r00r00         [12] 1077 	ld	de, #_sprite_metasprites+0
    0000049E 21r09r00         [12] 1078 	ld	hl, #_idx
    000004A1 6E               [ 8] 1079 	ld	l, (hl)
                                   1080 ;	spillPairReg hl
                                   1081 ;	spillPairReg hl
    000004A2 26 00            [ 8] 1082 	ld	h, #0x00
                                   1083 ;	spillPairReg hl
                                   1084 ;	spillPairReg hl
    000004A4 29               [ 8] 1085 	add	hl, hl
    000004A5 19               [ 8] 1086 	add	hl, de
    000004A6 2A               [ 8] 1087 	ld	a, (hl+)
    000004A7 46               [ 8] 1088 	ld	b, (hl)
                                   1089 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    000004A8 F8 04            [12] 1090 	ldhl	sp,	#4
    000004AA 5E               [ 8] 1091 	ld	e, (hl)
                                   1092 ;../../../include/gb/metasprites.h:281: __current_metasprite = metasprite;
    000004AB 21r00r00         [12] 1093 	ld	hl, #___current_metasprite
    000004AE 22               [ 8] 1094 	ld	(hl+), a
    000004AF 70               [ 8] 1095 	ld	(hl), b
                                   1096 ;../../../include/gb/metasprites.h:282: __current_base_tile = base_tile;
    000004B0 21r00r00         [12] 1097 	ld	hl, #___current_base_tile
    000004B3 71               [ 8] 1098 	ld	(hl), c
                                   1099 ;../../../include/gb/metasprites.h:283: __current_base_prop = base_prop;
    000004B4 F8 05            [12] 1100 	ldhl	sp,	#5
    000004B6 7E               [ 8] 1101 	ld	a, (hl)
    000004B7 EAr00r00         [16] 1102 	ld	(#___current_base_prop),a
                                   1103 ;../../../include/gb/metasprites.h:284: return __move_metasprite_flipxy(base_sprite, ((y - ((LCDC_REG & LCDCF_OBJ16) ? 16u : 8u)) << 8) | (uint8_t)(x - 8));
    000004BA F8 03            [12] 1104 	ldhl	sp,	#3
    000004BC 56               [ 8] 1105 	ld	d, (hl)
    000004BD F0r00            [12] 1106 	ldh	a, (_LCDC_REG + 0)
    000004BF CB 4F            [ 8] 1107 	bit	1, a
    000004C1 28 05            [12] 1108 	jr	Z, 00155$
    000004C3 01 10 00         [12] 1109 	ld	bc, #0x0010
    000004C6 18 03            [12] 1110 	jr	00156$
    000004C8                       1111 00155$:
    000004C8 01 08 00         [12] 1112 	ld	bc, #0x0008
    000004CB                       1113 00156$:
    000004CB 7A               [ 4] 1114 	ld	a, d
    000004CC 91               [ 4] 1115 	sub	a, c
    000004CD 47               [ 4] 1116 	ld	b, a
    000004CE 7B               [ 4] 1117 	ld	a, e
    000004CF C6 F8            [ 8] 1118 	add	a, #0xf8
    000004D1 5F               [ 4] 1119 	ld	e, a
    000004D2 50               [ 4] 1120 	ld	d, b
    000004D3 AF               [ 4] 1121 	xor	a, a
    000004D4 CDr00r00         [24] 1122 	call	___move_metasprite_flipxy
                                   1123 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    000004D7 F8 05            [12] 1124 	ldhl	sp,	#5
    000004D9 77               [ 8] 1125 	ld	(hl), a
                                   1126 ;src/metasprites.c:267: break;
    000004DA C3r72r05         [16] 1127 	jp	00129$
                                   1128 ;src/metasprites.c:268: case 3:
    000004DD                       1129 00127$:
                                   1130 ;src/metasprites.c:274: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1131 ;src/metasprites.c:273: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1132 ;src/metasprites.c:270: TILE_NUM_START + get_tile_offset(1, 0),
    000004DD 1E 00            [ 8] 1133 	ld	e, #0x00
    000004DF 3E 01            [ 8] 1134 	ld	a, #0x01
    000004E1 CDrE3r01         [24] 1135 	call	_get_tile_offset
    000004E4 4F               [ 4] 1136 	ld	c, a
                                   1137 ;src/metasprites.c:269: hiwater += move_metasprite_flipx( sprite_metasprites[idx],
    000004E5 21r09r00         [12] 1138 	ld	hl, #_idx
    000004E8 6E               [ 8] 1139 	ld	l, (hl)
                                   1140 ;	spillPairReg hl
                                   1141 ;	spillPairReg hl
    000004E9 AF               [ 4] 1142 	xor	a, a
    000004EA 67               [ 4] 1143 	ld	h, a
    000004EB 29               [ 8] 1144 	add	hl, hl
    000004EC 11r00r00         [12] 1145 	ld	de, #_sprite_metasprites
    000004EF 19               [ 8] 1146 	add	hl, de
    000004F0 2A               [ 8] 1147 	ld	a,	(hl+)
    000004F1 66               [ 8] 1148 	ld	h, (hl)
                                   1149 ;	spillPairReg hl
                                   1150 ;	spillPairReg hl
                                   1151 ;	spillPairReg hl
                                   1152 ;../../../include/gb/metasprites.h:200: __current_metasprite = metasprite;
    000004F2 5F               [ 4] 1153 	ld	e, a
    000004F3 54               [ 4] 1154 	ld	d, h
    000004F4 21r00r00         [12] 1155 	ld	hl, #___current_metasprite
    000004F7 7B               [ 4] 1156 	ld	a, e
    000004F8 22               [ 8] 1157 	ld	(hl+), a
    000004F9 72               [ 8] 1158 	ld	(hl), d
                                   1159 ;../../../include/gb/metasprites.h:201: __current_base_tile = base_tile;
    000004FA 21r00r00         [12] 1160 	ld	hl, #___current_base_tile
    000004FD 71               [ 8] 1161 	ld	(hl), c
                                   1162 ;../../../include/gb/metasprites.h:202: __current_base_prop = base_prop;
    000004FE F8 05            [12] 1163 	ldhl	sp,	#5
    00000500 7E               [ 8] 1164 	ld	a, (hl)
    00000501 EAr00r00         [16] 1165 	ld	(#___current_base_prop),a
                                   1166 ;../../../include/gb/metasprites.h:203: return __move_metasprite_flipx(base_sprite, (y << 8) | (uint8_t)(x - 8u));
    00000504 F8 03            [12] 1167 	ldhl	sp,	#3
    00000506 2A               [ 8] 1168 	ld	a, (hl+)
    00000507 47               [ 4] 1169 	ld	b, a
    00000508 7E               [ 8] 1170 	ld	a, (hl)
    00000509 C6 F8            [ 8] 1171 	add	a, #0xf8
    0000050B 5F               [ 4] 1172 	ld	e, a
    0000050C 50               [ 4] 1173 	ld	d, b
    0000050D AF               [ 4] 1174 	xor	a, a
    0000050E CDr00r00         [24] 1175 	call	___move_metasprite_flipx
    00000511 F8 05            [12] 1176 	ldhl	sp,	#5
    00000513 77               [ 8] 1177 	ld	(hl), a
                                   1178 ;src/metasprites.c:275: break;
    00000514 18 5C            [12] 1179 	jr	00129$
                                   1180 ;src/metasprites.c:276: default:
    00000516                       1181 00128$:
                                   1182 ;src/metasprites.c:282: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000516 F8 03            [12] 1183 	ldhl	sp,	#3
    00000518 7E               [ 8] 1184 	ld	a, (hl)
    00000519 F8 00            [12] 1185 	ldhl	sp,	#0
    0000051B 77               [ 8] 1186 	ld	(hl), a
                                   1187 ;src/metasprites.c:281: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    0000051C F8 04            [12] 1188 	ldhl	sp,	#4
    0000051E 7E               [ 8] 1189 	ld	a, (hl)
    0000051F F8 01            [12] 1190 	ldhl	sp,	#1
    00000521 77               [ 8] 1191 	ld	(hl), a
    00000522 F8 05            [12] 1192 	ldhl	sp,	#5
    00000524 7E               [ 8] 1193 	ld	a, (hl)
    00000525 F8 02            [12] 1194 	ldhl	sp,	#2
    00000527 77               [ 8] 1195 	ld	(hl), a
                                   1196 ;src/metasprites.c:278: TILE_NUM_START + get_tile_offset(0, 0),
    00000528 AF               [ 4] 1197 	xor	a, a
    00000529 5F               [ 4] 1198 	ld	e, a
    0000052A CDrE3r01         [24] 1199 	call	_get_tile_offset
    0000052D F8 03            [12] 1200 	ldhl	sp,	#3
    0000052F 77               [ 8] 1201 	ld	(hl), a
                                   1202 ;src/metasprites.c:277: hiwater += move_metasprite_ex(    sprite_metasprites[idx],
    00000530 21r09r00         [12] 1203 	ld	hl, #_idx
    00000533 6E               [ 8] 1204 	ld	l, (hl)
                                   1205 ;	spillPairReg hl
                                   1206 ;	spillPairReg hl
    00000534 AF               [ 4] 1207 	xor	a, a
    00000535 67               [ 4] 1208 	ld	h, a
    00000536 29               [ 8] 1209 	add	hl, hl
    00000537 11r00r00         [12] 1210 	ld	de, #_sprite_metasprites
    0000053A 19               [ 8] 1211 	add	hl, de
    0000053B 5D               [ 4] 1212 	ld	e, l
    0000053C 54               [ 4] 1213 	ld	d, h
    0000053D 1A               [ 8] 1214 	ld	a, (de)
    0000053E F8 04            [12] 1215 	ldhl	sp,	#4
    00000540 22               [ 8] 1216 	ld	(hl+), a
    00000541 13               [ 8] 1217 	inc	de
    00000542 1A               [ 8] 1218 	ld	a, (de)
    00000543 77               [ 8] 1219 	ld	(hl), a
                                   1220 ;../../../include/gb/metasprites.h:160: __current_metasprite = metasprite;
    00000544 F8 04            [12] 1221 	ldhl	sp,	#4
    00000546 7E               [ 8] 1222 	ld	a, (hl)
    00000547 EAr00r00         [16] 1223 	ld	(#___current_metasprite),a
    0000054A F8 05            [12] 1224 	ldhl	sp,	#5
    0000054C 7E               [ 8] 1225 	ld	a, (hl)
    0000054D EAr01r00         [16] 1226 	ld	(#___current_metasprite + 1),a
                                   1227 ;../../../include/gb/metasprites.h:161: __current_base_tile = base_tile;
    00000550 F8 03            [12] 1228 	ldhl	sp,	#3
    00000552 7E               [ 8] 1229 	ld	a, (hl)
    00000553 EAr00r00         [16] 1230 	ld	(#___current_base_tile),a
                                   1231 ;../../../include/gb/metasprites.h:162: __current_base_prop = base_prop;
    00000556 F8 02            [12] 1232 	ldhl	sp,	#2
    00000558 7E               [ 8] 1233 	ld	a, (hl)
    00000559 EAr00r00         [16] 1234 	ld	(#___current_base_prop),a
                                   1235 ;../../../include/gb/metasprites.h:163: return __move_metasprite(base_sprite, (y << 8) | (uint8_t)x);
    0000055C F8 00            [12] 1236 	ldhl	sp,	#0
    0000055E 4E               [ 8] 1237 	ld	c, (hl)
    0000055F F8 05            [12] 1238 	ldhl	sp,	#5
    00000561 79               [ 4] 1239 	ld	a, c
    00000562 32               [ 8] 1240 	ld	(hl-), a
    00000563 36 00            [12] 1241 	ld	(hl), #0x00
    00000565 F8 01            [12] 1242 	ldhl	sp,	#1
    00000567 5E               [ 8] 1243 	ld	e, (hl)
    00000568 F8 05            [12] 1244 	ldhl	sp,	#5
    0000056A 56               [ 8] 1245 	ld	d, (hl)
    0000056B AF               [ 4] 1246 	xor	a, a
    0000056C CDr00r00         [24] 1247 	call	___move_metasprite
    0000056F F8 05            [12] 1248 	ldhl	sp,	#5
    00000571 77               [ 8] 1249 	ld	(hl), a
                                   1250 ;src/metasprites.c:284: }
    00000572                       1251 00129$:
                                   1252 ;src/metasprites.c:287: hide_sprites_range(hiwater, MAX_HARDWARE_SPRITES);        
    00000572 1E 28            [ 8] 1253 	ld	e, #0x28
    00000574 F8 05            [12] 1254 	ldhl	sp,	#5
    00000576 7E               [ 8] 1255 	ld	a, (hl)
    00000577 CDr00r00         [24] 1256 	call	_hide_sprites_range
                                   1257 ;src/metasprites.c:290: if (!(PosF & ACC_Y)) {
    0000057A 21r08r00         [12] 1258 	ld	hl, #_PosF
    0000057D 4E               [ 8] 1259 	ld	c, (hl)
    0000057E CB 49            [ 8] 1260 	bit	1, c
    00000580 20 36            [12] 1261 	jr	NZ, 00136$
                                   1262 ;src/metasprites.c:291: if (SpdY != 0) {
    00000582 21r07r00         [12] 1263 	ld	hl, #_SpdY + 1
    00000585 3A               [ 8] 1264 	ld	a, (hl-)
    00000586 B6               [ 8] 1265 	or	a, (hl)
    00000587 28 2F            [12] 1266 	jr	Z, 00136$
                                   1267 ;src/metasprites.c:292: if (SpdY > 0) SpdY--;
    00000589 2A               [ 8] 1268 	ld	a, (hl+)
    0000058A 47               [ 4] 1269 	ld	b, a
    0000058B 6E               [ 8] 1270 	ld	l, (hl)
                                   1271 ;	spillPairReg hl
                                   1272 ;	spillPairReg hl
    0000058C 5D               [ 4] 1273 	ld	e, l
    0000058D AF               [ 4] 1274 	xor	a, a
    0000058E 57               [ 4] 1275 	ld	d, a
    0000058F B8               [ 4] 1276 	cp	a, b
    00000590 9D               [ 4] 1277 	sbc	a, l
    00000591 CB 7B            [ 8] 1278 	bit	7, e
    00000593 28 07            [12] 1279 	jr	Z, 00339$
    00000595 CB 7A            [ 8] 1280 	bit	7, d
    00000597 20 08            [12] 1281 	jr	NZ, 00340$
    00000599 BF               [ 4] 1282 	cp	a, a
    0000059A 18 05            [12] 1283 	jr	00340$
    0000059C                       1284 00339$:
    0000059C CB 7A            [ 8] 1285 	bit	7, d
    0000059E 28 01            [12] 1286 	jr	Z, 00340$
    000005A0 37               [ 4] 1287 	scf
    000005A1                       1288 00340$:
    000005A1 30 0D            [12] 1289 	jr	NC, 00131$
    000005A3 21r06r00         [12] 1290 	ld	hl, #_SpdY
    000005A6 2A               [ 8] 1291 	ld	a, (hl+)
    000005A7 5F               [ 4] 1292 	ld	e, a
    000005A8 3A               [ 8] 1293 	ld	a, (hl-)
    000005A9 57               [ 4] 1294 	ld	d, a
    000005AA 1B               [ 8] 1295 	dec	de
    000005AB 7B               [ 4] 1296 	ld	a, e
    000005AC 22               [ 8] 1297 	ld	(hl+), a
    000005AD 72               [ 8] 1298 	ld	(hl), d
    000005AE 18 08            [12] 1299 	jr	00136$
    000005B0                       1300 00131$:
                                   1301 ;src/metasprites.c:293: else SpdY ++;
    000005B0 21r06r00         [12] 1302 	ld	hl, #_SpdY
    000005B3 34               [12] 1303 	inc	(hl)
    000005B4 20 02            [12] 1304 	jr	NZ, 00341$
    000005B6 23               [ 8] 1305 	inc	hl
    000005B7 34               [12] 1306 	inc	(hl)
    000005B8                       1307 00341$:
    000005B8                       1308 00136$:
                                   1309 ;src/metasprites.c:298: if (!(PosF & ACC_X)) {
    000005B8 CB 41            [ 8] 1310 	bit	0, c
    000005BA 20 36            [12] 1311 	jr	NZ, 00143$
                                   1312 ;src/metasprites.c:299: if (SpdX != 0) {
    000005BC 21r05r00         [12] 1313 	ld	hl, #_SpdX + 1
    000005BF 3A               [ 8] 1314 	ld	a, (hl-)
    000005C0 B6               [ 8] 1315 	or	a, (hl)
    000005C1 28 2F            [12] 1316 	jr	Z, 00143$
                                   1317 ;src/metasprites.c:300: if (SpdX > 0) SpdX--;
    000005C3 2A               [ 8] 1318 	ld	a, (hl+)
    000005C4 4F               [ 4] 1319 	ld	c, a
    000005C5 46               [ 8] 1320 	ld	b, (hl)
    000005C6 58               [ 4] 1321 	ld	e, b
    000005C7 AF               [ 4] 1322 	xor	a, a
    000005C8 57               [ 4] 1323 	ld	d, a
    000005C9 B9               [ 4] 1324 	cp	a, c
    000005CA 98               [ 4] 1325 	sbc	a, b
    000005CB CB 7B            [ 8] 1326 	bit	7, e
    000005CD 28 07            [12] 1327 	jr	Z, 00344$
    000005CF CB 7A            [ 8] 1328 	bit	7, d
    000005D1 20 08            [12] 1329 	jr	NZ, 00345$
    000005D3 BF               [ 4] 1330 	cp	a, a
    000005D4 18 05            [12] 1331 	jr	00345$
    000005D6                       1332 00344$:
    000005D6 CB 7A            [ 8] 1333 	bit	7, d
    000005D8 28 01            [12] 1334 	jr	Z, 00345$
    000005DA 37               [ 4] 1335 	scf
    000005DB                       1336 00345$:
    000005DB 30 0D            [12] 1337 	jr	NC, 00138$
    000005DD 21r04r00         [12] 1338 	ld	hl, #_SpdX
    000005E0 2A               [ 8] 1339 	ld	a, (hl+)
    000005E1 5F               [ 4] 1340 	ld	e, a
    000005E2 3A               [ 8] 1341 	ld	a, (hl-)
    000005E3 57               [ 4] 1342 	ld	d, a
    000005E4 1B               [ 8] 1343 	dec	de
    000005E5 7B               [ 4] 1344 	ld	a, e
    000005E6 22               [ 8] 1345 	ld	(hl+), a
    000005E7 72               [ 8] 1346 	ld	(hl), d
    000005E8 18 08            [12] 1347 	jr	00143$
    000005EA                       1348 00138$:
                                   1349 ;src/metasprites.c:301: else SpdX ++;
    000005EA 21r04r00         [12] 1350 	ld	hl, #_SpdX
    000005ED 34               [12] 1351 	inc	(hl)
    000005EE 20 02            [12] 1352 	jr	NZ, 00346$
    000005F0 23               [ 8] 1353 	inc	hl
    000005F1 34               [12] 1354 	inc	(hl)
    000005F2                       1355 00346$:
    000005F2                       1356 00143$:
                                   1357 ;src/metasprites.c:307: vsync();
    000005F2 CDr00r00         [24] 1358 	call	_vsync
    000005F5 C3r81r02         [16] 1359 	jp	00145$
                                   1360 ;src/metasprites.c:309: }
    000005F8 E8 06            [16] 1361 	add	sp, #6
    000005FA C9               [16] 1362 	ret
    000005FB                       1363 _gray_pal:
    000005FB FF 7F                 1364 	.dw #0x7fff
    000005FD B5 56                 1365 	.dw #0x56b5
    000005FF 4A 29                 1366 	.dw #0x294a
    00000601 00 00                 1367 	.dw #0x0000
    00000603                       1368 _pink_pal:
    00000603 FF 7F                 1369 	.dw #0x7fff
    00000605 1F 7C                 1370 	.dw #0x7c1f
    00000607 15 54                 1371 	.dw #0x5415
    00000609 0A 28                 1372 	.dw #0x280a
    0000060B                       1373 _cyan_pal:
    0000060B FF 7F                 1374 	.dw #0x7fff
    0000060D EA 7F                 1375 	.dw #0x7fea
    0000060F A0 56                 1376 	.dw #0x56a0
    00000611 40 29                 1377 	.dw #0x2940
    00000613                       1378 _green_pal:
    00000613 FF 7F                 1379 	.dw #0x7fff
    00000615 F5 57                 1380 	.dw #0x57f5
    00000617 A0 02                 1381 	.dw #0x02a0
    00000619 40 01                 1382 	.dw #0x0140
                                   1383 	.area _CODE
                                   1384 	.area _INITIALIZER
    00000000                       1385 __xinit__joyp:
    00000000 00                    1386 	.db #0x00	; 0
    00000001                       1387 __xinit__old_joyp:
    00000001 00                    1388 	.db #0x00	; 0
                                   1389 	.area _CABS (ABS)
