                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.4.1 #14650 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module metasprites
                                      6 	.optsdcc -msm83
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _main
                                     12 	.globl _load_and_duplicate_sprite_tile_data
                                     13 	.globl _get_tile_offset
                                     14 	.globl _set_tile
                                     15 	.globl _hide_sprites_range
                                     16 	.globl _cgb_compatibility
                                     17 	.globl _set_sprite_palette
                                     18 	.globl _fill_bkg_rect
                                     19 	.globl _set_sprite_data
                                     20 	.globl _set_bkg_data
                                     21 	.globl _display_off
                                     22 	.globl _vsync
                                     23 	.globl _joypad
                                     24 	.globl _old_joyp
                                     25 	.globl _joyp
                                     26 	.globl _num_tiles
                                     27 	.globl _flipped_data
                                     28 	.globl _rot
                                     29 	.globl _idx
                                     30 	.globl _PosF
                                     31 	.globl _SpdY
                                     32 	.globl _SpdX
                                     33 	.globl _PosY
                                     34 	.globl _PosX
                                     35 	.globl _green_pal
                                     36 	.globl _cyan_pal
                                     37 	.globl _pink_pal
                                     38 	.globl _gray_pal
                                     39 	.globl _reverse_bits
                                     40 	.globl _pattern
                                     41 ;--------------------------------------------------------
                                     42 ; special function registers
                                     43 ;--------------------------------------------------------
                                     44 ;--------------------------------------------------------
                                     45 ; ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area _DATA
    00000000                         48 _PosX::
    00000000                         49 	.ds 2
    00000002                         50 _PosY::
    00000002                         51 	.ds 2
    00000004                         52 _SpdX::
    00000004                         53 	.ds 2
    00000006                         54 _SpdY::
    00000006                         55 	.ds 2
    00000008                         56 _PosF::
    00000008                         57 	.ds 1
    00000009                         58 _idx::
    00000009                         59 	.ds 1
    0000000A                         60 _rot::
    0000000A                         61 	.ds 1
    0000000B                         62 _flipped_data::
    0000000B                         63 	.ds 16
    0000001B                         64 _num_tiles::
    0000001B                         65 	.ds 2
                                     66 ;--------------------------------------------------------
                                     67 ; ram data
                                     68 ;--------------------------------------------------------
                                     69 	.area _INITIALIZED
    00000000                         70 _joyp::
    00000000                         71 	.ds 1
    00000001                         72 _old_joyp::
    00000001                         73 	.ds 1
                                     74 ;--------------------------------------------------------
                                     75 ; absolute external ram data
                                     76 ;--------------------------------------------------------
                                     77 	.area _DABS (ABS)
                                     78 ;--------------------------------------------------------
                                     79 ; global & static initialisations
                                     80 ;--------------------------------------------------------
                                     81 	.area _HOME
                                     82 	.area _GSINIT
                                     83 	.area _GSFINAL
                                     84 	.area _GSINIT
                                     85 ;--------------------------------------------------------
                                     86 ; Home
                                     87 ;--------------------------------------------------------
                                     88 	.area _HOME
                                     89 	.area _HOME
                                     90 ;--------------------------------------------------------
                                     91 ; code
                                     92 ;--------------------------------------------------------
                                     93 	.area _CODE
                                     94 ;src/metasprites.c:94: void set_tile(uint8_t tile_idx, uint8_t* data, uint8_t flip_x, uint8_t flip_y)
                                     95 ;	---------------------------------
                                     96 ; Function set_tile
                                     97 ; ---------------------------------
    00000000                         98 _set_tile::
    00000000 E8 F7            [16]   99 	add	sp, #-9
    00000002 F8 06            [12]  100 	ldhl	sp,	#6
    00000004 32               [ 8]  101 	ld	(hl-), a
    00000005 2B               [ 8]  102 	dec	hl
    00000006 7B               [ 4]  103 	ld	a, e
    00000007 22               [ 8]  104 	ld	(hl+), a
                                    105 ;src/metasprites.c:97: for(i = 0; i < TILE_HEIGHT; i++)
    00000008 7A               [ 4]  106 	ld	a, d
    00000009 22               [ 8]  107 	ld	(hl+), a
    0000000A 23               [ 8]  108 	inc	hl
    0000000B AF               [ 4]  109 	xor	a, a
    0000000C 22               [ 8]  110 	ld	(hl+), a
    0000000D 77               [ 8]  111 	ld	(hl), a
    0000000E                        112 00102$:
                                    113 ;src/metasprites.c:99: size_t y = flip_y ? (TILE_HEIGHT-1-i) : i; 
    0000000E F8 0C            [12]  114 	ldhl	sp,	#12
    00000010 7E               [ 8]  115 	ld	a, (hl)
    00000011 B7               [ 4]  116 	or	a, a
    00000012 28 13            [12]  117 	jr	Z, 00106$
    00000014 11 07 00         [12]  118 	ld	de, #0x0007
    00000017 F8 07            [12]  119 	ldhl	sp,	#7
    00000019 2A               [ 8]  120 	ld	a,	(hl+)
    0000001A 66               [ 8]  121 	ld	h, (hl)
    0000001B 6F               [ 4]  122 	ld	l, a
    0000001C 7B               [ 4]  123 	ld	a, e
    0000001D 95               [ 4]  124 	sub	a, l
    0000001E 5F               [ 4]  125 	ld	e, a
    0000001F 7A               [ 4]  126 	ld	a, d
    00000020 9C               [ 4]  127 	sbc	a, h
    00000021 F8 03            [12]  128 	ldhl	sp,	#3
    00000023 32               [ 8]  129 	ld	(hl-), a
    00000024 73               [ 8]  130 	ld	(hl), e
    00000025 18 08            [12]  131 	jr	00107$
    00000027                        132 00106$:
    00000027 F8 07            [12]  133 	ldhl	sp,	#7
    00000029 7E               [ 8]  134 	ld	a, (hl)
    0000002A F8 02            [12]  135 	ldhl	sp,	#2
    0000002C 22               [ 8]  136 	ld	(hl+), a
    0000002D 36 00            [12]  137 	ld	(hl), #0x00
    0000002F                        138 00107$:
    0000002F F8 02            [12]  139 	ldhl	sp,	#2
    00000031 4E               [ 8]  140 	ld	c, (hl)
    00000032 06 00            [ 8]  141 	ld	b, #0x00
                                    142 ;src/metasprites.c:100: flipped_data[2*i] = flip_x ? reverse_bits[data[2*y]] : data[2*y];
    00000034 F8 07            [12]  143 	ldhl	sp,	#7
    00000036 7E               [ 8]  144 	ld	a, (hl)
    00000037 87               [ 4]  145 	add	a, a
    00000038 F8 01            [12]  146 	ldhl	sp,	#1
    0000003A 77               [ 8]  147 	ld	(hl), a
    0000003B 5F               [ 4]  148 	ld	e, a
    0000003C 07               [ 4]  149 	rlca
    0000003D 9F               [ 4]  150 	sbc	a, a
    0000003E 57               [ 4]  151 	ld	d, a
    0000003F 21r0Br00         [12]  152 	ld	hl, #_flipped_data
    00000042 19               [ 8]  153 	add	hl, de
    00000043 E5               [16]  154 	push	hl
    00000044 7D               [ 4]  155 	ld	a, l
    00000045 F8 04            [12]  156 	ldhl	sp,	#4
    00000047 77               [ 8]  157 	ld	(hl), a
    00000048 E1               [12]  158 	pop	hl
    00000049 7C               [ 4]  159 	ld	a, h
    0000004A F8 03            [12]  160 	ldhl	sp,	#3
    0000004C 22               [ 8]  161 	ld	(hl+), a
    0000004D CB 21            [ 8]  162 	sla	c
    0000004F CB 10            [ 8]  163 	rl	b
    00000051 2A               [ 8]  164 	ld	a,	(hl+)
    00000052 66               [ 8]  165 	ld	h, (hl)
    00000053 6F               [ 4]  166 	ld	l, a
    00000054 09               [ 8]  167 	add	hl, bc
    00000055 5D               [ 4]  168 	ld	e, l
    00000056 54               [ 4]  169 	ld	d, h
    00000057 1A               [ 8]  170 	ld	a, (de)
    00000058 5F               [ 4]  171 	ld	e, a
    00000059 F8 0B            [12]  172 	ldhl	sp,	#11
    0000005B 7E               [ 8]  173 	ld	a, (hl)
    0000005C B7               [ 4]  174 	or	a, a
    0000005D 28 09            [12]  175 	jr	Z, 00108$
    0000005F 21rE3r00         [12]  176 	ld	hl, #_reverse_bits
    00000062 16 00            [ 8]  177 	ld	d, #0x00
    00000064 19               [ 8]  178 	add	hl, de
    00000065 7E               [ 8]  179 	ld	a, (hl)
    00000066 18 01            [12]  180 	jr	00109$
    00000068                        181 00108$:
    00000068 7B               [ 4]  182 	ld	a, e
    00000069                        183 00109$:
    00000069 F8 02            [12]  184 	ldhl	sp,	#2
    0000006B F5               [16]  185 	push	af
    0000006C 2A               [ 8]  186 	ld	a,	(hl+)
    0000006D 66               [ 8]  187 	ld	h, (hl)
    0000006E 6F               [ 4]  188 	ld	l, a
    0000006F F1               [12]  189 	pop	af
    00000070 77               [ 8]  190 	ld	(hl), a
                                    191 ;src/metasprites.c:101: flipped_data[2*i+1] = flip_x ? reverse_bits[data[2*y+1]] : data[2*y+1];
    00000071 F8 01            [12]  192 	ldhl	sp,	#1
    00000073 7E               [ 8]  193 	ld	a, (hl)
    00000074 3C               [ 4]  194 	inc	a
    00000075 5F               [ 4]  195 	ld	e, a
    00000076 07               [ 4]  196 	rlca
    00000077 9F               [ 4]  197 	sbc	a, a
    00000078 57               [ 4]  198 	ld	d, a
    00000079 21r0Br00         [12]  199 	ld	hl, #_flipped_data
    0000007C 19               [ 8]  200 	add	hl, de
    0000007D 33               [ 8]  201 	inc	sp
    0000007E 33               [ 8]  202 	inc	sp
    0000007F E5               [16]  203 	push	hl
    00000080 03               [ 8]  204 	inc	bc
    00000081 F8 04            [12]  205 	ldhl	sp,	#4
    00000083 2A               [ 8]  206 	ld	a,	(hl+)
    00000084 66               [ 8]  207 	ld	h, (hl)
    00000085 6F               [ 4]  208 	ld	l, a
    00000086 09               [ 8]  209 	add	hl, bc
    00000087 4D               [ 4]  210 	ld	c, l
    00000088 44               [ 4]  211 	ld	b, h
    00000089 0A               [ 8]  212 	ld	a, (bc)
    0000008A 5F               [ 4]  213 	ld	e, a
    0000008B F8 0B            [12]  214 	ldhl	sp,	#11
    0000008D 7E               [ 8]  215 	ld	a, (hl)
    0000008E B7               [ 4]  216 	or	a, a
    0000008F 28 17            [12]  217 	jr	Z, 00110$
    00000091 16 00            [ 8]  218 	ld	d, #0x00
    00000093 21rE3r00         [12]  219 	ld	hl, #_reverse_bits
    00000096 19               [ 8]  220 	add	hl, de
    00000097 E5               [16]  221 	push	hl
    00000098 7D               [ 4]  222 	ld	a, l
    00000099 F8 04            [12]  223 	ldhl	sp,	#4
    0000009B 77               [ 8]  224 	ld	(hl), a
    0000009C E1               [12]  225 	pop	hl
    0000009D 7C               [ 4]  226 	ld	a, h
    0000009E F8 03            [12]  227 	ldhl	sp,	#3
    000000A0 32               [ 8]  228 	ld	(hl-), a
    000000A1 2A               [ 8]  229 	ld	a, (hl+)
    000000A2 5F               [ 4]  230 	ld	e, a
    000000A3 56               [ 8]  231 	ld	d, (hl)
    000000A4 1A               [ 8]  232 	ld	a, (de)
    000000A5 4F               [ 4]  233 	ld	c, a
    000000A6 18 01            [12]  234 	jr	00111$
    000000A8                        235 00110$:
    000000A8 4B               [ 4]  236 	ld	c, e
    000000A9                        237 00111$:
    000000A9 E1               [12]  238 	pop	hl
    000000AA E5               [16]  239 	push	hl
    000000AB 71               [ 8]  240 	ld	(hl), c
                                    241 ;src/metasprites.c:97: for(i = 0; i < TILE_HEIGHT; i++)
    000000AC F8 07            [12]  242 	ldhl	sp,	#7
    000000AE 34               [12]  243 	inc	(hl)
    000000AF 20 02            [12]  244 	jr	NZ, 00149$
    000000B1 23               [ 8]  245 	inc	hl
    000000B2 34               [12]  246 	inc	(hl)
    000000B3                        247 00149$:
    000000B3 F8 07            [12]  248 	ldhl	sp,	#7
    000000B5 2A               [ 8]  249 	ld	a, (hl+)
    000000B6 D6 08            [ 8]  250 	sub	a, #0x08
    000000B8 7E               [ 8]  251 	ld	a, (hl)
    000000B9 DE 00            [ 8]  252 	sbc	a, #0x00
    000000BB DAr0Er00         [16]  253 	jp	C, 00102$
                                    254 ;src/metasprites.c:103: set_sprite_data(tile_idx, 1, flipped_data);
    000000BE 2B               [ 8]  255 	dec	hl
    000000BF 2B               [ 8]  256 	dec	hl
    000000C0 11r0Br00         [12]  257 	ld	de, #_flipped_data
    000000C3 D5               [16]  258 	push	de
    000000C4 3E 01            [ 8]  259 	ld	a, #0x01
    000000C6 F5               [16]  260 	push	af
    000000C7 33               [ 8]  261 	inc	sp
    000000C8 7E               [ 8]  262 	ld	a, (hl)
    000000C9 F5               [16]  263 	push	af
    000000CA 33               [ 8]  264 	inc	sp
    000000CB CDr00r00         [24]  265 	call	_set_sprite_data
                                    266 ;src/metasprites.c:104: }
    000000CE E8 0D            [16]  267 	add	sp, #13
    000000D0 E1               [12]  268 	pop	hl
    000000D1 F1               [12]  269 	pop	af
    000000D2 E9               [ 4]  270 	jp	(hl)
    000000D3                        271 _pattern:
    000000D3 80                     272 	.db #0x80	; 128
    000000D4 80                     273 	.db #0x80	; 128
    000000D5 40                     274 	.db #0x40	; 64
    000000D6 40                     275 	.db #0x40	; 64
    000000D7 20                     276 	.db #0x20	; 32
    000000D8 20                     277 	.db #0x20	; 32
    000000D9 10                     278 	.db #0x10	; 16
    000000DA 10                     279 	.db #0x10	; 16
    000000DB 08                     280 	.db #0x08	; 8
    000000DC 08                     281 	.db #0x08	; 8
    000000DD 04                     282 	.db #0x04	; 4
    000000DE 04                     283 	.db #0x04	; 4
    000000DF 02                     284 	.db #0x02	; 2
    000000E0 02                     285 	.db #0x02	; 2
    000000E1 01                     286 	.db #0x01	; 1
    000000E2 01                     287 	.db #0x01	; 1
    000000E3                        288 _reverse_bits:
    000000E3 00                     289 	.db #0x00	; 0
    000000E4 80                     290 	.db #0x80	; 128
    000000E5 40                     291 	.db #0x40	; 64
    000000E6 C0                     292 	.db #0xc0	; 192
    000000E7 20                     293 	.db #0x20	; 32
    000000E8 A0                     294 	.db #0xa0	; 160
    000000E9 60                     295 	.db #0x60	; 96
    000000EA E0                     296 	.db #0xe0	; 224
    000000EB 10                     297 	.db #0x10	; 16
    000000EC 90                     298 	.db #0x90	; 144
    000000ED 50                     299 	.db #0x50	; 80	'P'
    000000EE D0                     300 	.db #0xd0	; 208
    000000EF 30                     301 	.db #0x30	; 48	'0'
    000000F0 B0                     302 	.db #0xb0	; 176
    000000F1 70                     303 	.db #0x70	; 112	'p'
    000000F2 F0                     304 	.db #0xf0	; 240
    000000F3 08                     305 	.db #0x08	; 8
    000000F4 88                     306 	.db #0x88	; 136
    000000F5 48                     307 	.db #0x48	; 72	'H'
    000000F6 C8                     308 	.db #0xc8	; 200
    000000F7 28                     309 	.db #0x28	; 40
    000000F8 A8                     310 	.db #0xa8	; 168
    000000F9 68                     311 	.db #0x68	; 104	'h'
    000000FA E8                     312 	.db #0xe8	; 232
    000000FB 18                     313 	.db #0x18	; 24
    000000FC 98                     314 	.db #0x98	; 152
    000000FD 58                     315 	.db #0x58	; 88	'X'
    000000FE D8                     316 	.db #0xd8	; 216
    000000FF 38                     317 	.db #0x38	; 56	'8'
    00000100 B8                     318 	.db #0xb8	; 184
    00000101 78                     319 	.db #0x78	; 120	'x'
    00000102 F8                     320 	.db #0xf8	; 248
    00000103 04                     321 	.db #0x04	; 4
    00000104 84                     322 	.db #0x84	; 132
    00000105 44                     323 	.db #0x44	; 68	'D'
    00000106 C4                     324 	.db #0xc4	; 196
    00000107 24                     325 	.db #0x24	; 36
    00000108 A4                     326 	.db #0xa4	; 164
    00000109 64                     327 	.db #0x64	; 100	'd'
    0000010A E4                     328 	.db #0xe4	; 228
    0000010B 14                     329 	.db #0x14	; 20
    0000010C 94                     330 	.db #0x94	; 148
    0000010D 54                     331 	.db #0x54	; 84	'T'
    0000010E D4                     332 	.db #0xd4	; 212
    0000010F 34                     333 	.db #0x34	; 52	'4'
    00000110 B4                     334 	.db #0xb4	; 180
    00000111 74                     335 	.db #0x74	; 116	't'
    00000112 F4                     336 	.db #0xf4	; 244
    00000113 0C                     337 	.db #0x0c	; 12
    00000114 8C                     338 	.db #0x8c	; 140
    00000115 4C                     339 	.db #0x4c	; 76	'L'
    00000116 CC                     340 	.db #0xcc	; 204
    00000117 2C                     341 	.db #0x2c	; 44
    00000118 AC                     342 	.db #0xac	; 172
    00000119 6C                     343 	.db #0x6c	; 108	'l'
    0000011A EC                     344 	.db #0xec	; 236
    0000011B 1C                     345 	.db #0x1c	; 28
    0000011C 9C                     346 	.db #0x9c	; 156
    0000011D 5C                     347 	.db #0x5c	; 92
    0000011E DC                     348 	.db #0xdc	; 220
    0000011F 3C                     349 	.db #0x3c	; 60
    00000120 BC                     350 	.db #0xbc	; 188
    00000121 7C                     351 	.db #0x7c	; 124
    00000122 FC                     352 	.db #0xfc	; 252
    00000123 02                     353 	.db #0x02	; 2
    00000124 82                     354 	.db #0x82	; 130
    00000125 42                     355 	.db #0x42	; 66	'B'
    00000126 C2                     356 	.db #0xc2	; 194
    00000127 22                     357 	.db #0x22	; 34
    00000128 A2                     358 	.db #0xa2	; 162
    00000129 62                     359 	.db #0x62	; 98	'b'
    0000012A E2                     360 	.db #0xe2	; 226
    0000012B 12                     361 	.db #0x12	; 18
    0000012C 92                     362 	.db #0x92	; 146
    0000012D 52                     363 	.db #0x52	; 82	'R'
    0000012E D2                     364 	.db #0xd2	; 210
    0000012F 32                     365 	.db #0x32	; 50	'2'
    00000130 B2                     366 	.db #0xb2	; 178
    00000131 72                     367 	.db #0x72	; 114	'r'
    00000132 F2                     368 	.db #0xf2	; 242
    00000133 0A                     369 	.db #0x0a	; 10
    00000134 8A                     370 	.db #0x8a	; 138
    00000135 4A                     371 	.db #0x4a	; 74	'J'
    00000136 CA                     372 	.db #0xca	; 202
    00000137 2A                     373 	.db #0x2a	; 42
    00000138 AA                     374 	.db #0xaa	; 170
    00000139 6A                     375 	.db #0x6a	; 106	'j'
    0000013A EA                     376 	.db #0xea	; 234
    0000013B 1A                     377 	.db #0x1a	; 26
    0000013C 9A                     378 	.db #0x9a	; 154
    0000013D 5A                     379 	.db #0x5a	; 90	'Z'
    0000013E DA                     380 	.db #0xda	; 218
    0000013F 3A                     381 	.db #0x3a	; 58
    00000140 BA                     382 	.db #0xba	; 186
    00000141 7A                     383 	.db #0x7a	; 122	'z'
    00000142 FA                     384 	.db #0xfa	; 250
    00000143 06                     385 	.db #0x06	; 6
    00000144 86                     386 	.db #0x86	; 134
    00000145 46                     387 	.db #0x46	; 70	'F'
    00000146 C6                     388 	.db #0xc6	; 198
    00000147 26                     389 	.db #0x26	; 38
    00000148 A6                     390 	.db #0xa6	; 166
    00000149 66                     391 	.db #0x66	; 102	'f'
    0000014A E6                     392 	.db #0xe6	; 230
    0000014B 16                     393 	.db #0x16	; 22
    0000014C 96                     394 	.db #0x96	; 150
    0000014D 56                     395 	.db #0x56	; 86	'V'
    0000014E D6                     396 	.db #0xd6	; 214
    0000014F 36                     397 	.db #0x36	; 54	'6'
    00000150 B6                     398 	.db #0xb6	; 182
    00000151 76                     399 	.db #0x76	; 118	'v'
    00000152 F6                     400 	.db #0xf6	; 246
    00000153 0E                     401 	.db #0x0e	; 14
    00000154 8E                     402 	.db #0x8e	; 142
    00000155 4E                     403 	.db #0x4e	; 78	'N'
    00000156 CE                     404 	.db #0xce	; 206
    00000157 2E                     405 	.db #0x2e	; 46
    00000158 AE                     406 	.db #0xae	; 174
    00000159 6E                     407 	.db #0x6e	; 110	'n'
    0000015A EE                     408 	.db #0xee	; 238
    0000015B 1E                     409 	.db #0x1e	; 30
    0000015C 9E                     410 	.db #0x9e	; 158
    0000015D 5E                     411 	.db #0x5e	; 94
    0000015E DE                     412 	.db #0xde	; 222
    0000015F 3E                     413 	.db #0x3e	; 62
    00000160 BE                     414 	.db #0xbe	; 190
    00000161 7E                     415 	.db #0x7e	; 126
    00000162 FE                     416 	.db #0xfe	; 254
    00000163 01                     417 	.db #0x01	; 1
    00000164 81                     418 	.db #0x81	; 129
    00000165 41                     419 	.db #0x41	; 65	'A'
    00000166 C1                     420 	.db #0xc1	; 193
    00000167 21                     421 	.db #0x21	; 33
    00000168 A1                     422 	.db #0xa1	; 161
    00000169 61                     423 	.db #0x61	; 97	'a'
    0000016A E1                     424 	.db #0xe1	; 225
    0000016B 11                     425 	.db #0x11	; 17
    0000016C 91                     426 	.db #0x91	; 145
    0000016D 51                     427 	.db #0x51	; 81	'Q'
    0000016E D1                     428 	.db #0xd1	; 209
    0000016F 31                     429 	.db #0x31	; 49	'1'
    00000170 B1                     430 	.db #0xb1	; 177
    00000171 71                     431 	.db #0x71	; 113	'q'
    00000172 F1                     432 	.db #0xf1	; 241
    00000173 09                     433 	.db #0x09	; 9
    00000174 89                     434 	.db #0x89	; 137
    00000175 49                     435 	.db #0x49	; 73	'I'
    00000176 C9                     436 	.db #0xc9	; 201
    00000177 29                     437 	.db #0x29	; 41
    00000178 A9                     438 	.db #0xa9	; 169
    00000179 69                     439 	.db #0x69	; 105	'i'
    0000017A E9                     440 	.db #0xe9	; 233
    0000017B 19                     441 	.db #0x19	; 25
    0000017C 99                     442 	.db #0x99	; 153
    0000017D 59                     443 	.db #0x59	; 89	'Y'
    0000017E D9                     444 	.db #0xd9	; 217
    0000017F 39                     445 	.db #0x39	; 57	'9'
    00000180 B9                     446 	.db #0xb9	; 185
    00000181 79                     447 	.db #0x79	; 121	'y'
    00000182 F9                     448 	.db #0xf9	; 249
    00000183 05                     449 	.db #0x05	; 5
    00000184 85                     450 	.db #0x85	; 133
    00000185 45                     451 	.db #0x45	; 69	'E'
    00000186 C5                     452 	.db #0xc5	; 197
    00000187 25                     453 	.db #0x25	; 37
    00000188 A5                     454 	.db #0xa5	; 165
    00000189 65                     455 	.db #0x65	; 101	'e'
    0000018A E5                     456 	.db #0xe5	; 229
    0000018B 15                     457 	.db #0x15	; 21
    0000018C 95                     458 	.db #0x95	; 149
    0000018D 55                     459 	.db #0x55	; 85	'U'
    0000018E D5                     460 	.db #0xd5	; 213
    0000018F 35                     461 	.db #0x35	; 53	'5'
    00000190 B5                     462 	.db #0xb5	; 181
    00000191 75                     463 	.db #0x75	; 117	'u'
    00000192 F5                     464 	.db #0xf5	; 245
    00000193 0D                     465 	.db #0x0d	; 13
    00000194 8D                     466 	.db #0x8d	; 141
    00000195 4D                     467 	.db #0x4d	; 77	'M'
    00000196 CD                     468 	.db #0xcd	; 205
    00000197 2D                     469 	.db #0x2d	; 45
    00000198 AD                     470 	.db #0xad	; 173
    00000199 6D                     471 	.db #0x6d	; 109	'm'
    0000019A ED                     472 	.db #0xed	; 237
    0000019B 1D                     473 	.db #0x1d	; 29
    0000019C 9D                     474 	.db #0x9d	; 157
    0000019D 5D                     475 	.db #0x5d	; 93
    0000019E DD                     476 	.db #0xdd	; 221
    0000019F 3D                     477 	.db #0x3d	; 61
    000001A0 BD                     478 	.db #0xbd	; 189
    000001A1 7D                     479 	.db #0x7d	; 125
    000001A2 FD                     480 	.db #0xfd	; 253
    000001A3 03                     481 	.db #0x03	; 3
    000001A4 83                     482 	.db #0x83	; 131
    000001A5 43                     483 	.db #0x43	; 67	'C'
    000001A6 C3                     484 	.db #0xc3	; 195
    000001A7 23                     485 	.db #0x23	; 35
    000001A8 A3                     486 	.db #0xa3	; 163
    000001A9 63                     487 	.db #0x63	; 99	'c'
    000001AA E3                     488 	.db #0xe3	; 227
    000001AB 13                     489 	.db #0x13	; 19
    000001AC 93                     490 	.db #0x93	; 147
    000001AD 53                     491 	.db #0x53	; 83	'S'
    000001AE D3                     492 	.db #0xd3	; 211
    000001AF 33                     493 	.db #0x33	; 51	'3'
    000001B0 B3                     494 	.db #0xb3	; 179
    000001B1 73                     495 	.db #0x73	; 115	's'
    000001B2 F3                     496 	.db #0xf3	; 243
    000001B3 0B                     497 	.db #0x0b	; 11
    000001B4 8B                     498 	.db #0x8b	; 139
    000001B5 4B                     499 	.db #0x4b	; 75	'K'
    000001B6 CB                     500 	.db #0xcb	; 203
    000001B7 2B                     501 	.db #0x2b	; 43
    000001B8 AB                     502 	.db #0xab	; 171
    000001B9 6B                     503 	.db #0x6b	; 107	'k'
    000001BA EB                     504 	.db #0xeb	; 235
    000001BB 1B                     505 	.db #0x1b	; 27
    000001BC 9B                     506 	.db #0x9b	; 155
    000001BD 5B                     507 	.db #0x5b	; 91
    000001BE DB                     508 	.db #0xdb	; 219
    000001BF 3B                     509 	.db #0x3b	; 59
    000001C0 BB                     510 	.db #0xbb	; 187
    000001C1 7B                     511 	.db #0x7b	; 123
    000001C2 FB                     512 	.db #0xfb	; 251
    000001C3 07                     513 	.db #0x07	; 7
    000001C4 87                     514 	.db #0x87	; 135
    000001C5 47                     515 	.db #0x47	; 71	'G'
    000001C6 C7                     516 	.db #0xc7	; 199
    000001C7 27                     517 	.db #0x27	; 39
    000001C8 A7                     518 	.db #0xa7	; 167
    000001C9 67                     519 	.db #0x67	; 103	'g'
    000001CA E7                     520 	.db #0xe7	; 231
    000001CB 17                     521 	.db #0x17	; 23
    000001CC 97                     522 	.db #0x97	; 151
    000001CD 57                     523 	.db #0x57	; 87	'W'
    000001CE D7                     524 	.db #0xd7	; 215
    000001CF 37                     525 	.db #0x37	; 55	'7'
    000001D0 B7                     526 	.db #0xb7	; 183
    000001D1 77                     527 	.db #0x77	; 119	'w'
    000001D2 F7                     528 	.db #0xf7	; 247
    000001D3 0F                     529 	.db #0x0f	; 15
    000001D4 8F                     530 	.db #0x8f	; 143
    000001D5 4F                     531 	.db #0x4f	; 79	'O'
    000001D6 CF                     532 	.db #0xcf	; 207
    000001D7 2F                     533 	.db #0x2f	; 47
    000001D8 AF                     534 	.db #0xaf	; 175
    000001D9 6F                     535 	.db #0x6f	; 111	'o'
    000001DA EF                     536 	.db #0xef	; 239
    000001DB 1F                     537 	.db #0x1f	; 31
    000001DC 9F                     538 	.db #0x9f	; 159
    000001DD 5F                     539 	.db #0x5f	; 95
    000001DE DF                     540 	.db #0xdf	; 223
    000001DF 3F                     541 	.db #0x3f	; 63
    000001E0 BF                     542 	.db #0xbf	; 191
    000001E1 7F                     543 	.db #0x7f	; 127
    000001E2 FF                     544 	.db #0xff	; 255
                                    545 ;src/metasprites.c:106: uint8_t get_tile_offset(uint8_t flipx, uint8_t flipy)
                                    546 ;	---------------------------------
                                    547 ; Function get_tile_offset
                                    548 ; ---------------------------------
    000001E3                        549 _get_tile_offset::
                                    550 ;src/metasprites.c:117: return offset;
    000001E3 AF               [ 4]  551 	xor	a, a
                                    552 ;src/metasprites.c:118: }
    000001E4 C9               [16]  553 	ret
                                    554 ;src/metasprites.c:123: void load_and_duplicate_sprite_tile_data(void)
                                    555 ;	---------------------------------
                                    556 ; Function load_and_duplicate_sprite_tile_data
                                    557 ; ---------------------------------
    000001E5                        558 _load_and_duplicate_sprite_tile_data::
                                    559 ;src/metasprites.c:126: num_tiles = sizeof(sprite_tiles) >> 4;
    000001E5 21r1Br00         [12]  560 	ld	hl, #_num_tiles
    000001E8 3E 30            [ 8]  561 	ld	a, #0x30
    000001EA 22               [ 8]  562 	ld	(hl+), a
    000001EB AF               [ 4]  563 	xor	a, a
    000001EC 77               [ 8]  564 	ld	(hl), a
                                    565 ;src/metasprites.c:127: for(i = 0; i < num_tiles; i++)
    000001ED 01 00 00         [12]  566 	ld	bc, #0x0000
    000001F0                        567 00103$:
    000001F0 21r1Br00         [12]  568 	ld	hl, #_num_tiles
    000001F3 79               [ 4]  569 	ld	a, c
    000001F4 96               [ 8]  570 	sub	a, (hl)
    000001F5 23               [ 8]  571 	inc	hl
    000001F6 78               [ 4]  572 	ld	a, b
    000001F7 9E               [ 8]  573 	sbc	a, (hl)
    000001F8 D0               [20]  574 	ret	NC
                                    575 ;src/metasprites.c:129: set_tile(i + get_tile_offset(0, 0), sprite_tiles + (i << 4), 0, 0);
    000001F9 69               [ 4]  576 	ld	l, c
    000001FA 60               [ 4]  577 	ld	h, b
    000001FB 29               [ 8]  578 	add	hl, hl
    000001FC 29               [ 8]  579 	add	hl, hl
    000001FD 29               [ 8]  580 	add	hl, hl
    000001FE 29               [ 8]  581 	add	hl, hl
    000001FF 11r00r00         [12]  582 	ld	de, #_sprite_tiles
    00000202 19               [ 8]  583 	add	hl, de
    00000203 5D               [ 4]  584 	ld	e, l
    00000204 54               [ 4]  585 	ld	d, h
    00000205 69               [ 4]  586 	ld	l, c
                                    587 ;	spillPairReg hl
                                    588 ;	spillPairReg hl
    00000206 E5               [16]  589 	push	hl
    00000207 C5               [16]  590 	push	bc
    00000208 D5               [16]  591 	push	de
    00000209 AF               [ 4]  592 	xor	a, a
    0000020A 5F               [ 4]  593 	ld	e, a
    0000020B CDrE3r01         [24]  594 	call	_get_tile_offset
    0000020E D1               [12]  595 	pop	de
    0000020F C1               [12]  596 	pop	bc
    00000210 E1               [12]  597 	pop	hl
    00000211 85               [ 4]  598 	add	a, l
    00000212 6F               [ 4]  599 	ld	l, a
                                    600 ;	spillPairReg hl
                                    601 ;	spillPairReg hl
    00000213 C5               [16]  602 	push	bc
    00000214 AF               [ 4]  603 	xor	a, a
    00000215 0F               [ 4]  604 	rrca
    00000216 F5               [16]  605 	push	af
    00000217 7D               [ 4]  606 	ld	a, l
    00000218 CDr00r00         [24]  607 	call	_set_tile
    0000021B C1               [12]  608 	pop	bc
                                    609 ;src/metasprites.c:127: for(i = 0; i < num_tiles; i++)
    0000021C 03               [ 8]  610 	inc	bc
                                    611 ;src/metasprites.c:140: }
    0000021D 18 D1            [12]  612 	jr	00103$
                                    613 ;src/metasprites.c:160: void main(void) {
                                    614 ;	---------------------------------
                                    615 ; Function main
                                    616 ; ---------------------------------
    0000021F                        617 _main::
    0000021F E8 FA            [16]  618 	add	sp, #-6
                                    619 ;src/metasprites.c:161: DISPLAY_OFF;
    00000221 CDr00r00         [24]  620 	call	_display_off
                                    621 ;src/metasprites.c:164: cgb_compatibility();
    00000224 CDr00r00         [24]  622 	call	_cgb_compatibility
                                    623 ;src/metasprites.c:165: set_sprite_palette(OAMF_CGB_PAL0, 1, gray_pal);
    00000227 11r31r06         [12]  624 	ld	de, #_gray_pal
    0000022A D5               [16]  625 	push	de
    0000022B AF               [ 4]  626 	xor	a, a
    0000022C 3C               [ 4]  627 	inc	a
    0000022D F5               [16]  628 	push	af
    0000022E CDr00r00         [24]  629 	call	_set_sprite_palette
    00000231 E8 04            [16]  630 	add	sp, #4
                                    631 ;src/metasprites.c:166: set_sprite_palette(OAMF_CGB_PAL1, 1, pink_pal);
    00000233 11r39r06         [12]  632 	ld	de, #_pink_pal
    00000236 D5               [16]  633 	push	de
    00000237 21 01 01         [12]  634 	ld	hl, #0x101
    0000023A E5               [16]  635 	push	hl
    0000023B CDr00r00         [24]  636 	call	_set_sprite_palette
    0000023E E8 04            [16]  637 	add	sp, #4
                                    638 ;src/metasprites.c:167: set_sprite_palette(OAMF_CGB_PAL2, 1, cyan_pal);
    00000240 11r41r06         [12]  639 	ld	de, #_cyan_pal
    00000243 D5               [16]  640 	push	de
    00000244 21 02 01         [12]  641 	ld	hl, #0x102
    00000247 E5               [16]  642 	push	hl
    00000248 CDr00r00         [24]  643 	call	_set_sprite_palette
    0000024B E8 04            [16]  644 	add	sp, #4
                                    645 ;src/metasprites.c:168: set_sprite_palette(OAMF_CGB_PAL3, 1, green_pal);
    0000024D 11r49r06         [12]  646 	ld	de, #_green_pal
    00000250 D5               [16]  647 	push	de
    00000251 21 03 01         [12]  648 	ld	hl, #0x103
    00000254 E5               [16]  649 	push	hl
    00000255 CDr00r00         [24]  650 	call	_set_sprite_palette
    00000258 E8 04            [16]  651 	add	sp, #4
                                    652 ;src/metasprites.c:177: fill_bkg_rect(0, 0, DEVICE_SCREEN_WIDTH, DEVICE_SCREEN_HEIGHT, 0);
    0000025A AF               [ 4]  653 	xor	a, a
    0000025B 67               [ 4]  654 	ld	h, a
    0000025C 2E 12            [ 8]  655 	ld	l, #0x12
    0000025E E5               [16]  656 	push	hl
    0000025F 3E 14            [ 8]  657 	ld	a, #0x14
    00000261 F5               [16]  658 	push	af
    00000262 33               [ 8]  659 	inc	sp
    00000263 AF               [ 4]  660 	xor	a, a
    00000264 0F               [ 4]  661 	rrca
    00000265 F5               [16]  662 	push	af
    00000266 CDr00r00         [24]  663 	call	_fill_bkg_rect
    00000269 E8 05            [16]  664 	add	sp, #5
                                    665 ;src/metasprites.c:180: set_bkg_data(0, 1, pattern);
    0000026B 11rD3r00         [12]  666 	ld	de, #_pattern
    0000026E D5               [16]  667 	push	de
    0000026F AF               [ 4]  668 	xor	a, a
    00000270 3C               [ 4]  669 	inc	a
    00000271 F5               [16]  670 	push	af
    00000272 CDr00r00         [24]  671 	call	_set_bkg_data
    00000275 E8 04            [16]  672 	add	sp, #4
                                    673 ;src/metasprites.c:183: load_and_duplicate_sprite_tile_data();
    00000277 CDrE5r01         [24]  674 	call	_load_and_duplicate_sprite_tile_data
                                    675 ;src/metasprites.c:186: SHOW_BKG; SHOW_SPRITES;
    0000027A F0r00            [12]  676 	ldh	a, (_LCDC_REG + 0)
    0000027C F6 01            [ 8]  677 	or	a, #0x01
    0000027E E0r00            [12]  678 	ldh	(_LCDC_REG + 0), a
    00000280 F0r00            [12]  679 	ldh	a, (_LCDC_REG + 0)
    00000282 F6 02            [ 8]  680 	or	a, #0x02
    00000284 E0r00            [12]  681 	ldh	(_LCDC_REG + 0), a
                                    682 ;src/metasprites.c:192: SPRITES_8x8;
    00000286 F0r00            [12]  683 	ldh	a, (_LCDC_REG + 0)
    00000288 E6 FB            [ 8]  684 	and	a, #0xfb
    0000028A E0r00            [12]  685 	ldh	(_LCDC_REG + 0), a
                                    686 ;src/metasprites.c:194: DISPLAY_ON;
    0000028C F0r00            [12]  687 	ldh	a, (_LCDC_REG + 0)
    0000028E F6 80            [ 8]  688 	or	a, #0x80
    00000290 E0r00            [12]  689 	ldh	(_LCDC_REG + 0), a
                                    690 ;src/metasprites.c:197: PosX = (DEVICE_SCREEN_PX_WIDTH / 2) << 4;
    00000292 21r00r00         [12]  691 	ld	hl, #_PosX
    00000295 AF               [ 4]  692 	xor	a, a
    00000296 22               [ 8]  693 	ld	(hl+), a
    00000297 36 05            [12]  694 	ld	(hl), #0x05
                                    695 ;src/metasprites.c:198: PosY = (DEVICE_SCREEN_PX_HEIGHT / 2) << 4;
    00000299 21r02r00         [12]  696 	ld	hl, #_PosY
    0000029C 3E 80            [ 8]  697 	ld	a, #0x80
    0000029E 22               [ 8]  698 	ld	(hl+), a
    0000029F 36 04            [12]  699 	ld	(hl), #0x04
                                    700 ;src/metasprites.c:199: SpdX = SpdY = 0;
    000002A1 AF               [ 4]  701 	xor	a, a
    000002A2 21r06r00         [12]  702 	ld	hl, #_SpdY
    000002A5 22               [ 8]  703 	ld	(hl+), a
    000002A6 77               [ 8]  704 	ld	(hl), a
    000002A7 AF               [ 4]  705 	xor	a, a
    000002A8 21r04r00         [12]  706 	ld	hl, #_SpdX
    000002AB 22               [ 8]  707 	ld	(hl+), a
    000002AC 77               [ 8]  708 	ld	(hl), a
                                    709 ;src/metasprites.c:201: idx = 0; rot = 0;
    000002AD 21r09r00         [12]  710 	ld	hl, #_idx
    000002B0 36 00            [12]  711 	ld	(hl), #0x00
    000002B2 21r0Ar00         [12]  712 	ld	hl, #_rot
    000002B5 36 00            [12]  713 	ld	(hl), #0x00
                                    714 ;src/metasprites.c:203: while(TRUE) {        
    000002B7                        715 00145$:
                                    716 ;src/metasprites.c:205: KEY_INPUT;
    000002B7 FAr00r00         [16]  717 	ld	a, (#_joyp)
    000002BA EAr01r00         [16]  718 	ld	(#_old_joyp),a
    000002BD CDr00r00         [24]  719 	call	_joypad
    000002C0 EAr00r00         [16]  720 	ld	(#_joyp),a
                                    721 ;src/metasprites.c:207: PosF = 0;
    000002C3 21r08r00         [12]  722 	ld	hl, #_PosF
    000002C6 36 00            [12]  723 	ld	(hl), #0x00
                                    724 ;src/metasprites.c:209: if (KEY_DOWN(J_UP)) {
    000002C8 FAr00r00         [16]  725 	ld	a, (#_joyp)
    000002CB F8 04            [12]  726 	ldhl	sp,	#4
    000002CD 77               [ 8]  727 	ld	(hl), a
                                    728 ;src/metasprites.c:210: SpdY -= 2;
    000002CE 21r06r00         [12]  729 	ld	hl, #_SpdY
    000002D1 2A               [ 8]  730 	ld	a, (hl+)
    000002D2 4F               [ 4]  731 	ld	c, a
    000002D3 46               [ 8]  732 	ld	b, (hl)
                                    733 ;src/metasprites.c:212: PosF |= ACC_Y;
    000002D4 FAr08r00         [16]  734 	ld	a, (#_PosF)
    000002D7 F6 02            [ 8]  735 	or	a, #0x02
    000002D9 F8 05            [12]  736 	ldhl	sp,	#5
    000002DB 77               [ 8]  737 	ld	(hl), a
                                    738 ;src/metasprites.c:209: if (KEY_DOWN(J_UP)) {
    000002DC E5               [16]  739 	push	hl
    000002DD 2B               [ 8]  740 	dec	hl
    000002DE CB 56            [12]  741 	bit	2, (hl)
    000002E0 E1               [12]  742 	pop	hl
    000002E1 28 34            [12]  743 	jr	Z, 00108$
                                    744 ;src/metasprites.c:210: SpdY -= 2;
    000002E3 0B               [ 8]  745 	dec	bc
    000002E4 0B               [ 8]  746 	dec	bc
    000002E5 21r06r00         [12]  747 	ld	hl, #_SpdY
    000002E8 79               [ 4]  748 	ld	a, c
    000002E9 22               [ 8]  749 	ld	(hl+), a
                                    750 ;src/metasprites.c:211: if (SpdY < -32) SpdY = -32;
    000002EA 78               [ 4]  751 	ld	a, b
    000002EB 32               [ 8]  752 	ld	(hl-), a
    000002EC 2A               [ 8]  753 	ld	a, (hl+)
    000002ED D6 E0            [ 8]  754 	sub	a, #0xe0
    000002EF 7E               [ 8]  755 	ld	a, (hl)
    000002F0 DE FF            [ 8]  756 	sbc	a, #0xff
    000002F2 56               [ 8]  757 	ld	d, (hl)
    000002F3 3E FF            [ 8]  758 	ld	a, #0xff
    000002F5 CB 7F            [ 8]  759 	bit	7,a
    000002F7 28 07            [12]  760 	jr	Z, 00319$
    000002F9 CB 7A            [ 8]  761 	bit	7, d
    000002FB 20 08            [12]  762 	jr	NZ, 00320$
    000002FD BF               [ 4]  763 	cp	a, a
    000002FE 18 05            [12]  764 	jr	00320$
    00000300                        765 00319$:
    00000300 CB 7A            [ 8]  766 	bit	7, d
    00000302 28 01            [12]  767 	jr	Z, 00320$
    00000304 37               [ 4]  768 	scf
    00000305                        769 00320$:
    00000305 30 08            [12]  770 	jr	NC, 00102$
    00000307 21r06r00         [12]  771 	ld	hl, #_SpdY
    0000030A 3E E0            [ 8]  772 	ld	a, #0xe0
    0000030C 22               [ 8]  773 	ld	(hl+), a
    0000030D 36 FF            [12]  774 	ld	(hl), #0xff
    0000030F                        775 00102$:
                                    776 ;src/metasprites.c:212: PosF |= ACC_Y;
    0000030F F8 05            [12]  777 	ldhl	sp,	#5
    00000311 7E               [ 8]  778 	ld	a, (hl)
    00000312 EAr08r00         [16]  779 	ld	(#_PosF),a
    00000315 18 3D            [12]  780 	jr	00109$
    00000317                        781 00108$:
                                    782 ;src/metasprites.c:213: } else if (KEY_DOWN(J_DOWN)) {
    00000317 E5               [16]  783 	push	hl
    00000318 F8 06            [12]  784 	ldhl	sp,	#6
    0000031A CB 5E            [12]  785 	bit	3, (hl)
    0000031C E1               [12]  786 	pop	hl
    0000031D 28 35            [12]  787 	jr	Z, 00109$
                                    788 ;src/metasprites.c:214: SpdY += 2;
    0000031F 03               [ 8]  789 	inc	bc
    00000320 03               [ 8]  790 	inc	bc
    00000321 21r06r00         [12]  791 	ld	hl, #_SpdY
    00000324 79               [ 4]  792 	ld	a, c
    00000325 22               [ 8]  793 	ld	(hl+), a
                                    794 ;src/metasprites.c:215: if (SpdY > 32) SpdY = 32;
    00000326 78               [ 4]  795 	ld	a, b
    00000327 32               [ 8]  796 	ld	(hl-), a
    00000328 2A               [ 8]  797 	ld	a, (hl+)
    00000329 4F               [ 4]  798 	ld	c, a
    0000032A 46               [ 8]  799 	ld	b, (hl)
    0000032B 58               [ 4]  800 	ld	e, b
    0000032C 16 00            [ 8]  801 	ld	d, #0x00
    0000032E 3E 20            [ 8]  802 	ld	a, #0x20
    00000330 B9               [ 4]  803 	cp	a, c
    00000331 3E 00            [ 8]  804 	ld	a, #0x00
    00000333 98               [ 4]  805 	sbc	a, b
    00000334 CB 7B            [ 8]  806 	bit	7, e
    00000336 28 07            [12]  807 	jr	Z, 00322$
    00000338 CB 7A            [ 8]  808 	bit	7, d
    0000033A 20 08            [12]  809 	jr	NZ, 00323$
    0000033C BF               [ 4]  810 	cp	a, a
    0000033D 18 05            [12]  811 	jr	00323$
    0000033F                        812 00322$:
    0000033F CB 7A            [ 8]  813 	bit	7, d
    00000341 28 01            [12]  814 	jr	Z, 00323$
    00000343 37               [ 4]  815 	scf
    00000344                        816 00323$:
    00000344 30 08            [12]  817 	jr	NC, 00104$
    00000346 21r06r00         [12]  818 	ld	hl, #_SpdY
    00000349 3E 20            [ 8]  819 	ld	a, #0x20
    0000034B 22               [ 8]  820 	ld	(hl+), a
    0000034C AF               [ 4]  821 	xor	a, a
    0000034D 77               [ 8]  822 	ld	(hl), a
    0000034E                        823 00104$:
                                    824 ;src/metasprites.c:216: PosF |= ACC_Y;
    0000034E F8 05            [12]  825 	ldhl	sp,	#5
    00000350 7E               [ 8]  826 	ld	a, (hl)
    00000351 EAr08r00         [16]  827 	ld	(#_PosF),a
    00000354                        828 00109$:
                                    829 ;src/metasprites.c:220: SpdX -= 2;
    00000354 21r04r00         [12]  830 	ld	hl, #_SpdX
    00000357 2A               [ 8]  831 	ld	a, (hl+)
    00000358 5F               [ 4]  832 	ld	e, a
    00000359 56               [ 8]  833 	ld	d, (hl)
                                    834 ;src/metasprites.c:222: PosF |= ACC_X;
    0000035A FAr08r00         [16]  835 	ld	a, (#_PosF)
    0000035D F6 01            [ 8]  836 	or	a, #0x01
    0000035F F8 05            [12]  837 	ldhl	sp,	#5
    00000361 77               [ 8]  838 	ld	(hl), a
                                    839 ;src/metasprites.c:219: if (KEY_DOWN(J_LEFT)) {
    00000362 E5               [16]  840 	push	hl
    00000363 2B               [ 8]  841 	dec	hl
    00000364 CB 4E            [12]  842 	bit	1, (hl)
    00000366 E1               [12]  843 	pop	hl
    00000367 28 34            [12]  844 	jr	Z, 00117$
                                    845 ;src/metasprites.c:220: SpdX -= 2;
    00000369 1B               [ 8]  846 	dec	de
    0000036A 1B               [ 8]  847 	dec	de
    0000036B 21r04r00         [12]  848 	ld	hl, #_SpdX
    0000036E 7B               [ 4]  849 	ld	a, e
    0000036F 22               [ 8]  850 	ld	(hl+), a
                                    851 ;src/metasprites.c:221: if (SpdX < -32) SpdX = -32;
    00000370 7A               [ 4]  852 	ld	a, d
    00000371 32               [ 8]  853 	ld	(hl-), a
    00000372 2A               [ 8]  854 	ld	a, (hl+)
    00000373 D6 E0            [ 8]  855 	sub	a, #0xe0
    00000375 7E               [ 8]  856 	ld	a, (hl)
    00000376 DE FF            [ 8]  857 	sbc	a, #0xff
    00000378 56               [ 8]  858 	ld	d, (hl)
    00000379 3E FF            [ 8]  859 	ld	a, #0xff
    0000037B CB 7F            [ 8]  860 	bit	7,a
    0000037D 28 07            [12]  861 	jr	Z, 00325$
    0000037F CB 7A            [ 8]  862 	bit	7, d
    00000381 20 08            [12]  863 	jr	NZ, 00326$
    00000383 BF               [ 4]  864 	cp	a, a
    00000384 18 05            [12]  865 	jr	00326$
    00000386                        866 00325$:
    00000386 CB 7A            [ 8]  867 	bit	7, d
    00000388 28 01            [12]  868 	jr	Z, 00326$
    0000038A 37               [ 4]  869 	scf
    0000038B                        870 00326$:
    0000038B 30 08            [12]  871 	jr	NC, 00111$
    0000038D 21r04r00         [12]  872 	ld	hl, #_SpdX
    00000390 3E E0            [ 8]  873 	ld	a, #0xe0
    00000392 22               [ 8]  874 	ld	(hl+), a
    00000393 36 FF            [12]  875 	ld	(hl), #0xff
    00000395                        876 00111$:
                                    877 ;src/metasprites.c:222: PosF |= ACC_X;
    00000395 F8 05            [12]  878 	ldhl	sp,	#5
    00000397 7E               [ 8]  879 	ld	a, (hl)
    00000398 EAr08r00         [16]  880 	ld	(#_PosF),a
    0000039B 18 3D            [12]  881 	jr	00118$
    0000039D                        882 00117$:
                                    883 ;src/metasprites.c:223: } else if (KEY_DOWN(J_RIGHT)) {
    0000039D E5               [16]  884 	push	hl
    0000039E F8 06            [12]  885 	ldhl	sp,	#6
    000003A0 CB 46            [12]  886 	bit	0, (hl)
    000003A2 E1               [12]  887 	pop	hl
    000003A3 28 35            [12]  888 	jr	Z, 00118$
                                    889 ;src/metasprites.c:224: SpdX += 2;
    000003A5 13               [ 8]  890 	inc	de
    000003A6 13               [ 8]  891 	inc	de
    000003A7 21r04r00         [12]  892 	ld	hl, #_SpdX
    000003AA 7B               [ 4]  893 	ld	a, e
    000003AB 22               [ 8]  894 	ld	(hl+), a
                                    895 ;src/metasprites.c:225: if (SpdX > 32) SpdX = 32;
    000003AC 7A               [ 4]  896 	ld	a, d
    000003AD 32               [ 8]  897 	ld	(hl-), a
    000003AE 2A               [ 8]  898 	ld	a, (hl+)
    000003AF 4F               [ 4]  899 	ld	c, a
    000003B0 46               [ 8]  900 	ld	b, (hl)
    000003B1 58               [ 4]  901 	ld	e, b
    000003B2 16 00            [ 8]  902 	ld	d, #0x00
    000003B4 3E 20            [ 8]  903 	ld	a, #0x20
    000003B6 B9               [ 4]  904 	cp	a, c
    000003B7 3E 00            [ 8]  905 	ld	a, #0x00
    000003B9 98               [ 4]  906 	sbc	a, b
    000003BA CB 7B            [ 8]  907 	bit	7, e
    000003BC 28 07            [12]  908 	jr	Z, 00328$
    000003BE CB 7A            [ 8]  909 	bit	7, d
    000003C0 20 08            [12]  910 	jr	NZ, 00329$
    000003C2 BF               [ 4]  911 	cp	a, a
    000003C3 18 05            [12]  912 	jr	00329$
    000003C5                        913 00328$:
    000003C5 CB 7A            [ 8]  914 	bit	7, d
    000003C7 28 01            [12]  915 	jr	Z, 00329$
    000003C9 37               [ 4]  916 	scf
    000003CA                        917 00329$:
    000003CA 30 08            [12]  918 	jr	NC, 00113$
    000003CC 21r04r00         [12]  919 	ld	hl, #_SpdX
    000003CF 3E 20            [ 8]  920 	ld	a, #0x20
    000003D1 22               [ 8]  921 	ld	(hl+), a
    000003D2 AF               [ 4]  922 	xor	a, a
    000003D3 77               [ 8]  923 	ld	(hl), a
    000003D4                        924 00113$:
                                    925 ;src/metasprites.c:226: PosF |= ACC_X;
    000003D4 F8 05            [12]  926 	ldhl	sp,	#5
    000003D6 7E               [ 8]  927 	ld	a, (hl)
    000003D7 EAr08r00         [16]  928 	ld	(#_PosF),a
    000003DA                        929 00118$:
                                    930 ;src/metasprites.c:230: if (KEY_PRESSED(J_B)) {
    000003DA FAr00r00         [16]  931 	ld	a, (#_joyp)
    000003DD 21r01r00         [12]  932 	ld	hl, #_old_joyp
    000003E0 AE               [ 8]  933 	xor	a, (hl)
    000003E1 21r00r00         [12]  934 	ld	hl, #_joyp
    000003E4 A6               [ 8]  935 	and	a, (hl)
    000003E5 4F               [ 4]  936 	ld	c, a
    000003E6 CB 69            [ 8]  937 	bit	5, c
    000003E8 28 0B            [12]  938 	jr	Z, 00122$
                                    939 ;src/metasprites.c:231: idx++; if (idx >= (sizeof(sprite_metasprites) >> 1)) idx = 0;
    000003EA 21r09r00         [12]  940 	ld	hl, #_idx
    000003ED 34               [12]  941 	inc	(hl)
    000003EE 7E               [ 8]  942 	ld	a, (hl)
    000003EF D6 05            [ 8]  943 	sub	a, #0x05
    000003F1 38 02            [12]  944 	jr	C, 00122$
    000003F3 36 00            [12]  945 	ld	(hl), #0x00
    000003F5                        946 00122$:
                                    947 ;src/metasprites.c:235: if (KEY_PRESSED(J_A)) {
    000003F5 CB 61            [ 8]  948 	bit	4, c
    000003F7 28 08            [12]  949 	jr	Z, 00124$
                                    950 ;src/metasprites.c:236: rot++; rot &= 0xF;
    000003F9 21r0Ar00         [12]  951 	ld	hl, #_rot
    000003FC 34               [12]  952 	inc	(hl)
    000003FD 7E               [ 8]  953 	ld	a, (hl)
    000003FE E6 0F            [ 8]  954 	and	a, #0x0f
    00000400 77               [ 8]  955 	ld	(hl), a
    00000401                        956 00124$:
                                    957 ;src/metasprites.c:239: PosX += SpdX, PosY += SpdY; 
    00000401 FAr00r00         [16]  958 	ld	a, (#_PosX)
    00000404 21r04r00         [12]  959 	ld	hl, #_SpdX
    00000407 86               [ 8]  960 	add	a, (hl)
    00000408 21r00r00         [12]  961 	ld	hl, #_PosX
    0000040B 22               [ 8]  962 	ld	(hl+), a
    0000040C 7E               [ 8]  963 	ld	a, (hl)
    0000040D 21r05r00         [12]  964 	ld	hl, #_SpdX + 1
    00000410 8E               [ 8]  965 	adc	a, (hl)
    00000411 EAr01r00         [16]  966 	ld	(#_PosX + 1),a
    00000414 FAr02r00         [16]  967 	ld	a, (#_PosY)
    00000417 21r06r00         [12]  968 	ld	hl, #_SpdY
    0000041A 86               [ 8]  969 	add	a, (hl)
    0000041B 21r02r00         [12]  970 	ld	hl, #_PosY
    0000041E 22               [ 8]  971 	ld	(hl+), a
    0000041F 7E               [ 8]  972 	ld	a, (hl)
    00000420 21r07r00         [12]  973 	ld	hl, #_SpdY + 1
    00000423 8E               [ 8]  974 	adc	a, (hl)
    00000424 EAr03r00         [16]  975 	ld	(#_PosY + 1),a
                                    976 ;src/metasprites.c:250: uint8_t subpal = rot >> 2;
    00000427 FAr0Ar00         [16]  977 	ld	a, (#_rot)
    0000042A 0F               [ 4]  978 	rrca
    0000042B 0F               [ 4]  979 	rrca
    0000042C E6 3F            [ 8]  980 	and	a, #0x3f
    0000042E F8 05            [12]  981 	ldhl	sp,	#5
    00000430 77               [ 8]  982 	ld	(hl), a
                                    983 ;src/metasprites.c:251: switch (rot & 0x3) {
    00000431 FAr0Ar00         [16]  984 	ld	a, (#_rot)
    00000434 E6 03            [ 8]  985 	and	a, #0x03
    00000436 F8 02            [12]  986 	ldhl	sp,	#2
    00000438 77               [ 8]  987 	ld	(hl), a
                                    988 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000439 21r02r00         [12]  989 	ld	hl, #_PosY
    0000043C 2A               [ 8]  990 	ld	a, (hl+)
    0000043D 5F               [ 4]  991 	ld	e, a
    0000043E 56               [ 8]  992 	ld	d, (hl)
    0000043F CB 2A            [ 8]  993 	sra	d
    00000441 CB 1B            [ 8]  994 	rr	e
    00000443 CB 2A            [ 8]  995 	sra	d
    00000445 CB 1B            [ 8]  996 	rr	e
    00000447 CB 2A            [ 8]  997 	sra	d
    00000449 CB 1B            [ 8]  998 	rr	e
    0000044B CB 2A            [ 8]  999 	sra	d
    0000044D CB 1B            [ 8] 1000 	rr	e
                                   1001 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    0000044F 21r00r00         [12] 1002 	ld	hl, #_PosX
    00000452 2A               [ 8] 1003 	ld	a, (hl+)
    00000453 4F               [ 4] 1004 	ld	c, a
    00000454 46               [ 8] 1005 	ld	b, (hl)
    00000455 CB 28            [ 8] 1006 	sra	b
    00000457 CB 19            [ 8] 1007 	rr	c
    00000459 CB 28            [ 8] 1008 	sra	b
    0000045B CB 19            [ 8] 1009 	rr	c
    0000045D CB 28            [ 8] 1010 	sra	b
    0000045F CB 19            [ 8] 1011 	rr	c
    00000461 CB 28            [ 8] 1012 	sra	b
    00000463 CB 19            [ 8] 1013 	rr	c
                                   1014 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000465 7B               [ 4] 1015 	ld	a, e
                                   1016 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1017 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000466 C6 10            [ 8] 1018 	add	a, #0x10
    00000468 F8 03            [12] 1019 	ldhl	sp,	#3
                                   1020 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    0000046A 22               [ 8] 1021 	ld	(hl+), a
    0000046B 79               [ 4] 1022 	ld	a, c
    0000046C C6 08            [ 8] 1023 	add	a, #0x08
                                   1024 ;src/metasprites.c:251: switch (rot & 0x3) {
    0000046E 32               [ 8] 1025 	ld	(hl-), a
    0000046F 2B               [ 8] 1026 	dec	hl
    00000470 7E               [ 8] 1027 	ld	a, (hl)
    00000471 3D               [ 4] 1028 	dec	a
    00000472 28 12            [12] 1029 	jr	Z, 00125$
    00000474 F8 02            [12] 1030 	ldhl	sp,	#2
    00000476 7E               [ 8] 1031 	ld	a, (hl)
    00000477 D6 02            [ 8] 1032 	sub	a, #0x02
    00000479 28 4F            [12] 1033 	jr	Z, 00126$
    0000047B F8 02            [12] 1034 	ldhl	sp,	#2
    0000047D 7E               [ 8] 1035 	ld	a, (hl)
    0000047E D6 03            [ 8] 1036 	sub	a, #0x03
    00000480 CAr13r05         [16] 1037 	jp	Z,00127$
    00000483 C3r4Cr05         [16] 1038 	jp	00128$
                                   1039 ;src/metasprites.c:252: case 1:
    00000486                       1040 00125$:
                                   1041 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1042 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1043 ;src/metasprites.c:254: TILE_NUM_START + get_tile_offset(0, 1),
    00000486 1E 01            [ 8] 1044 	ld	e, #0x01
    00000488 AF               [ 4] 1045 	xor	a, a
    00000489 CDrE3r01         [24] 1046 	call	_get_tile_offset
    0000048C 4F               [ 4] 1047 	ld	c, a
                                   1048 ;src/metasprites.c:253: hiwater += move_metasprite_flipy( sprite_metasprites[idx],
    0000048D 11r00r00         [12] 1049 	ld	de, #_sprite_metasprites+0
    00000490 21r09r00         [12] 1050 	ld	hl, #_idx
    00000493 6E               [ 8] 1051 	ld	l, (hl)
                                   1052 ;	spillPairReg hl
                                   1053 ;	spillPairReg hl
    00000494 26 00            [ 8] 1054 	ld	h, #0x00
                                   1055 ;	spillPairReg hl
                                   1056 ;	spillPairReg hl
    00000496 29               [ 8] 1057 	add	hl, hl
    00000497 19               [ 8] 1058 	add	hl, de
    00000498 2A               [ 8] 1059 	ld	a, (hl+)
    00000499 46               [ 8] 1060 	ld	b, (hl)
                                   1061 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000049A F8 04            [12] 1062 	ldhl	sp,	#4
    0000049C 5E               [ 8] 1063 	ld	e, (hl)
                                   1064 ;../../../include/gb/metasprites.h:241: __current_metasprite = metasprite;
    0000049D 21r00r00         [12] 1065 	ld	hl, #___current_metasprite
    000004A0 22               [ 8] 1066 	ld	(hl+), a
    000004A1 70               [ 8] 1067 	ld	(hl), b
                                   1068 ;../../../include/gb/metasprites.h:242: __current_base_tile = base_tile;
    000004A2 21r00r00         [12] 1069 	ld	hl, #___current_base_tile
    000004A5 71               [ 8] 1070 	ld	(hl), c
                                   1071 ;../../../include/gb/metasprites.h:243: __current_base_prop = base_prop;
    000004A6 F8 05            [12] 1072 	ldhl	sp,	#5
    000004A8 7E               [ 8] 1073 	ld	a, (hl)
    000004A9 EAr00r00         [16] 1074 	ld	(#___current_base_prop),a
                                   1075 ;../../../include/gb/metasprites.h:244: return __move_metasprite_flipy(base_sprite, ((y - ((LCDC_REG & LCDCF_OBJ16) ? 16u : 8u)) << 8) | x);
    000004AC F8 03            [12] 1076 	ldhl	sp,	#3
    000004AE 6E               [ 8] 1077 	ld	l, (hl)
                                   1078 ;	spillPairReg hl
                                   1079 ;	spillPairReg hl
    000004AF F0r00            [12] 1080 	ldh	a, (_LCDC_REG + 0)
    000004B1 CB 57            [ 8] 1081 	bit	2, a
    000004B3 28 05            [12] 1082 	jr	Z, 00153$
    000004B5 01 10 00         [12] 1083 	ld	bc, #0x0010
    000004B8 18 03            [12] 1084 	jr	00154$
    000004BA                       1085 00153$:
    000004BA 01 08 00         [12] 1086 	ld	bc, #0x0008
    000004BD                       1087 00154$:
                                   1088 ;	spillPairReg hl
                                   1089 ;	spillPairReg hl
    000004BD 7D               [ 4] 1090 	ld	a, l
    000004BE 91               [ 4] 1091 	sub	a, c
    000004BF 57               [ 4] 1092 	ld	d, a
    000004C0 AF               [ 4] 1093 	xor	a, a
    000004C1 CDr00r00         [24] 1094 	call	___move_metasprite_flipy
                                   1095 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    000004C4 F8 05            [12] 1096 	ldhl	sp,	#5
    000004C6 77               [ 8] 1097 	ld	(hl), a
                                   1098 ;src/metasprites.c:259: break;
    000004C7 C3rA8r05         [16] 1099 	jp	00129$
                                   1100 ;src/metasprites.c:260: case 2:
    000004CA                       1101 00126$:
                                   1102 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1103 ;src/metasprites.c:265: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1104 ;src/metasprites.c:262: TILE_NUM_START + get_tile_offset(1, 1),
    000004CA 3E 01            [ 8] 1105 	ld	a,#0x01
    000004CC 5F               [ 4] 1106 	ld	e,a
    000004CD CDrE3r01         [24] 1107 	call	_get_tile_offset
    000004D0 4F               [ 4] 1108 	ld	c, a
                                   1109 ;src/metasprites.c:261: hiwater += move_metasprite_flipxy(sprite_metasprites[idx],
    000004D1 11r00r00         [12] 1110 	ld	de, #_sprite_metasprites+0
    000004D4 21r09r00         [12] 1111 	ld	hl, #_idx
    000004D7 6E               [ 8] 1112 	ld	l, (hl)
                                   1113 ;	spillPairReg hl
                                   1114 ;	spillPairReg hl
    000004D8 26 00            [ 8] 1115 	ld	h, #0x00
                                   1116 ;	spillPairReg hl
                                   1117 ;	spillPairReg hl
    000004DA 29               [ 8] 1118 	add	hl, hl
    000004DB 19               [ 8] 1119 	add	hl, de
    000004DC 2A               [ 8] 1120 	ld	a, (hl+)
    000004DD 46               [ 8] 1121 	ld	b, (hl)
                                   1122 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    000004DE F8 04            [12] 1123 	ldhl	sp,	#4
    000004E0 5E               [ 8] 1124 	ld	e, (hl)
                                   1125 ;../../../include/gb/metasprites.h:281: __current_metasprite = metasprite;
    000004E1 21r00r00         [12] 1126 	ld	hl, #___current_metasprite
    000004E4 22               [ 8] 1127 	ld	(hl+), a
    000004E5 70               [ 8] 1128 	ld	(hl), b
                                   1129 ;../../../include/gb/metasprites.h:282: __current_base_tile = base_tile;
    000004E6 21r00r00         [12] 1130 	ld	hl, #___current_base_tile
    000004E9 71               [ 8] 1131 	ld	(hl), c
                                   1132 ;../../../include/gb/metasprites.h:283: __current_base_prop = base_prop;
    000004EA F8 05            [12] 1133 	ldhl	sp,	#5
    000004EC 7E               [ 8] 1134 	ld	a, (hl)
    000004ED EAr00r00         [16] 1135 	ld	(#___current_base_prop),a
                                   1136 ;../../../include/gb/metasprites.h:284: return __move_metasprite_flipxy(base_sprite, ((y - ((LCDC_REG & LCDCF_OBJ16) ? 16u : 8u)) << 8) | (uint8_t)(x - 8));
    000004F0 F8 03            [12] 1137 	ldhl	sp,	#3
    000004F2 56               [ 8] 1138 	ld	d, (hl)
    000004F3 F0r00            [12] 1139 	ldh	a, (_LCDC_REG + 0)
    000004F5 CB 57            [ 8] 1140 	bit	2, a
    000004F7 28 05            [12] 1141 	jr	Z, 00155$
    000004F9 01 10 00         [12] 1142 	ld	bc, #0x0010
    000004FC 18 03            [12] 1143 	jr	00156$
    000004FE                       1144 00155$:
    000004FE 01 08 00         [12] 1145 	ld	bc, #0x0008
    00000501                       1146 00156$:
    00000501 7A               [ 4] 1147 	ld	a, d
    00000502 91               [ 4] 1148 	sub	a, c
    00000503 47               [ 4] 1149 	ld	b, a
    00000504 7B               [ 4] 1150 	ld	a, e
    00000505 C6 F8            [ 8] 1151 	add	a, #0xf8
    00000507 5F               [ 4] 1152 	ld	e, a
    00000508 50               [ 4] 1153 	ld	d, b
    00000509 AF               [ 4] 1154 	xor	a, a
    0000050A CDr00r00         [24] 1155 	call	___move_metasprite_flipxy
                                   1156 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000050D F8 05            [12] 1157 	ldhl	sp,	#5
    0000050F 77               [ 8] 1158 	ld	(hl), a
                                   1159 ;src/metasprites.c:267: break;
    00000510 C3rA8r05         [16] 1160 	jp	00129$
                                   1161 ;src/metasprites.c:268: case 3:
    00000513                       1162 00127$:
                                   1163 ;src/metasprites.c:274: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1164 ;src/metasprites.c:273: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1165 ;src/metasprites.c:270: TILE_NUM_START + get_tile_offset(1, 0),
    00000513 1E 00            [ 8] 1166 	ld	e, #0x00
    00000515 3E 01            [ 8] 1167 	ld	a, #0x01
    00000517 CDrE3r01         [24] 1168 	call	_get_tile_offset
    0000051A 4F               [ 4] 1169 	ld	c, a
                                   1170 ;src/metasprites.c:269: hiwater += move_metasprite_flipx( sprite_metasprites[idx],
    0000051B 21r09r00         [12] 1171 	ld	hl, #_idx
    0000051E 6E               [ 8] 1172 	ld	l, (hl)
                                   1173 ;	spillPairReg hl
                                   1174 ;	spillPairReg hl
    0000051F AF               [ 4] 1175 	xor	a, a
    00000520 67               [ 4] 1176 	ld	h, a
    00000521 29               [ 8] 1177 	add	hl, hl
    00000522 11r00r00         [12] 1178 	ld	de, #_sprite_metasprites
    00000525 19               [ 8] 1179 	add	hl, de
    00000526 2A               [ 8] 1180 	ld	a,	(hl+)
    00000527 66               [ 8] 1181 	ld	h, (hl)
                                   1182 ;	spillPairReg hl
                                   1183 ;	spillPairReg hl
                                   1184 ;	spillPairReg hl
                                   1185 ;../../../include/gb/metasprites.h:200: __current_metasprite = metasprite;
    00000528 5F               [ 4] 1186 	ld	e, a
    00000529 54               [ 4] 1187 	ld	d, h
    0000052A 21r00r00         [12] 1188 	ld	hl, #___current_metasprite
    0000052D 7B               [ 4] 1189 	ld	a, e
    0000052E 22               [ 8] 1190 	ld	(hl+), a
    0000052F 72               [ 8] 1191 	ld	(hl), d
                                   1192 ;../../../include/gb/metasprites.h:201: __current_base_tile = base_tile;
    00000530 21r00r00         [12] 1193 	ld	hl, #___current_base_tile
    00000533 71               [ 8] 1194 	ld	(hl), c
                                   1195 ;../../../include/gb/metasprites.h:202: __current_base_prop = base_prop;
    00000534 F8 05            [12] 1196 	ldhl	sp,	#5
    00000536 7E               [ 8] 1197 	ld	a, (hl)
    00000537 EAr00r00         [16] 1198 	ld	(#___current_base_prop),a
                                   1199 ;../../../include/gb/metasprites.h:203: return __move_metasprite_flipx(base_sprite, (y << 8) | (uint8_t)(x - 8u));
    0000053A F8 03            [12] 1200 	ldhl	sp,	#3
    0000053C 2A               [ 8] 1201 	ld	a, (hl+)
    0000053D 47               [ 4] 1202 	ld	b, a
    0000053E 7E               [ 8] 1203 	ld	a, (hl)
    0000053F C6 F8            [ 8] 1204 	add	a, #0xf8
    00000541 5F               [ 4] 1205 	ld	e, a
    00000542 50               [ 4] 1206 	ld	d, b
    00000543 AF               [ 4] 1207 	xor	a, a
    00000544 CDr00r00         [24] 1208 	call	___move_metasprite_flipx
    00000547 F8 05            [12] 1209 	ldhl	sp,	#5
    00000549 77               [ 8] 1210 	ld	(hl), a
                                   1211 ;src/metasprites.c:275: break;
    0000054A 18 5C            [12] 1212 	jr	00129$
                                   1213 ;src/metasprites.c:276: default:
    0000054C                       1214 00128$:
                                   1215 ;src/metasprites.c:282: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000054C F8 03            [12] 1216 	ldhl	sp,	#3
    0000054E 7E               [ 8] 1217 	ld	a, (hl)
    0000054F F8 00            [12] 1218 	ldhl	sp,	#0
    00000551 77               [ 8] 1219 	ld	(hl), a
                                   1220 ;src/metasprites.c:281: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    00000552 F8 04            [12] 1221 	ldhl	sp,	#4
    00000554 7E               [ 8] 1222 	ld	a, (hl)
    00000555 F8 01            [12] 1223 	ldhl	sp,	#1
    00000557 77               [ 8] 1224 	ld	(hl), a
    00000558 F8 05            [12] 1225 	ldhl	sp,	#5
    0000055A 7E               [ 8] 1226 	ld	a, (hl)
    0000055B F8 02            [12] 1227 	ldhl	sp,	#2
    0000055D 77               [ 8] 1228 	ld	(hl), a
                                   1229 ;src/metasprites.c:278: TILE_NUM_START + get_tile_offset(0, 0),
    0000055E AF               [ 4] 1230 	xor	a, a
    0000055F 5F               [ 4] 1231 	ld	e, a
    00000560 CDrE3r01         [24] 1232 	call	_get_tile_offset
    00000563 F8 03            [12] 1233 	ldhl	sp,	#3
    00000565 77               [ 8] 1234 	ld	(hl), a
                                   1235 ;src/metasprites.c:277: hiwater += move_metasprite_ex(    sprite_metasprites[idx],
    00000566 21r09r00         [12] 1236 	ld	hl, #_idx
    00000569 6E               [ 8] 1237 	ld	l, (hl)
                                   1238 ;	spillPairReg hl
                                   1239 ;	spillPairReg hl
    0000056A AF               [ 4] 1240 	xor	a, a
    0000056B 67               [ 4] 1241 	ld	h, a
    0000056C 29               [ 8] 1242 	add	hl, hl
    0000056D 11r00r00         [12] 1243 	ld	de, #_sprite_metasprites
    00000570 19               [ 8] 1244 	add	hl, de
    00000571 5D               [ 4] 1245 	ld	e, l
    00000572 54               [ 4] 1246 	ld	d, h
    00000573 1A               [ 8] 1247 	ld	a, (de)
    00000574 F8 04            [12] 1248 	ldhl	sp,	#4
    00000576 22               [ 8] 1249 	ld	(hl+), a
    00000577 13               [ 8] 1250 	inc	de
    00000578 1A               [ 8] 1251 	ld	a, (de)
    00000579 77               [ 8] 1252 	ld	(hl), a
                                   1253 ;../../../include/gb/metasprites.h:160: __current_metasprite = metasprite;
    0000057A F8 04            [12] 1254 	ldhl	sp,	#4
    0000057C 7E               [ 8] 1255 	ld	a, (hl)
    0000057D EAr00r00         [16] 1256 	ld	(#___current_metasprite),a
    00000580 F8 05            [12] 1257 	ldhl	sp,	#5
    00000582 7E               [ 8] 1258 	ld	a, (hl)
    00000583 EAr01r00         [16] 1259 	ld	(#___current_metasprite + 1),a
                                   1260 ;../../../include/gb/metasprites.h:161: __current_base_tile = base_tile;
    00000586 F8 03            [12] 1261 	ldhl	sp,	#3
    00000588 7E               [ 8] 1262 	ld	a, (hl)
    00000589 EAr00r00         [16] 1263 	ld	(#___current_base_tile),a
                                   1264 ;../../../include/gb/metasprites.h:162: __current_base_prop = base_prop;
    0000058C F8 02            [12] 1265 	ldhl	sp,	#2
    0000058E 7E               [ 8] 1266 	ld	a, (hl)
    0000058F EAr00r00         [16] 1267 	ld	(#___current_base_prop),a
                                   1268 ;../../../include/gb/metasprites.h:163: return __move_metasprite(base_sprite, (y << 8) | (uint8_t)x);
    00000592 F8 00            [12] 1269 	ldhl	sp,	#0
    00000594 4E               [ 8] 1270 	ld	c, (hl)
    00000595 F8 05            [12] 1271 	ldhl	sp,	#5
    00000597 79               [ 4] 1272 	ld	a, c
    00000598 32               [ 8] 1273 	ld	(hl-), a
    00000599 36 00            [12] 1274 	ld	(hl), #0x00
    0000059B F8 01            [12] 1275 	ldhl	sp,	#1
    0000059D 5E               [ 8] 1276 	ld	e, (hl)
    0000059E F8 05            [12] 1277 	ldhl	sp,	#5
    000005A0 56               [ 8] 1278 	ld	d, (hl)
    000005A1 AF               [ 4] 1279 	xor	a, a
    000005A2 CDr00r00         [24] 1280 	call	___move_metasprite
    000005A5 F8 05            [12] 1281 	ldhl	sp,	#5
    000005A7 77               [ 8] 1282 	ld	(hl), a
                                   1283 ;src/metasprites.c:284: }
    000005A8                       1284 00129$:
                                   1285 ;src/metasprites.c:287: hide_sprites_range(hiwater, MAX_HARDWARE_SPRITES);        
    000005A8 1E 28            [ 8] 1286 	ld	e, #0x28
    000005AA F8 05            [12] 1287 	ldhl	sp,	#5
    000005AC 7E               [ 8] 1288 	ld	a, (hl)
    000005AD CDr00r00         [24] 1289 	call	_hide_sprites_range
                                   1290 ;src/metasprites.c:290: if (!(PosF & ACC_Y)) {
    000005B0 21r08r00         [12] 1291 	ld	hl, #_PosF
    000005B3 4E               [ 8] 1292 	ld	c, (hl)
    000005B4 CB 49            [ 8] 1293 	bit	1, c
    000005B6 20 36            [12] 1294 	jr	NZ, 00136$
                                   1295 ;src/metasprites.c:291: if (SpdY != 0) {
    000005B8 21r07r00         [12] 1296 	ld	hl, #_SpdY + 1
    000005BB 3A               [ 8] 1297 	ld	a, (hl-)
    000005BC B6               [ 8] 1298 	or	a, (hl)
    000005BD 28 2F            [12] 1299 	jr	Z, 00136$
                                   1300 ;src/metasprites.c:292: if (SpdY > 0) SpdY--;
    000005BF 2A               [ 8] 1301 	ld	a, (hl+)
    000005C0 47               [ 4] 1302 	ld	b, a
    000005C1 6E               [ 8] 1303 	ld	l, (hl)
                                   1304 ;	spillPairReg hl
                                   1305 ;	spillPairReg hl
    000005C2 5D               [ 4] 1306 	ld	e, l
    000005C3 AF               [ 4] 1307 	xor	a, a
    000005C4 57               [ 4] 1308 	ld	d, a
    000005C5 B8               [ 4] 1309 	cp	a, b
    000005C6 9D               [ 4] 1310 	sbc	a, l
    000005C7 CB 7B            [ 8] 1311 	bit	7, e
    000005C9 28 07            [12] 1312 	jr	Z, 00339$
    000005CB CB 7A            [ 8] 1313 	bit	7, d
    000005CD 20 08            [12] 1314 	jr	NZ, 00340$
    000005CF BF               [ 4] 1315 	cp	a, a
    000005D0 18 05            [12] 1316 	jr	00340$
    000005D2                       1317 00339$:
    000005D2 CB 7A            [ 8] 1318 	bit	7, d
    000005D4 28 01            [12] 1319 	jr	Z, 00340$
    000005D6 37               [ 4] 1320 	scf
    000005D7                       1321 00340$:
    000005D7 30 0D            [12] 1322 	jr	NC, 00131$
    000005D9 21r06r00         [12] 1323 	ld	hl, #_SpdY
    000005DC 2A               [ 8] 1324 	ld	a, (hl+)
    000005DD 5F               [ 4] 1325 	ld	e, a
    000005DE 3A               [ 8] 1326 	ld	a, (hl-)
    000005DF 57               [ 4] 1327 	ld	d, a
    000005E0 1B               [ 8] 1328 	dec	de
    000005E1 7B               [ 4] 1329 	ld	a, e
    000005E2 22               [ 8] 1330 	ld	(hl+), a
    000005E3 72               [ 8] 1331 	ld	(hl), d
    000005E4 18 08            [12] 1332 	jr	00136$
    000005E6                       1333 00131$:
                                   1334 ;src/metasprites.c:293: else SpdY ++;
    000005E6 21r06r00         [12] 1335 	ld	hl, #_SpdY
    000005E9 34               [12] 1336 	inc	(hl)
    000005EA 20 02            [12] 1337 	jr	NZ, 00341$
    000005EC 23               [ 8] 1338 	inc	hl
    000005ED 34               [12] 1339 	inc	(hl)
    000005EE                       1340 00341$:
    000005EE                       1341 00136$:
                                   1342 ;src/metasprites.c:298: if (!(PosF & ACC_X)) {
    000005EE CB 41            [ 8] 1343 	bit	0, c
    000005F0 20 36            [12] 1344 	jr	NZ, 00143$
                                   1345 ;src/metasprites.c:299: if (SpdX != 0) {
    000005F2 21r05r00         [12] 1346 	ld	hl, #_SpdX + 1
    000005F5 3A               [ 8] 1347 	ld	a, (hl-)
    000005F6 B6               [ 8] 1348 	or	a, (hl)
    000005F7 28 2F            [12] 1349 	jr	Z, 00143$
                                   1350 ;src/metasprites.c:300: if (SpdX > 0) SpdX--;
    000005F9 2A               [ 8] 1351 	ld	a, (hl+)
    000005FA 4F               [ 4] 1352 	ld	c, a
    000005FB 46               [ 8] 1353 	ld	b, (hl)
    000005FC 58               [ 4] 1354 	ld	e, b
    000005FD AF               [ 4] 1355 	xor	a, a
    000005FE 57               [ 4] 1356 	ld	d, a
    000005FF B9               [ 4] 1357 	cp	a, c
    00000600 98               [ 4] 1358 	sbc	a, b
    00000601 CB 7B            [ 8] 1359 	bit	7, e
    00000603 28 07            [12] 1360 	jr	Z, 00344$
    00000605 CB 7A            [ 8] 1361 	bit	7, d
    00000607 20 08            [12] 1362 	jr	NZ, 00345$
    00000609 BF               [ 4] 1363 	cp	a, a
    0000060A 18 05            [12] 1364 	jr	00345$
    0000060C                       1365 00344$:
    0000060C CB 7A            [ 8] 1366 	bit	7, d
    0000060E 28 01            [12] 1367 	jr	Z, 00345$
    00000610 37               [ 4] 1368 	scf
    00000611                       1369 00345$:
    00000611 30 0D            [12] 1370 	jr	NC, 00138$
    00000613 21r04r00         [12] 1371 	ld	hl, #_SpdX
    00000616 2A               [ 8] 1372 	ld	a, (hl+)
    00000617 5F               [ 4] 1373 	ld	e, a
    00000618 3A               [ 8] 1374 	ld	a, (hl-)
    00000619 57               [ 4] 1375 	ld	d, a
    0000061A 1B               [ 8] 1376 	dec	de
    0000061B 7B               [ 4] 1377 	ld	a, e
    0000061C 22               [ 8] 1378 	ld	(hl+), a
    0000061D 72               [ 8] 1379 	ld	(hl), d
    0000061E 18 08            [12] 1380 	jr	00143$
    00000620                       1381 00138$:
                                   1382 ;src/metasprites.c:301: else SpdX ++;
    00000620 21r04r00         [12] 1383 	ld	hl, #_SpdX
    00000623 34               [12] 1384 	inc	(hl)
    00000624 20 02            [12] 1385 	jr	NZ, 00346$
    00000626 23               [ 8] 1386 	inc	hl
    00000627 34               [12] 1387 	inc	(hl)
    00000628                       1388 00346$:
    00000628                       1389 00143$:
                                   1390 ;src/metasprites.c:307: vsync();
    00000628 CDr00r00         [24] 1391 	call	_vsync
    0000062B C3rB7r02         [16] 1392 	jp	00145$
                                   1393 ;src/metasprites.c:309: }
    0000062E E8 06            [16] 1394 	add	sp, #6
    00000630 C9               [16] 1395 	ret
    00000631                       1396 _gray_pal:
    00000631 FF 7F                 1397 	.dw #0x7fff
    00000633 B5 56                 1398 	.dw #0x56b5
    00000635 4A 29                 1399 	.dw #0x294a
    00000637 00 00                 1400 	.dw #0x0000
    00000639                       1401 _pink_pal:
    00000639 FF 7F                 1402 	.dw #0x7fff
    0000063B 1F 7C                 1403 	.dw #0x7c1f
    0000063D 15 54                 1404 	.dw #0x5415
    0000063F 0A 28                 1405 	.dw #0x280a
    00000641                       1406 _cyan_pal:
    00000641 FF 7F                 1407 	.dw #0x7fff
    00000643 EA 7F                 1408 	.dw #0x7fea
    00000645 A0 56                 1409 	.dw #0x56a0
    00000647 40 29                 1410 	.dw #0x2940
    00000649                       1411 _green_pal:
    00000649 FF 7F                 1412 	.dw #0x7fff
    0000064B F5 57                 1413 	.dw #0x57f5
    0000064D A0 02                 1414 	.dw #0x02a0
    0000064F 40 01                 1415 	.dw #0x0140
                                   1416 	.area _CODE
                                   1417 	.area _INITIALIZER
    00000000                       1418 __xinit__joyp:
    00000000 00                    1419 	.db #0x00	; 0
    00000001                       1420 __xinit__old_joyp:
    00000001 00                    1421 	.db #0x00	; 0
                                   1422 	.area _CABS (ABS)
