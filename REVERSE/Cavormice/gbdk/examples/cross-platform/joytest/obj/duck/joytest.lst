                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.4.1 #14650 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module joytest
                                      6 	.optsdcc -msm83
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _main
                                     12 	.globl _reset_object_pos
                                     13 	.globl _draw_disabled
                                     14 	.globl _draw_buttons
                                     15 	.globl _sgb_check
                                     16 	.globl _fill_bkg_rect
                                     17 	.globl _set_sprite_data
                                     18 	.globl _set_bkg_tiles
                                     19 	.globl _set_bkg_data
                                     20 	.globl _vsync
                                     21 	.globl _joypad_ex
                                     22 	.globl _joypad_init
                                     23 	.globl _joypad
                                     24 	.globl _joy
                                     25 	.globl _old_joy
                                     26 	.globl _isSGB
                                     27 	.globl _toggle
                                     28 	.globl _joypads
                                     29 	.globl _old_joypads
                                     30 ;--------------------------------------------------------
                                     31 ; special function registers
                                     32 ;--------------------------------------------------------
                                     33 ;--------------------------------------------------------
                                     34 ; ram data
                                     35 ;--------------------------------------------------------
                                     36 	.area _DATA
    00000000                         37 _old_joypads::
    00000000                         38 	.ds 5
    00000005                         39 _joypads::
    00000005                         40 	.ds 5
                                     41 ;--------------------------------------------------------
                                     42 ; ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area _INITIALIZED
    00000000                         45 _toggle::
    00000000                         46 	.ds 1
    00000001                         47 _isSGB::
    00000001                         48 	.ds 1
    00000002                         49 _old_joy::
    00000002                         50 	.ds 1
    00000003                         51 _joy::
    00000003                         52 	.ds 1
                                     53 ;--------------------------------------------------------
                                     54 ; absolute external ram data
                                     55 ;--------------------------------------------------------
                                     56 	.area _DABS (ABS)
                                     57 ;--------------------------------------------------------
                                     58 ; global & static initialisations
                                     59 ;--------------------------------------------------------
                                     60 	.area _HOME
                                     61 	.area _GSINIT
                                     62 	.area _GSFINAL
                                     63 	.area _GSINIT
                                     64 ;--------------------------------------------------------
                                     65 ; Home
                                     66 ;--------------------------------------------------------
                                     67 	.area _HOME
                                     68 	.area _HOME
                                     69 ;--------------------------------------------------------
                                     70 ; code
                                     71 ;--------------------------------------------------------
                                     72 	.area _CODE
                                     73 ;src/joytest.c:13: void draw_buttons(uint8_t state, uint8_t x, uint8_t y) {
                                     74 ;	---------------------------------
                                     75 ; Function draw_buttons
                                     76 ; ---------------------------------
    00000000                         77 _draw_buttons::
    00000000 3B               [ 8]   78 	dec	sp
    00000001 4F               [ 4]   79 	ld	c, a
    00000002 43               [ 4]   80 	ld	b, e
                                     81 ;src/joytest.c:14: set_bkg_based_tiles(x,      y, 2, 2, (state & J_UP)     ? pressed_buttons[0] : normal_buttons[0], 1);
    00000003 CB 51            [ 8]   82 	bit	2, c
    00000005 28 05            [12]   83 	jr	Z, 00111$
    00000007 11r00r00         [12]   84 	ld	de, #_pressed_buttons+0
    0000000A 18 03            [12]   85 	jr	00112$
    0000000C                         86 00111$:
    0000000C 11r00r00         [12]   87 	ld	de, #_normal_buttons+0
    0000000F                         88 00112$:
    0000000F F8 03            [12]   89 	ldhl	sp,	#3
    00000011 7E               [ 8]   90 	ld	a, (hl)
    00000012 F8 00            [12]   91 	ldhl	sp,	#0
    00000014 77               [ 8]   92 	ld	(hl), a
                                     93 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    00000015 21r00r00         [12]   94 	ld	hl, #__map_tile_offset
    00000018 36 01            [12]   95 	ld	(hl), #0x01
                                     96 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    0000001A D5               [16]   97 	push	de
    0000001B 21 02 02         [12]   98 	ld	hl, #0x202
    0000001E E5               [16]   99 	push	hl
    0000001F F8 04            [12]  100 	ldhl	sp,	#4
    00000021 7E               [ 8]  101 	ld	a, (hl)
    00000022 F5               [16]  102 	push	af
    00000023 33               [ 8]  103 	inc	sp
    00000024 C5               [16]  104 	push	bc
    00000025 33               [ 8]  105 	inc	sp
    00000026 CDr00r00         [24]  106 	call	_set_bkg_tiles
    00000029 E8 06            [16]  107 	add	sp, #6
                                    108 ;../../../include/gb/gb.h:1172: _map_tile_offset = 0;
    0000002B 21r00r00         [12]  109 	ld	hl, #__map_tile_offset
    0000002E 36 00            [12]  110 	ld	(hl), #0x00
                                    111 ;src/joytest.c:15: set_bkg_based_tiles(x + 2,  y, 2, 2, (state & J_DOWN)   ? pressed_buttons[1] : normal_buttons[1], 1);
    00000030 CB 59            [ 8]  112 	bit	3, c
    00000032 28 05            [12]  113 	jr	Z, 00113$
    00000034 11r04r00         [12]  114 	ld	de, #_pressed_buttons+4
    00000037 18 03            [12]  115 	jr	00114$
    00000039                        116 00113$:
    00000039 11r04r00         [12]  117 	ld	de, #_normal_buttons+4
    0000003C                        118 00114$:
    0000003C 78               [ 4]  119 	ld	a, b
    0000003D 3C               [ 4]  120 	inc	a
    0000003E 3C               [ 4]  121 	inc	a
                                    122 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    0000003F 21r00r00         [12]  123 	ld	hl, #__map_tile_offset
    00000042 36 01            [12]  124 	ld	(hl), #0x01
                                    125 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    00000044 D5               [16]  126 	push	de
    00000045 26 02            [ 8]  127 	ld	h, #0x02
                                    128 ;	spillPairReg hl
                                    129 ;	spillPairReg hl
    00000047 E5               [16]  130 	push	hl
    00000048 33               [ 8]  131 	inc	sp
    00000049 26 02            [ 8]  132 	ld	h, #0x02
                                    133 ;	spillPairReg hl
                                    134 ;	spillPairReg hl
    0000004B E5               [16]  135 	push	hl
    0000004C 33               [ 8]  136 	inc	sp
    0000004D F8 04            [12]  137 	ldhl	sp,	#4
    0000004F 66               [ 8]  138 	ld	h, (hl)
                                    139 ;	spillPairReg hl
                                    140 ;	spillPairReg hl
    00000050 E5               [16]  141 	push	hl
    00000051 33               [ 8]  142 	inc	sp
    00000052 F5               [16]  143 	push	af
    00000053 33               [ 8]  144 	inc	sp
    00000054 CDr00r00         [24]  145 	call	_set_bkg_tiles
    00000057 E8 06            [16]  146 	add	sp, #6
                                    147 ;../../../include/gb/gb.h:1172: _map_tile_offset = 0;
    00000059 21r00r00         [12]  148 	ld	hl, #__map_tile_offset
    0000005C 36 00            [12]  149 	ld	(hl), #0x00
                                    150 ;src/joytest.c:16: set_bkg_based_tiles(x + 4,  y, 2, 2, (state & J_LEFT)   ? pressed_buttons[2] : normal_buttons[2], 1);
    0000005E CB 49            [ 8]  151 	bit	1, c
    00000060 28 05            [12]  152 	jr	Z, 00115$
    00000062 11r08r00         [12]  153 	ld	de, #_pressed_buttons+8
    00000065 18 03            [12]  154 	jr	00116$
    00000067                        155 00115$:
    00000067 11r08r00         [12]  156 	ld	de, #_normal_buttons+8
    0000006A                        157 00116$:
    0000006A 78               [ 4]  158 	ld	a, b
    0000006B 3C               [ 4]  159 	inc	a
    0000006C 3C               [ 4]  160 	inc	a
    0000006D 3C               [ 4]  161 	inc	a
    0000006E 3C               [ 4]  162 	inc	a
                                    163 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    0000006F 21r00r00         [12]  164 	ld	hl, #__map_tile_offset
    00000072 36 01            [12]  165 	ld	(hl), #0x01
                                    166 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    00000074 D5               [16]  167 	push	de
    00000075 26 02            [ 8]  168 	ld	h, #0x02
                                    169 ;	spillPairReg hl
                                    170 ;	spillPairReg hl
    00000077 E5               [16]  171 	push	hl
    00000078 33               [ 8]  172 	inc	sp
    00000079 26 02            [ 8]  173 	ld	h, #0x02
                                    174 ;	spillPairReg hl
                                    175 ;	spillPairReg hl
    0000007B E5               [16]  176 	push	hl
    0000007C 33               [ 8]  177 	inc	sp
    0000007D F8 04            [12]  178 	ldhl	sp,	#4
    0000007F 66               [ 8]  179 	ld	h, (hl)
                                    180 ;	spillPairReg hl
                                    181 ;	spillPairReg hl
    00000080 E5               [16]  182 	push	hl
    00000081 33               [ 8]  183 	inc	sp
    00000082 F5               [16]  184 	push	af
    00000083 33               [ 8]  185 	inc	sp
    00000084 CDr00r00         [24]  186 	call	_set_bkg_tiles
    00000087 E8 06            [16]  187 	add	sp, #6
                                    188 ;../../../include/gb/gb.h:1172: _map_tile_offset = 0;
    00000089 21r00r00         [12]  189 	ld	hl, #__map_tile_offset
    0000008C 36 00            [12]  190 	ld	(hl), #0x00
                                    191 ;src/joytest.c:17: set_bkg_based_tiles(x + 6,  y, 2, 2, (state & J_RIGHT)  ? pressed_buttons[3] : normal_buttons[3], 1);
    0000008E CB 41            [ 8]  192 	bit	0, c
    00000090 28 05            [12]  193 	jr	Z, 00117$
    00000092 11r0Cr00         [12]  194 	ld	de, #_pressed_buttons+12
    00000095 18 03            [12]  195 	jr	00118$
    00000097                        196 00117$:
    00000097 11r0Cr00         [12]  197 	ld	de, #_normal_buttons+12
    0000009A                        198 00118$:
    0000009A 78               [ 4]  199 	ld	a, b
    0000009B C6 06            [ 8]  200 	add	a, #0x06
                                    201 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    0000009D 21r00r00         [12]  202 	ld	hl, #__map_tile_offset
    000000A0 36 01            [12]  203 	ld	(hl), #0x01
                                    204 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    000000A2 D5               [16]  205 	push	de
    000000A3 26 02            [ 8]  206 	ld	h, #0x02
                                    207 ;	spillPairReg hl
                                    208 ;	spillPairReg hl
    000000A5 E5               [16]  209 	push	hl
    000000A6 33               [ 8]  210 	inc	sp
    000000A7 26 02            [ 8]  211 	ld	h, #0x02
                                    212 ;	spillPairReg hl
                                    213 ;	spillPairReg hl
    000000A9 E5               [16]  214 	push	hl
    000000AA 33               [ 8]  215 	inc	sp
    000000AB F8 04            [12]  216 	ldhl	sp,	#4
    000000AD 66               [ 8]  217 	ld	h, (hl)
                                    218 ;	spillPairReg hl
                                    219 ;	spillPairReg hl
    000000AE E5               [16]  220 	push	hl
    000000AF 33               [ 8]  221 	inc	sp
    000000B0 F5               [16]  222 	push	af
    000000B1 33               [ 8]  223 	inc	sp
    000000B2 CDr00r00         [24]  224 	call	_set_bkg_tiles
    000000B5 E8 06            [16]  225 	add	sp, #6
                                    226 ;../../../include/gb/gb.h:1172: _map_tile_offset = 0;
    000000B7 21r00r00         [12]  227 	ld	hl, #__map_tile_offset
    000000BA 36 00            [12]  228 	ld	(hl), #0x00
                                    229 ;src/joytest.c:18: set_bkg_based_tiles(x + 8,  y, 2, 2, (state & J_A)      ? pressed_buttons[4] : normal_buttons[4], 1);
    000000BC CB 61            [ 8]  230 	bit	4, c
    000000BE 28 05            [12]  231 	jr	Z, 00119$
    000000C0 11r10r00         [12]  232 	ld	de, #_pressed_buttons+16
    000000C3 18 03            [12]  233 	jr	00120$
    000000C5                        234 00119$:
    000000C5 11r10r00         [12]  235 	ld	de, #_normal_buttons+16
    000000C8                        236 00120$:
    000000C8 78               [ 4]  237 	ld	a, b
    000000C9 C6 08            [ 8]  238 	add	a, #0x08
                                    239 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    000000CB 21r00r00         [12]  240 	ld	hl, #__map_tile_offset
    000000CE 36 01            [12]  241 	ld	(hl), #0x01
                                    242 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    000000D0 D5               [16]  243 	push	de
    000000D1 26 02            [ 8]  244 	ld	h, #0x02
                                    245 ;	spillPairReg hl
                                    246 ;	spillPairReg hl
    000000D3 E5               [16]  247 	push	hl
    000000D4 33               [ 8]  248 	inc	sp
    000000D5 26 02            [ 8]  249 	ld	h, #0x02
                                    250 ;	spillPairReg hl
                                    251 ;	spillPairReg hl
    000000D7 E5               [16]  252 	push	hl
    000000D8 33               [ 8]  253 	inc	sp
    000000D9 F8 04            [12]  254 	ldhl	sp,	#4
    000000DB 66               [ 8]  255 	ld	h, (hl)
                                    256 ;	spillPairReg hl
                                    257 ;	spillPairReg hl
    000000DC E5               [16]  258 	push	hl
    000000DD 33               [ 8]  259 	inc	sp
    000000DE F5               [16]  260 	push	af
    000000DF 33               [ 8]  261 	inc	sp
    000000E0 CDr00r00         [24]  262 	call	_set_bkg_tiles
    000000E3 E8 06            [16]  263 	add	sp, #6
                                    264 ;../../../include/gb/gb.h:1172: _map_tile_offset = 0;
    000000E5 21r00r00         [12]  265 	ld	hl, #__map_tile_offset
    000000E8 36 00            [12]  266 	ld	(hl), #0x00
                                    267 ;src/joytest.c:19: set_bkg_based_tiles(x + 10, y, 2, 2, (state & J_B)      ? pressed_buttons[5] : normal_buttons[5], 1);
    000000EA CB 69            [ 8]  268 	bit	5, c
    000000EC 28 05            [12]  269 	jr	Z, 00121$
    000000EE 11r14r00         [12]  270 	ld	de, #_pressed_buttons+20
    000000F1 18 03            [12]  271 	jr	00122$
    000000F3                        272 00121$:
    000000F3 11r14r00         [12]  273 	ld	de, #_normal_buttons+20
    000000F6                        274 00122$:
    000000F6 78               [ 4]  275 	ld	a, b
    000000F7 C6 0A            [ 8]  276 	add	a, #0x0a
                                    277 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    000000F9 21r00r00         [12]  278 	ld	hl, #__map_tile_offset
    000000FC 36 01            [12]  279 	ld	(hl), #0x01
                                    280 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    000000FE D5               [16]  281 	push	de
    000000FF 26 02            [ 8]  282 	ld	h, #0x02
                                    283 ;	spillPairReg hl
                                    284 ;	spillPairReg hl
    00000101 E5               [16]  285 	push	hl
    00000102 33               [ 8]  286 	inc	sp
    00000103 26 02            [ 8]  287 	ld	h, #0x02
                                    288 ;	spillPairReg hl
                                    289 ;	spillPairReg hl
    00000105 E5               [16]  290 	push	hl
    00000106 33               [ 8]  291 	inc	sp
    00000107 F8 04            [12]  292 	ldhl	sp,	#4
    00000109 66               [ 8]  293 	ld	h, (hl)
                                    294 ;	spillPairReg hl
                                    295 ;	spillPairReg hl
    0000010A E5               [16]  296 	push	hl
    0000010B 33               [ 8]  297 	inc	sp
    0000010C F5               [16]  298 	push	af
    0000010D 33               [ 8]  299 	inc	sp
    0000010E CDr00r00         [24]  300 	call	_set_bkg_tiles
    00000111 E8 06            [16]  301 	add	sp, #6
                                    302 ;../../../include/gb/gb.h:1172: _map_tile_offset = 0;
    00000113 21r00r00         [12]  303 	ld	hl, #__map_tile_offset
    00000116 36 00            [12]  304 	ld	(hl), #0x00
                                    305 ;src/joytest.c:20: set_bkg_based_tiles(x + 12, y, 2, 2, (state & J_START)  ? pressed_buttons[6] : normal_buttons[6], 1);
    00000118 CB 79            [ 8]  306 	bit	7, c
    0000011A 28 05            [12]  307 	jr	Z, 00123$
    0000011C 11r18r00         [12]  308 	ld	de, #_pressed_buttons+24
    0000011F 18 03            [12]  309 	jr	00124$
    00000121                        310 00123$:
    00000121 11r18r00         [12]  311 	ld	de, #_normal_buttons+24
    00000124                        312 00124$:
    00000124 78               [ 4]  313 	ld	a, b
    00000125 C6 0C            [ 8]  314 	add	a, #0x0c
                                    315 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    00000127 21r00r00         [12]  316 	ld	hl, #__map_tile_offset
    0000012A 36 01            [12]  317 	ld	(hl), #0x01
                                    318 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    0000012C D5               [16]  319 	push	de
    0000012D 26 02            [ 8]  320 	ld	h, #0x02
                                    321 ;	spillPairReg hl
                                    322 ;	spillPairReg hl
    0000012F E5               [16]  323 	push	hl
    00000130 33               [ 8]  324 	inc	sp
    00000131 26 02            [ 8]  325 	ld	h, #0x02
                                    326 ;	spillPairReg hl
                                    327 ;	spillPairReg hl
    00000133 E5               [16]  328 	push	hl
    00000134 33               [ 8]  329 	inc	sp
    00000135 F8 04            [12]  330 	ldhl	sp,	#4
    00000137 66               [ 8]  331 	ld	h, (hl)
                                    332 ;	spillPairReg hl
                                    333 ;	spillPairReg hl
    00000138 E5               [16]  334 	push	hl
    00000139 33               [ 8]  335 	inc	sp
    0000013A F5               [16]  336 	push	af
    0000013B 33               [ 8]  337 	inc	sp
    0000013C CDr00r00         [24]  338 	call	_set_bkg_tiles
    0000013F E8 06            [16]  339 	add	sp, #6
                                    340 ;../../../include/gb/gb.h:1172: _map_tile_offset = 0;
    00000141 21r00r00         [12]  341 	ld	hl, #__map_tile_offset
    00000144 36 00            [12]  342 	ld	(hl), #0x00
                                    343 ;src/joytest.c:21: set_bkg_based_tiles(x + 14, y, 2, 2, (state & J_SELECT) ? pressed_buttons[7] : normal_buttons[7], 1);
    00000146 CB 71            [ 8]  344 	bit	6, c
    00000148 28 05            [12]  345 	jr	Z, 00125$
    0000014A 11r1Cr00         [12]  346 	ld	de, #_pressed_buttons+28
    0000014D 18 03            [12]  347 	jr	00126$
    0000014F                        348 00125$:
    0000014F 11r1Cr00         [12]  349 	ld	de, #_normal_buttons+28
    00000152                        350 00126$:
    00000152 78               [ 4]  351 	ld	a, b
    00000153 C6 0E            [ 8]  352 	add	a, #0x0e
                                    353 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    00000155 21r00r00         [12]  354 	ld	hl, #__map_tile_offset
    00000158 36 01            [12]  355 	ld	(hl), #0x01
                                    356 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    0000015A D5               [16]  357 	push	de
    0000015B 26 02            [ 8]  358 	ld	h, #0x02
                                    359 ;	spillPairReg hl
                                    360 ;	spillPairReg hl
    0000015D E5               [16]  361 	push	hl
    0000015E 33               [ 8]  362 	inc	sp
    0000015F 26 02            [ 8]  363 	ld	h, #0x02
                                    364 ;	spillPairReg hl
                                    365 ;	spillPairReg hl
    00000161 E5               [16]  366 	push	hl
    00000162 33               [ 8]  367 	inc	sp
    00000163 F8 04            [12]  368 	ldhl	sp,	#4
    00000165 66               [ 8]  369 	ld	h, (hl)
                                    370 ;	spillPairReg hl
                                    371 ;	spillPairReg hl
    00000166 E5               [16]  372 	push	hl
    00000167 33               [ 8]  373 	inc	sp
    00000168 F5               [16]  374 	push	af
    00000169 33               [ 8]  375 	inc	sp
    0000016A CDr00r00         [24]  376 	call	_set_bkg_tiles
    0000016D E8 06            [16]  377 	add	sp, #6
                                    378 ;../../../include/gb/gb.h:1172: _map_tile_offset = 0;
    0000016F 21r00r00         [12]  379 	ld	hl, #__map_tile_offset
    00000172 36 00            [12]  380 	ld	(hl), #0x00
                                    381 ;src/joytest.c:21: set_bkg_based_tiles(x + 14, y, 2, 2, (state & J_SELECT) ? pressed_buttons[7] : normal_buttons[7], 1);
                                    382 ;src/joytest.c:22: }
    00000174 33               [ 8]  383 	inc	sp
    00000175 E1               [12]  384 	pop	hl
    00000176 33               [ 8]  385 	inc	sp
    00000177 E9               [ 4]  386 	jp	(hl)
                                    387 ;src/joytest.c:24: void draw_disabled(uint8_t x, uint8_t y) {
                                    388 ;	---------------------------------
                                    389 ; Function draw_disabled
                                    390 ; ---------------------------------
    00000178                        391 _draw_disabled::
    00000178 4F               [ 4]  392 	ld	c, a
    00000179 43               [ 4]  393 	ld	b, e
                                    394 ;src/joytest.c:25: set_bkg_based_tiles(x,      y, 2, 2, disabled_buttons[0], 1);
                                    395 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    0000017A 21r00r00         [12]  396 	ld	hl, #__map_tile_offset
    0000017D 36 01            [12]  397 	ld	(hl), #0x01
                                    398 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    0000017F 11r00r00         [12]  399 	ld	de, #_disabled_buttons
    00000182 D5               [16]  400 	push	de
    00000183 21 02 02         [12]  401 	ld	hl, #0x202
    00000186 E5               [16]  402 	push	hl
    00000187 C5               [16]  403 	push	bc
    00000188 33               [ 8]  404 	inc	sp
    00000189 79               [ 4]  405 	ld	a, c
    0000018A F5               [16]  406 	push	af
    0000018B 33               [ 8]  407 	inc	sp
    0000018C CDr00r00         [24]  408 	call	_set_bkg_tiles
    0000018F E8 06            [16]  409 	add	sp, #6
                                    410 ;src/joytest.c:26: set_bkg_based_tiles(x + 2,  y, 2, 2, disabled_buttons[1], 1);
    00000191 11r04r00         [12]  411 	ld	de, #_disabled_buttons + 4
    00000194 79               [ 4]  412 	ld	a, c
    00000195 3C               [ 4]  413 	inc	a
    00000196 3C               [ 4]  414 	inc	a
                                    415 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    00000197 21r00r00         [12]  416 	ld	hl, #__map_tile_offset
    0000019A 36 01            [12]  417 	ld	(hl), #0x01
                                    418 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    0000019C D5               [16]  419 	push	de
    0000019D 26 02            [ 8]  420 	ld	h, #0x02
                                    421 ;	spillPairReg hl
                                    422 ;	spillPairReg hl
    0000019F E5               [16]  423 	push	hl
    000001A0 33               [ 8]  424 	inc	sp
    000001A1 26 02            [ 8]  425 	ld	h, #0x02
                                    426 ;	spillPairReg hl
                                    427 ;	spillPairReg hl
    000001A3 68               [ 4]  428 	ld	l, b
    000001A4 E5               [16]  429 	push	hl
    000001A5 F5               [16]  430 	push	af
    000001A6 33               [ 8]  431 	inc	sp
    000001A7 CDr00r00         [24]  432 	call	_set_bkg_tiles
    000001AA E8 06            [16]  433 	add	sp, #6
                                    434 ;src/joytest.c:27: set_bkg_based_tiles(x + 4,  y, 2, 2, disabled_buttons[2], 1);
    000001AC 11r08r00         [12]  435 	ld	de, #_disabled_buttons + 8
    000001AF 79               [ 4]  436 	ld	a, c
    000001B0 3C               [ 4]  437 	inc	a
    000001B1 3C               [ 4]  438 	inc	a
    000001B2 3C               [ 4]  439 	inc	a
    000001B3 3C               [ 4]  440 	inc	a
                                    441 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    000001B4 21r00r00         [12]  442 	ld	hl, #__map_tile_offset
    000001B7 36 01            [12]  443 	ld	(hl), #0x01
                                    444 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    000001B9 D5               [16]  445 	push	de
    000001BA 26 02            [ 8]  446 	ld	h, #0x02
                                    447 ;	spillPairReg hl
                                    448 ;	spillPairReg hl
    000001BC E5               [16]  449 	push	hl
    000001BD 33               [ 8]  450 	inc	sp
    000001BE 26 02            [ 8]  451 	ld	h, #0x02
                                    452 ;	spillPairReg hl
                                    453 ;	spillPairReg hl
    000001C0 68               [ 4]  454 	ld	l, b
    000001C1 E5               [16]  455 	push	hl
    000001C2 F5               [16]  456 	push	af
    000001C3 33               [ 8]  457 	inc	sp
    000001C4 CDr00r00         [24]  458 	call	_set_bkg_tiles
    000001C7 E8 06            [16]  459 	add	sp, #6
                                    460 ;src/joytest.c:28: set_bkg_based_tiles(x + 6,  y, 2, 2, disabled_buttons[3], 1);
    000001C9 11r0Cr00         [12]  461 	ld	de, #_disabled_buttons + 12
    000001CC 79               [ 4]  462 	ld	a, c
    000001CD C6 06            [ 8]  463 	add	a, #0x06
                                    464 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    000001CF 21r00r00         [12]  465 	ld	hl, #__map_tile_offset
    000001D2 36 01            [12]  466 	ld	(hl), #0x01
                                    467 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    000001D4 D5               [16]  468 	push	de
    000001D5 26 02            [ 8]  469 	ld	h, #0x02
                                    470 ;	spillPairReg hl
                                    471 ;	spillPairReg hl
    000001D7 E5               [16]  472 	push	hl
    000001D8 33               [ 8]  473 	inc	sp
    000001D9 26 02            [ 8]  474 	ld	h, #0x02
                                    475 ;	spillPairReg hl
                                    476 ;	spillPairReg hl
    000001DB 68               [ 4]  477 	ld	l, b
    000001DC E5               [16]  478 	push	hl
    000001DD F5               [16]  479 	push	af
    000001DE 33               [ 8]  480 	inc	sp
    000001DF CDr00r00         [24]  481 	call	_set_bkg_tiles
    000001E2 E8 06            [16]  482 	add	sp, #6
                                    483 ;src/joytest.c:29: set_bkg_based_tiles(x + 8,  y, 2, 2, disabled_buttons[4], 1);
    000001E4 11r10r00         [12]  484 	ld	de, #_disabled_buttons + 16
    000001E7 79               [ 4]  485 	ld	a, c
    000001E8 C6 08            [ 8]  486 	add	a, #0x08
                                    487 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    000001EA 21r00r00         [12]  488 	ld	hl, #__map_tile_offset
    000001ED 36 01            [12]  489 	ld	(hl), #0x01
                                    490 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    000001EF D5               [16]  491 	push	de
    000001F0 26 02            [ 8]  492 	ld	h, #0x02
                                    493 ;	spillPairReg hl
                                    494 ;	spillPairReg hl
    000001F2 E5               [16]  495 	push	hl
    000001F3 33               [ 8]  496 	inc	sp
    000001F4 26 02            [ 8]  497 	ld	h, #0x02
                                    498 ;	spillPairReg hl
                                    499 ;	spillPairReg hl
    000001F6 68               [ 4]  500 	ld	l, b
    000001F7 E5               [16]  501 	push	hl
    000001F8 F5               [16]  502 	push	af
    000001F9 33               [ 8]  503 	inc	sp
    000001FA CDr00r00         [24]  504 	call	_set_bkg_tiles
    000001FD E8 06            [16]  505 	add	sp, #6
                                    506 ;src/joytest.c:30: set_bkg_based_tiles(x + 10, y, 2, 2, disabled_buttons[5], 1);
    000001FF 11r14r00         [12]  507 	ld	de, #_disabled_buttons + 20
    00000202 79               [ 4]  508 	ld	a, c
    00000203 C6 0A            [ 8]  509 	add	a, #0x0a
                                    510 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    00000205 21r00r00         [12]  511 	ld	hl, #__map_tile_offset
    00000208 36 01            [12]  512 	ld	(hl), #0x01
                                    513 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    0000020A D5               [16]  514 	push	de
    0000020B 26 02            [ 8]  515 	ld	h, #0x02
                                    516 ;	spillPairReg hl
                                    517 ;	spillPairReg hl
    0000020D E5               [16]  518 	push	hl
    0000020E 33               [ 8]  519 	inc	sp
    0000020F 26 02            [ 8]  520 	ld	h, #0x02
                                    521 ;	spillPairReg hl
                                    522 ;	spillPairReg hl
    00000211 68               [ 4]  523 	ld	l, b
    00000212 E5               [16]  524 	push	hl
    00000213 F5               [16]  525 	push	af
    00000214 33               [ 8]  526 	inc	sp
    00000215 CDr00r00         [24]  527 	call	_set_bkg_tiles
    00000218 E8 06            [16]  528 	add	sp, #6
                                    529 ;src/joytest.c:31: set_bkg_based_tiles(x + 12, y, 2, 2, disabled_buttons[6], 1);
    0000021A 11r18r00         [12]  530 	ld	de, #_disabled_buttons + 24
    0000021D 79               [ 4]  531 	ld	a, c
    0000021E C6 0C            [ 8]  532 	add	a, #0x0c
                                    533 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    00000220 21r00r00         [12]  534 	ld	hl, #__map_tile_offset
    00000223 36 01            [12]  535 	ld	(hl), #0x01
                                    536 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    00000225 D5               [16]  537 	push	de
    00000226 26 02            [ 8]  538 	ld	h, #0x02
                                    539 ;	spillPairReg hl
                                    540 ;	spillPairReg hl
    00000228 E5               [16]  541 	push	hl
    00000229 33               [ 8]  542 	inc	sp
    0000022A 26 02            [ 8]  543 	ld	h, #0x02
                                    544 ;	spillPairReg hl
                                    545 ;	spillPairReg hl
    0000022C 68               [ 4]  546 	ld	l, b
    0000022D E5               [16]  547 	push	hl
    0000022E F5               [16]  548 	push	af
    0000022F 33               [ 8]  549 	inc	sp
    00000230 CDr00r00         [24]  550 	call	_set_bkg_tiles
    00000233 E8 06            [16]  551 	add	sp, #6
                                    552 ;src/joytest.c:32: set_bkg_based_tiles(x + 14, y, 2, 2, disabled_buttons[7], 1);
    00000235 11r1Cr00         [12]  553 	ld	de, #_disabled_buttons + 28
    00000238 79               [ 4]  554 	ld	a, c
    00000239 C6 0E            [ 8]  555 	add	a, #0x0e
                                    556 ;../../../include/gb/gb.h:1170: _map_tile_offset = base_tile;
    0000023B 21r00r00         [12]  557 	ld	hl, #__map_tile_offset
    0000023E 36 01            [12]  558 	ld	(hl), #0x01
                                    559 ;../../../include/gb/gb.h:1171: set_bkg_tiles(x, y, w, h, tiles);
    00000240 D5               [16]  560 	push	de
    00000241 26 02            [ 8]  561 	ld	h, #0x02
                                    562 ;	spillPairReg hl
                                    563 ;	spillPairReg hl
    00000243 E5               [16]  564 	push	hl
    00000244 33               [ 8]  565 	inc	sp
    00000245 26 02            [ 8]  566 	ld	h, #0x02
                                    567 ;	spillPairReg hl
                                    568 ;	spillPairReg hl
    00000247 68               [ 4]  569 	ld	l, b
    00000248 E5               [16]  570 	push	hl
    00000249 F5               [16]  571 	push	af
    0000024A 33               [ 8]  572 	inc	sp
    0000024B CDr00r00         [24]  573 	call	_set_bkg_tiles
    0000024E E8 06            [16]  574 	add	sp, #6
                                    575 ;../../../include/gb/gb.h:1172: _map_tile_offset = 0;
    00000250 21r00r00         [12]  576 	ld	hl, #__map_tile_offset
    00000253 36 00            [12]  577 	ld	(hl), #0x00
                                    578 ;src/joytest.c:32: set_bkg_based_tiles(x + 14, y, 2, 2, disabled_buttons[7], 1);
                                    579 ;src/joytest.c:33: }
    00000255 C9               [16]  580 	ret
                                    581 ;src/joytest.c:35: void reset_object_pos(void) {
                                    582 ;	---------------------------------
                                    583 ; Function reset_object_pos
                                    584 ; ---------------------------------
    00000256                        585 _reset_object_pos::
                                    586 ;src/joytest.c:36: for (uint8_t i = 0; i < 4; i++) {
    00000256 0E 00            [ 8]  587 	ld	c, #0x00
    00000258                        588 00105$:
    00000258 79               [ 4]  589 	ld	a, c
    00000259 D6 04            [ 8]  590 	sub	a, #0x04
    0000025B D0               [20]  591 	ret	NC
                                    592 ;../../../include/gb/gb.h:1875: shadow_OAM[nb].tile=tile;
    0000025C 69               [ 4]  593 	ld	l, c
                                    594 ;	spillPairReg hl
                                    595 ;	spillPairReg hl
    0000025D 26 00            [ 8]  596 	ld	h, #0x00
                                    597 ;	spillPairReg hl
                                    598 ;	spillPairReg hl
    0000025F 29               [ 8]  599 	add	hl, hl
    00000260 29               [ 8]  600 	add	hl, hl
    00000261 5D               [ 4]  601 	ld	e, l
    00000262 54               [ 4]  602 	ld	d, h
    00000263 21r01r00         [12]  603 	ld	hl,#_shadow_OAM + 1
    00000266 19               [ 8]  604 	add	hl,de
    00000267 23               [ 8]  605 	inc	hl
    00000268 71               [ 8]  606 	ld	(hl), c
                                    607 ;src/joytest.c:39: DEVICE_SPRITE_PX_OFFSET_X + (i << 3) + ((DEVICE_SCREEN_PX_WIDTH - (4 * 8)) >> 1), 
    00000269 79               [ 4]  608 	ld	a, c
    0000026A 87               [ 4]  609 	add	a, a
    0000026B 87               [ 4]  610 	add	a, a
    0000026C 87               [ 4]  611 	add	a, a
    0000026D C6 48            [ 8]  612 	add	a, #0x48
    0000026F 47               [ 4]  613 	ld	b, a
                                    614 ;../../../include/gb/gb.h:1961: OAM_item_t * itm = &shadow_OAM[nb];
    00000270 21r00r00         [12]  615 	ld	hl, #_shadow_OAM
    00000273 19               [ 8]  616 	add	hl, de
                                    617 ;../../../include/gb/gb.h:1962: itm->y=y, itm->x=x;
    00000274 3E 84            [ 8]  618 	ld	a, #0x84
    00000276 22               [ 8]  619 	ld	(hl+), a
    00000277 70               [ 8]  620 	ld	(hl), b
                                    621 ;src/joytest.c:36: for (uint8_t i = 0; i < 4; i++) {
    00000278 0C               [ 4]  622 	inc	c
                                    623 ;src/joytest.c:43: }
    00000279 18 DD            [12]  624 	jr	00105$
                                    625 ;src/joytest.c:51: void main(void) {
                                    626 ;	---------------------------------
                                    627 ; Function main
                                    628 ; ---------------------------------
    0000027B                        629 _main::
    0000027B E8 FC            [16]  630 	add	sp, #-4
                                    631 ;src/joytest.c:54: for (uint8_t i = 4; i != 0; i--) vsync();
    0000027D 0E 04            [ 8]  632 	ld	c, #0x04
    0000027F                        633 00139$:
    0000027F 79               [ 4]  634 	ld	a, c
    00000280 B7               [ 4]  635 	or	a, a
    00000281 28 06            [12]  636 	jr	Z, 00101$
    00000283 CDr00r00         [24]  637 	call	_vsync
    00000286 0D               [ 4]  638 	dec	c
    00000287 18 F6            [12]  639 	jr	00139$
    00000289                        640 00101$:
                                    641 ;src/joytest.c:57: isSGB = sgb_check();
    00000289 CDr00r00         [24]  642 	call	_sgb_check
    0000028C AF               [ 4]  643 	xor	a, a
    0000028D BB               [ 4]  644 	cp	a, e
    0000028E 17               [ 4]  645 	rla
    0000028F EAr01r00         [16]  646 	ld	(#_isSGB),a
                                    647 ;src/joytest.c:60: joypad_init(4, &joypads);
    00000292 11r05r00         [12]  648 	ld	de, #_joypads
    00000295 D5               [16]  649 	push	de
    00000296 3E 04            [ 8]  650 	ld	a, #0x04
    00000298 F5               [16]  651 	push	af
    00000299 33               [ 8]  652 	inc	sp
    0000029A CDr00r00         [24]  653 	call	_joypad_init
    0000029D E8 03            [16]  654 	add	sp, #3
                                    655 ;src/joytest.c:62: set_sprite_data(0, sizeof(sprite_data) >> 4, sprite_data);
    0000029F 11r00r00         [12]  656 	ld	de, #_sprite_data
    000002A2 D5               [16]  657 	push	de
    000002A3 21 00 04         [12]  658 	ld	hl, #0x400
    000002A6 E5               [16]  659 	push	hl
    000002A7 CDr00r00         [24]  660 	call	_set_sprite_data
    000002AA E8 04            [16]  661 	add	sp, #4
                                    662 ;src/joytest.c:63: set_bkg_data(1, sizeof(tiles_data) >> 4, tiles_data);
    000002AC 11r00r00         [12]  663 	ld	de, #_tiles_data
    000002AF D5               [16]  664 	push	de
    000002B0 21 01 5D         [12]  665 	ld	hl, #0x5d01
    000002B3 E5               [16]  666 	push	hl
    000002B4 CDr00r00         [24]  667 	call	_set_bkg_data
    000002B7 E8 04            [16]  668 	add	sp, #4
                                    669 ;src/joytest.c:64: fill_bkg_rect(0, 0, DEVICE_SCREEN_WIDTH, DEVICE_SCREEN_HEIGHT, 0);
    000002B9 AF               [ 4]  670 	xor	a, a
    000002BA 67               [ 4]  671 	ld	h, a
    000002BB 2E 12            [ 8]  672 	ld	l, #0x12
    000002BD E5               [16]  673 	push	hl
    000002BE 3E 14            [ 8]  674 	ld	a, #0x14
    000002C0 F5               [16]  675 	push	af
    000002C1 33               [ 8]  676 	inc	sp
    000002C2 AF               [ 4]  677 	xor	a, a
    000002C3 0F               [ 4]  678 	rrca
    000002C4 F5               [16]  679 	push	af
    000002C5 CDr00r00         [24]  680 	call	_fill_bkg_rect
    000002C8 E8 05            [16]  681 	add	sp, #5
                                    682 ;src/joytest.c:66: if (isSGB) draw_disabled(0, 0); else draw_buttons(joy, 0, 0);
    000002CA 21r01r00         [12]  683 	ld	hl, #_isSGB
    000002CD CB 46            [12]  684 	bit	0, (hl)
    000002CF 28 07            [12]  685 	jr	Z, 00103$
    000002D1 AF               [ 4]  686 	xor	a, a
    000002D2 5F               [ 4]  687 	ld	e, a
    000002D3 CDr78r01         [24]  688 	call	_draw_disabled
    000002D6 18 0B            [12]  689 	jr	00154$
    000002D8                        690 00103$:
    000002D8 AF               [ 4]  691 	xor	a, a
    000002D9 F5               [16]  692 	push	af
    000002DA 33               [ 8]  693 	inc	sp
    000002DB 1E 00            [ 8]  694 	ld	e, #0x00
    000002DD FAr03r00         [16]  695 	ld	a, (#_joy)
    000002E0 CDr00r00         [24]  696 	call	_draw_buttons
                                    697 ;src/joytest.c:68: for (uint8_t i = 0; i != 4; i++) {
    000002E3                        698 00154$:
    000002E3 F8 03            [12]  699 	ldhl	sp,	#3
    000002E5 36 00            [12]  700 	ld	(hl), #0x00
    000002E7                        701 00142$:
    000002E7 F8 03            [12]  702 	ldhl	sp,	#3
    000002E9 7E               [ 8]  703 	ld	a, (hl)
    000002EA D6 04            [ 8]  704 	sub	a, #0x04
    000002EC 28 55            [12]  705 	jr	Z, 00108$
                                    706 ;src/joytest.c:69: if (i <= (joypads.npads - 1)) {
    000002EE 21r05r00         [12]  707 	ld	hl, #_joypads
    000002F1 4E               [ 8]  708 	ld	c, (hl)
    000002F2 AF               [ 4]  709 	xor	a, a
    000002F3 47               [ 4]  710 	ld	b, a
    000002F4 0B               [ 8]  711 	dec	bc
    000002F5 F8 03            [12]  712 	ldhl	sp,	#3
    000002F7 7E               [ 8]  713 	ld	a, (hl)
    000002F8 F8 00            [12]  714 	ldhl	sp,	#0
    000002FA 22               [ 8]  715 	ld	(hl+), a
                                    716 ;src/joytest.c:70: draw_buttons(joypads.joypads[i], 0, 4 + (i << 1)); 
    000002FB AF               [ 4]  717 	xor	a, a
    000002FC 22               [ 8]  718 	ld	(hl+), a
    000002FD 23               [ 8]  719 	inc	hl
    000002FE 3A               [ 8]  720 	ld	a, (hl-)
    000002FF 87               [ 4]  721 	add	a, a
    00000300 C6 04            [ 8]  722 	add	a, #0x04
                                    723 ;src/joytest.c:69: if (i <= (joypads.npads - 1)) {
    00000302 32               [ 8]  724 	ld	(hl-), a
    00000303 2B               [ 8]  725 	dec	hl
    00000304 79               [ 4]  726 	ld	a, c
    00000305 96               [ 8]  727 	sub	a, (hl)
    00000306 23               [ 8]  728 	inc	hl
    00000307 78               [ 4]  729 	ld	a, b
    00000308 9E               [ 8]  730 	sbc	a, (hl)
    00000309 78               [ 4]  731 	ld	a, b
    0000030A 57               [ 4]  732 	ld	d, a
    0000030B CB 7E            [12]  733 	bit	7, (hl)
    0000030D 28 07            [12]  734 	jr	Z, 00286$
    0000030F CB 7A            [ 8]  735 	bit	7, d
    00000311 20 08            [12]  736 	jr	NZ, 00287$
    00000313 BF               [ 4]  737 	cp	a, a
    00000314 18 05            [12]  738 	jr	00287$
    00000316                        739 00286$:
    00000316 CB 7A            [ 8]  740 	bit	7, d
    00000318 28 01            [12]  741 	jr	Z, 00287$
    0000031A 37               [ 4]  742 	scf
    0000031B                        743 00287$:
    0000031B 38 1A            [12]  744 	jr	C, 00106$
                                    745 ;src/joytest.c:70: draw_buttons(joypads.joypads[i], 0, 4 + (i << 1)); 
    0000031D 01r06r00         [12]  746 	ld	bc, #_joypads + 1
    00000320 F8 03            [12]  747 	ldhl	sp,	#3
    00000322 6E               [ 8]  748 	ld	l, (hl)
    00000323 26 00            [ 8]  749 	ld	h, #0x00
    00000325 09               [ 8]  750 	add	hl, bc
    00000326 4D               [ 4]  751 	ld	c, l
    00000327 44               [ 4]  752 	ld	b, h
    00000328 0A               [ 8]  753 	ld	a, (bc)
    00000329 4F               [ 4]  754 	ld	c, a
    0000032A F8 02            [12]  755 	ldhl	sp,	#2
    0000032C 7E               [ 8]  756 	ld	a, (hl)
    0000032D F5               [16]  757 	push	af
    0000032E 33               [ 8]  758 	inc	sp
    0000032F 1E 00            [ 8]  759 	ld	e, #0x00
    00000331 79               [ 4]  760 	ld	a, c
    00000332 CDr00r00         [24]  761 	call	_draw_buttons
    00000335 18 07            [12]  762 	jr	00143$
    00000337                        763 00106$:
                                    764 ;src/joytest.c:72: draw_disabled(0, 4 + (i << 1));
    00000337 F8 02            [12]  765 	ldhl	sp,	#2
    00000339 5E               [ 8]  766 	ld	e, (hl)
    0000033A AF               [ 4]  767 	xor	a, a
    0000033B CDr78r01         [24]  768 	call	_draw_disabled
    0000033E                        769 00143$:
                                    770 ;src/joytest.c:68: for (uint8_t i = 0; i != 4; i++) {
    0000033E F8 03            [12]  771 	ldhl	sp,	#3
    00000340 34               [12]  772 	inc	(hl)
    00000341 18 A4            [12]  773 	jr	00142$
    00000343                        774 00108$:
                                    775 ;src/joytest.c:76: reset_object_pos();
    00000343 CDr56r02         [24]  776 	call	_reset_object_pos
                                    777 ;src/joytest.c:77: SHOW_SPRITES; SHOW_BKG;
    00000346 F0r00            [12]  778 	ldh	a, (_LCDC_REG + 0)
    00000348 F6 01            [ 8]  779 	or	a, #0x01
    0000034A E0r00            [12]  780 	ldh	(_LCDC_REG + 0), a
    0000034C F0r00            [12]  781 	ldh	a, (_LCDC_REG + 0)
    0000034E F6 40            [ 8]  782 	or	a, #0x40
    00000350 E0r00            [12]  783 	ldh	(_LCDC_REG + 0), a
                                    784 ;src/joytest.c:79: while(TRUE) {
    00000352                        785 00132$:
                                    786 ;src/joytest.c:81: if (toggle = !toggle) {
    00000352 21r00r00         [12]  787 	ld	hl, #_toggle
    00000355 7E               [ 8]  788 	ld	a, (hl)
    00000356 EE 01            [ 8]  789 	xor	a, #0x01
    00000358 4F               [ 4]  790 	ld	c, a
    00000359 77               [ 8]  791 	ld	(hl), a
    0000035A CB 41            [ 8]  792 	bit	0, c
    0000035C 28 34            [12]  793 	jr	Z, 00129$
                                    794 ;src/joytest.c:83: if (!isSGB) {
    0000035E 21r01r00         [12]  795 	ld	hl, #_isSGB
    00000361 CB 46            [12]  796 	bit	0, (hl)
    00000363 C2r21r04         [16]  797 	jp	NZ, 00130$
                                    798 ;src/joytest.c:84: old_joy = joy, joy = joypad();
    00000366 FAr03r00         [16]  799 	ld	a, (#_joy)
    00000369 EAr02r00         [16]  800 	ld	(#_old_joy),a
    0000036C CDr00r00         [24]  801 	call	_joypad
    0000036F 21r03r00         [12]  802 	ld	hl, #_joy
    00000372 77               [ 8]  803 	ld	(hl), a
                                    804 ;src/joytest.c:87: if (joy != old_joy) draw_buttons(joy, 0, 0);
    00000373 7E               [ 8]  805 	ld	a, (hl)
    00000374 21r02r00         [12]  806 	ld	hl, #_old_joy
    00000377 96               [ 8]  807 	sub	a, (hl)
    00000378 28 0B            [12]  808 	jr	Z, 00110$
    0000037A AF               [ 4]  809 	xor	a, a
    0000037B F5               [16]  810 	push	af
    0000037C 33               [ 8]  811 	inc	sp
    0000037D 1E 00            [ 8]  812 	ld	e, #0x00
    0000037F FAr03r00         [16]  813 	ld	a, (#_joy)
    00000382 CDr00r00         [24]  814 	call	_draw_buttons
    00000385                        815 00110$:
                                    816 ;src/joytest.c:90: if (joy & J_START) reset_object_pos();
    00000385 FAr03r00         [16]  817 	ld	a, (#_joy)
    00000388 07               [ 4]  818 	rlca
    00000389 D2r21r04         [16]  819 	jp	NC,00130$
    0000038C CDr56r02         [24]  820 	call	_reset_object_pos
    0000038F C3r21r04         [16]  821 	jp	00130$
    00000392                        822 00129$:
                                    823 ;src/joytest.c:93: old_joypads = joypads;
    00000392 11 05 00         [12]  824 	ld	de, #0x0005
    00000395 D5               [16]  825 	push	de
    00000396 01r05r00         [12]  826 	ld	bc, #_joypads
    00000399 11r00r00         [12]  827 	ld	de, #_old_joypads
    0000039C CDr00r00         [24]  828 	call	___memcpy
                                    829 ;src/joytest.c:94: joypad_ex(&joypads);
    0000039F 11r05r00         [12]  830 	ld	de, #_joypads
    000003A2 CDr00r00         [24]  831 	call	_joypad_ex
                                    832 ;src/joytest.c:96: for (uint8_t i = 0; i < joypads.npads; i++) {
    000003A5 0E 00            [ 8]  833 	ld	c, #0x00
    000003A7                        834 00145$:
    000003A7 21r05r00         [12]  835 	ld	hl, #_joypads
    000003AA 46               [ 8]  836 	ld	b, (hl)
    000003AB 79               [ 4]  837 	ld	a, c
    000003AC 90               [ 4]  838 	sub	a, b
    000003AD 30 72            [12]  839 	jr	NC, 00130$
                                    840 ;src/joytest.c:97: uint8_t j = joypads.joypads[i];
    000003AF 21r06r00         [12]  841 	ld	hl, #(_joypads + 1)
    000003B2 06 00            [ 8]  842 	ld	b, #0x00
    000003B4 09               [ 8]  843 	add	hl, bc
    000003B5 46               [ 8]  844 	ld	b, (hl)
                                    845 ;src/joytest.c:100: if (old_joypads.joypads[i] != j) draw_buttons(j, 0, 4 + (i << 1));
    000003B6 11r01r00         [12]  846 	ld	de, #_old_joypads + 1
    000003B9 69               [ 4]  847 	ld	l, c
                                    848 ;	spillPairReg hl
                                    849 ;	spillPairReg hl
    000003BA 26 00            [ 8]  850 	ld	h, #0x00
                                    851 ;	spillPairReg hl
                                    852 ;	spillPairReg hl
    000003BC 19               [ 8]  853 	add	hl, de
    000003BD 7E               [ 8]  854 	ld	a, (hl)
    000003BE 90               [ 4]  855 	sub	a, b
    000003BF 28 0E            [12]  856 	jr	Z, 00116$
    000003C1 79               [ 4]  857 	ld	a, c
    000003C2 87               [ 4]  858 	add	a, a
    000003C3 C6 04            [ 8]  859 	add	a, #0x04
    000003C5 C5               [16]  860 	push	bc
    000003C6 F5               [16]  861 	push	af
    000003C7 33               [ 8]  862 	inc	sp
    000003C8 1E 00            [ 8]  863 	ld	e, #0x00
    000003CA 78               [ 4]  864 	ld	a, b
    000003CB CDr00r00         [24]  865 	call	_draw_buttons
    000003CE C1               [12]  866 	pop	bc
    000003CF                        867 00116$:
                                    868 ;src/joytest.c:103: if (j & J_LEFT)  scroll_sprite(i, -1, 0);
    000003CF CB 48            [ 8]  869 	bit	1, b
    000003D1 28 0D            [12]  870 	jr	Z, 00118$
                                    871 ;../../../include/gb/gb.h:1977: OAM_item_t * itm = &shadow_OAM[nb];
    000003D3 11r00r00         [12]  872 	ld	de, #_shadow_OAM+0
    000003D6 69               [ 4]  873 	ld	l, c
                                    874 ;	spillPairReg hl
                                    875 ;	spillPairReg hl
    000003D7 AF               [ 4]  876 	xor	a, a
    000003D8 67               [ 4]  877 	ld	h, a
    000003D9 29               [ 8]  878 	add	hl, hl
    000003DA 29               [ 8]  879 	add	hl, hl
    000003DB 19               [ 8]  880 	add	hl, de
                                    881 ;../../../include/gb/gb.h:1978: itm->y+=y, itm->x+=x;
    000003DC 7E               [ 8]  882 	ld	a, (hl)
    000003DD 22               [ 8]  883 	ld	(hl+), a
    000003DE 35               [12]  884 	dec	(hl)
    000003DF 7E               [ 8]  885 	ld	a, (hl)
                                    886 ;src/joytest.c:103: if (j & J_LEFT)  scroll_sprite(i, -1, 0);
    000003E0                        887 00118$:
                                    888 ;src/joytest.c:104: if (j & J_RIGHT) scroll_sprite(i, 1, 0);
    000003E0 CB 40            [ 8]  889 	bit	0, b
    000003E2 28 0D            [12]  890 	jr	Z, 00120$
                                    891 ;../../../include/gb/gb.h:1977: OAM_item_t * itm = &shadow_OAM[nb];
    000003E4 11r00r00         [12]  892 	ld	de, #_shadow_OAM+0
    000003E7 69               [ 4]  893 	ld	l, c
                                    894 ;	spillPairReg hl
                                    895 ;	spillPairReg hl
    000003E8 AF               [ 4]  896 	xor	a, a
    000003E9 67               [ 4]  897 	ld	h, a
    000003EA 29               [ 8]  898 	add	hl, hl
    000003EB 29               [ 8]  899 	add	hl, hl
    000003EC 19               [ 8]  900 	add	hl, de
                                    901 ;../../../include/gb/gb.h:1978: itm->y+=y, itm->x+=x;
    000003ED 7E               [ 8]  902 	ld	a, (hl)
    000003EE 22               [ 8]  903 	ld	(hl+), a
    000003EF 34               [12]  904 	inc	(hl)
    000003F0 7E               [ 8]  905 	ld	a, (hl)
                                    906 ;src/joytest.c:104: if (j & J_RIGHT) scroll_sprite(i, 1, 0);
    000003F1                        907 00120$:
                                    908 ;src/joytest.c:105: if (j & J_UP)    scroll_sprite(i, 0, -1);
    000003F1 CB 50            [ 8]  909 	bit	2, b
    000003F3 28 0E            [12]  910 	jr	Z, 00122$
                                    911 ;../../../include/gb/gb.h:1977: OAM_item_t * itm = &shadow_OAM[nb];
    000003F5 11r00r00         [12]  912 	ld	de, #_shadow_OAM+0
    000003F8 69               [ 4]  913 	ld	l, c
                                    914 ;	spillPairReg hl
                                    915 ;	spillPairReg hl
    000003F9 AF               [ 4]  916 	xor	a, a
    000003FA 67               [ 4]  917 	ld	h, a
    000003FB 29               [ 8]  918 	add	hl, hl
    000003FC 29               [ 8]  919 	add	hl, hl
    000003FD 19               [ 8]  920 	add	hl, de
                                    921 ;../../../include/gb/gb.h:1978: itm->y+=y, itm->x+=x;
    000003FE 7E               [ 8]  922 	ld	a, (hl)
    000003FF 3D               [ 4]  923 	dec	a
    00000400 22               [ 8]  924 	ld	(hl+), a
    00000401 7E               [ 8]  925 	ld	a, (hl)
    00000402 77               [ 8]  926 	ld	(hl), a
                                    927 ;src/joytest.c:105: if (j & J_UP)    scroll_sprite(i, 0, -1);
    00000403                        928 00122$:
                                    929 ;src/joytest.c:106: if (j & J_DOWN)  scroll_sprite(i, 0, 1);
    00000403 CB 58            [ 8]  930 	bit	3, b
    00000405 28 0E            [12]  931 	jr	Z, 00124$
                                    932 ;../../../include/gb/gb.h:1977: OAM_item_t * itm = &shadow_OAM[nb];
    00000407 11r00r00         [12]  933 	ld	de, #_shadow_OAM+0
    0000040A 69               [ 4]  934 	ld	l, c
                                    935 ;	spillPairReg hl
                                    936 ;	spillPairReg hl
    0000040B AF               [ 4]  937 	xor	a, a
    0000040C 67               [ 4]  938 	ld	h, a
    0000040D 29               [ 8]  939 	add	hl, hl
    0000040E 29               [ 8]  940 	add	hl, hl
    0000040F 19               [ 8]  941 	add	hl, de
                                    942 ;../../../include/gb/gb.h:1978: itm->y+=y, itm->x+=x;
    00000410 7E               [ 8]  943 	ld	a, (hl)
    00000411 3C               [ 4]  944 	inc	a
    00000412 22               [ 8]  945 	ld	(hl+), a
    00000413 7E               [ 8]  946 	ld	a, (hl)
    00000414 77               [ 8]  947 	ld	(hl), a
                                    948 ;src/joytest.c:106: if (j & J_DOWN)  scroll_sprite(i, 0, 1);
    00000415                        949 00124$:
                                    950 ;src/joytest.c:109: if (j & J_START) reset_object_pos();
    00000415 CB 78            [ 8]  951 	bit	7, b
    00000417 28 05            [12]  952 	jr	Z, 00146$
    00000419 C5               [16]  953 	push	bc
    0000041A CDr56r02         [24]  954 	call	_reset_object_pos
    0000041D C1               [12]  955 	pop	bc
    0000041E                        956 00146$:
                                    957 ;src/joytest.c:96: for (uint8_t i = 0; i < joypads.npads; i++) {
    0000041E 0C               [ 4]  958 	inc	c
    0000041F 18 86            [12]  959 	jr	00145$
    00000421                        960 00130$:
                                    961 ;src/joytest.c:113: vsync();
    00000421 CDr00r00         [24]  962 	call	_vsync
    00000424 C3r52r03         [16]  963 	jp	00132$
                                    964 ;src/joytest.c:115: }
    00000427 E8 04            [16]  965 	add	sp, #4
    00000429 C9               [16]  966 	ret
                                    967 	.area _CODE
                                    968 	.area _INITIALIZER
    00000000                        969 __xinit__toggle:
    00000000 00                     970 	.db #0x00	;  0
    00000001                        971 __xinit__isSGB:
    00000001 00                     972 	.db #0x00	;  0
    00000002                        973 __xinit__old_joy:
    00000002 FF                     974 	.db #0xff	; 255
    00000003                        975 __xinit__joy:
    00000003 00                     976 	.db #0x00	; 0
                                    977 	.area _CABS (ABS)
